(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var Lp={exports:{}},ju={};var zx;function yS(){if(zx)return ju;zx=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,c){var h=null;if(c!==void 0&&(h=""+c),o.key!==void 0&&(h=""+o.key),"key"in o){c={};for(var g in o)g!=="key"&&(c[g]=o[g])}else c=o;return o=c.ref,{$$typeof:s,type:i,key:h,ref:o!==void 0?o:null,props:c}}return ju.Fragment=e,ju.jsx=n,ju.jsxs=n,ju}var qx;function bS(){return qx||(qx=1,Lp.exports=yS()),Lp.exports}var u=bS(),Bp={exports:{}},ze={};var Fx;function vS(){if(Fx)return ze;Fx=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),I=Symbol.iterator;function q(U){return U===null||typeof U!="object"?null:(U=I&&U[I]||U["@@iterator"],typeof U=="function"?U:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},te=Object.assign,Y={};function ue(U,B,le){this.props=U,this.context=B,this.refs=Y,this.updater=le||W}ue.prototype.isReactComponent={},ue.prototype.setState=function(U,B){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,B,"setState")},ue.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function fe(){}fe.prototype=ue.prototype;function oe(U,B,le){this.props=U,this.context=B,this.refs=Y,this.updater=le||W}var _e=oe.prototype=new fe;_e.constructor=oe,te(_e,ue.prototype),_e.isPureReactComponent=!0;var ke=Array.isArray;function Me(){}var O={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function k(U,B,le){var he=le.ref;return{$$typeof:s,type:U,key:B,ref:he!==void 0?he:null,props:le}}function z(U,B){return k(U.type,B,U.props)}function P(U){return typeof U=="object"&&U!==null&&U.$$typeof===s}function F(U){var B={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(le){return B[le]})}var G=/\/+/g;function Fe(U,B){return typeof U=="object"&&U!==null&&U.key!=null?F(""+U.key):B.toString(36)}function Mt(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(Me,Me):(U.status="pending",U.then(function(B){U.status==="pending"&&(U.status="fulfilled",U.value=B)},function(B){U.status==="pending"&&(U.status="rejected",U.reason=B)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function ee(U,B,le,he,ve){var ye=typeof U;(ye==="undefined"||ye==="boolean")&&(U=null);var Se=!1;if(U===null)Se=!0;else switch(ye){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(U.$$typeof){case s:case e:Se=!0;break;case E:return Se=U._init,ee(Se(U._payload),B,le,he,ve)}}if(Se)return ve=ve(U),Se=he===""?"."+Fe(U,0):he,ke(ve)?(le="",Se!=null&&(le=Se.replace(G,"$&/")+"/"),ee(ve,B,le,"",function(Be){return Be})):ve!=null&&(P(ve)&&(ve=z(ve,le+(ve.key==null||U&&U.key===ve.key?"":(""+ve.key).replace(G,"$&/")+"/")+Se)),B.push(ve)),1;Se=0;var Le=he===""?".":he+":";if(ke(U))for(var Ie=0;Ie<U.length;Ie++)he=U[Ie],ye=Le+Fe(he,Ie),Se+=ee(he,B,le,ye,ve);else if(Ie=q(U),typeof Ie=="function")for(U=Ie.call(U),Ie=0;!(he=U.next()).done;)he=he.value,ye=Le+Fe(he,Ie++),Se+=ee(he,B,le,ye,ve);else if(ye==="object"){if(typeof U.then=="function")return ee(Mt(U),B,le,he,ve);throw B=String(U),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return Se}function ge(U,B,le){if(U==null)return U;var he=[],ve=0;return ee(U,he,"","",function(ye){return B.call(le,ye,ve++)}),he}function Ne(U){if(U._status===-1){var B=U._result;B=B(),B.then(function(le){(U._status===0||U._status===-1)&&(U._status=1,U._result=le)},function(le){(U._status===0||U._status===-1)&&(U._status=2,U._result=le)}),U._status===-1&&(U._status=0,U._result=B)}if(U._status===1)return U._result.default;throw U._result}var Xe=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},at={map:ge,forEach:function(U,B,le){ge(U,function(){B.apply(this,arguments)},le)},count:function(U){var B=0;return ge(U,function(){B++}),B},toArray:function(U){return ge(U,function(B){return B})||[]},only:function(U){if(!P(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return ze.Activity=S,ze.Children=at,ze.Component=ue,ze.Fragment=n,ze.Profiler=o,ze.PureComponent=oe,ze.StrictMode=i,ze.Suspense=y,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,ze.__COMPILER_RUNTIME={__proto__:null,c:function(U){return O.H.useMemoCache(U)}},ze.cache=function(U){return function(){return U.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(U,B,le){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var he=te({},U.props),ve=U.key;if(B!=null)for(ye in B.key!==void 0&&(ve=""+B.key),B)!D.call(B,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&B.ref===void 0||(he[ye]=B[ye]);var ye=arguments.length-2;if(ye===1)he.children=le;else if(1<ye){for(var Se=Array(ye),Le=0;Le<ye;Le++)Se[Le]=arguments[Le+2];he.children=Se}return k(U.type,ve,he)},ze.createContext=function(U){return U={$$typeof:h,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:c,_context:U},U},ze.createElement=function(U,B,le){var he,ve={},ye=null;if(B!=null)for(he in B.key!==void 0&&(ye=""+B.key),B)D.call(B,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(ve[he]=B[he]);var Se=arguments.length-2;if(Se===1)ve.children=le;else if(1<Se){for(var Le=Array(Se),Ie=0;Ie<Se;Ie++)Le[Ie]=arguments[Ie+2];ve.children=Le}if(U&&U.defaultProps)for(he in Se=U.defaultProps,Se)ve[he]===void 0&&(ve[he]=Se[he]);return k(U,ye,ve)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(U){return{$$typeof:g,render:U}},ze.isValidElement=P,ze.lazy=function(U){return{$$typeof:E,_payload:{_status:-1,_result:U},_init:Ne}},ze.memo=function(U,B){return{$$typeof:v,type:U,compare:B===void 0?null:B}},ze.startTransition=function(U){var B=O.T,le={};O.T=le;try{var he=U(),ve=O.S;ve!==null&&ve(le,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(Me,Xe)}catch(ye){Xe(ye)}finally{B!==null&&le.types!==null&&(B.types=le.types),O.T=B}},ze.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},ze.use=function(U){return O.H.use(U)},ze.useActionState=function(U,B,le){return O.H.useActionState(U,B,le)},ze.useCallback=function(U,B){return O.H.useCallback(U,B)},ze.useContext=function(U){return O.H.useContext(U)},ze.useDebugValue=function(){},ze.useDeferredValue=function(U,B){return O.H.useDeferredValue(U,B)},ze.useEffect=function(U,B){return O.H.useEffect(U,B)},ze.useEffectEvent=function(U){return O.H.useEffectEvent(U)},ze.useId=function(){return O.H.useId()},ze.useImperativeHandle=function(U,B,le){return O.H.useImperativeHandle(U,B,le)},ze.useInsertionEffect=function(U,B){return O.H.useInsertionEffect(U,B)},ze.useLayoutEffect=function(U,B){return O.H.useLayoutEffect(U,B)},ze.useMemo=function(U,B){return O.H.useMemo(U,B)},ze.useOptimistic=function(U,B){return O.H.useOptimistic(U,B)},ze.useReducer=function(U,B,le){return O.H.useReducer(U,B,le)},ze.useRef=function(U){return O.H.useRef(U)},ze.useState=function(U){return O.H.useState(U)},ze.useSyncExternalStore=function(U,B,le){return O.H.useSyncExternalStore(U,B,le)},ze.useTransition=function(){return O.H.useTransition()},ze.version="19.2.0",ze}var Hx;function Bg(){return Hx||(Hx=1,Bp.exports=vS()),Bp.exports}var R=Bg(),zp={exports:{}},Du={},qp={exports:{}},Fp={};var $x;function xS(){return $x||($x=1,(function(s){function e(ee,ge){var Ne=ee.length;ee.push(ge);e:for(;0<Ne;){var Xe=Ne-1>>>1,at=ee[Xe];if(0<o(at,ge))ee[Xe]=ge,ee[Ne]=at,Ne=Xe;else break e}}function n(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var ge=ee[0],Ne=ee.pop();if(Ne!==ge){ee[0]=Ne;e:for(var Xe=0,at=ee.length,U=at>>>1;Xe<U;){var B=2*(Xe+1)-1,le=ee[B],he=B+1,ve=ee[he];if(0>o(le,Ne))he<at&&0>o(ve,le)?(ee[Xe]=ve,ee[he]=Ne,Xe=he):(ee[Xe]=le,ee[B]=Ne,Xe=B);else if(he<at&&0>o(ve,Ne))ee[Xe]=ve,ee[he]=Ne,Xe=he;else break e}}return ge}function o(ee,ge){var Ne=ee.sortIndex-ge.sortIndex;return Ne!==0?Ne:ee.id-ge.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var h=Date,g=h.now();s.unstable_now=function(){return h.now()-g}}var y=[],v=[],E=1,S=null,I=3,q=!1,W=!1,te=!1,Y=!1,ue=typeof setTimeout=="function"?setTimeout:null,fe=typeof clearTimeout=="function"?clearTimeout:null,oe=typeof setImmediate<"u"?setImmediate:null;function _e(ee){for(var ge=n(v);ge!==null;){if(ge.callback===null)i(v);else if(ge.startTime<=ee)i(v),ge.sortIndex=ge.expirationTime,e(y,ge);else break;ge=n(v)}}function ke(ee){if(te=!1,_e(ee),!W)if(n(y)!==null)W=!0,Me||(Me=!0,F());else{var ge=n(v);ge!==null&&Mt(ke,ge.startTime-ee)}}var Me=!1,O=-1,D=5,k=-1;function z(){return Y?!0:!(s.unstable_now()-k<D)}function P(){if(Y=!1,Me){var ee=s.unstable_now();k=ee;var ge=!0;try{e:{W=!1,te&&(te=!1,fe(O),O=-1),q=!0;var Ne=I;try{t:{for(_e(ee),S=n(y);S!==null&&!(S.expirationTime>ee&&z());){var Xe=S.callback;if(typeof Xe=="function"){S.callback=null,I=S.priorityLevel;var at=Xe(S.expirationTime<=ee);if(ee=s.unstable_now(),typeof at=="function"){S.callback=at,_e(ee),ge=!0;break t}S===n(y)&&i(y),_e(ee)}else i(y);S=n(y)}if(S!==null)ge=!0;else{var U=n(v);U!==null&&Mt(ke,U.startTime-ee),ge=!1}}break e}finally{S=null,I=Ne,q=!1}ge=void 0}}finally{ge?F():Me=!1}}}var F;if(typeof oe=="function")F=function(){oe(P)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Fe=G.port2;G.port1.onmessage=P,F=function(){Fe.postMessage(null)}}else F=function(){ue(P,0)};function Mt(ee,ge){O=ue(function(){ee(s.unstable_now())},ge)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ee){ee.callback=null},s.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ee?Math.floor(1e3/ee):5},s.unstable_getCurrentPriorityLevel=function(){return I},s.unstable_next=function(ee){switch(I){case 1:case 2:case 3:var ge=3;break;default:ge=I}var Ne=I;I=ge;try{return ee()}finally{I=Ne}},s.unstable_requestPaint=function(){Y=!0},s.unstable_runWithPriority=function(ee,ge){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var Ne=I;I=ee;try{return ge()}finally{I=Ne}},s.unstable_scheduleCallback=function(ee,ge,Ne){var Xe=s.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?Xe+Ne:Xe):Ne=Xe,ee){case 1:var at=-1;break;case 2:at=250;break;case 5:at=1073741823;break;case 4:at=1e4;break;default:at=5e3}return at=Ne+at,ee={id:E++,callback:ge,priorityLevel:ee,startTime:Ne,expirationTime:at,sortIndex:-1},Ne>Xe?(ee.sortIndex=Ne,e(v,ee),n(y)===null&&ee===n(v)&&(te?(fe(O),O=-1):te=!0,Mt(ke,Ne-Xe))):(ee.sortIndex=at,e(y,ee),W||q||(W=!0,Me||(Me=!0,F()))),ee},s.unstable_shouldYield=z,s.unstable_wrapCallback=function(ee){var ge=I;return function(){var Ne=I;I=ge;try{return ee.apply(this,arguments)}finally{I=Ne}}}})(Fp)),Fp}var Qx;function _S(){return Qx||(Qx=1,qp.exports=xS()),qp.exports}var Hp={exports:{}},Xn={};var Kx;function wS(){if(Kx)return Xn;Kx=1;var s=Bg();function e(y){var v="https://react.dev/errors/"+y;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)v+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+y+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(y,v,E){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:y,containerInfo:v,implementation:E}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,v){if(y==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return Xn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Xn.createPortal=function(y,v){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return c(y,v,null,E)},Xn.flushSync=function(y){var v=h.T,E=i.p;try{if(h.T=null,i.p=2,y)return y()}finally{h.T=v,i.p=E,i.d.f()}},Xn.preconnect=function(y,v){typeof y=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,i.d.C(y,v))},Xn.prefetchDNS=function(y){typeof y=="string"&&i.d.D(y)},Xn.preinit=function(y,v){if(typeof y=="string"&&v&&typeof v.as=="string"){var E=v.as,S=g(E,v.crossOrigin),I=typeof v.integrity=="string"?v.integrity:void 0,q=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;E==="style"?i.d.S(y,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:S,integrity:I,fetchPriority:q}):E==="script"&&i.d.X(y,{crossOrigin:S,integrity:I,fetchPriority:q,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},Xn.preinitModule=function(y,v){if(typeof y=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var E=g(v.as,v.crossOrigin);i.d.M(y,{crossOrigin:E,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&i.d.M(y)},Xn.preload=function(y,v){if(typeof y=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var E=v.as,S=g(E,v.crossOrigin);i.d.L(y,E,{crossOrigin:S,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},Xn.preloadModule=function(y,v){if(typeof y=="string")if(v){var E=g(v.as,v.crossOrigin);i.d.m(y,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:E,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else i.d.m(y)},Xn.requestFormReset=function(y){i.d.r(y)},Xn.unstable_batchedUpdates=function(y,v){return y(v)},Xn.useFormState=function(y,v,E){return h.H.useFormState(y,v,E)},Xn.useFormStatus=function(){return h.H.useHostTransitionStatus()},Xn.version="19.2.0",Xn}var Yx;function ES(){if(Yx)return Hp.exports;Yx=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Hp.exports=wS(),Hp.exports}var Xx;function TS(){if(Xx)return Du;Xx=1;var s=_S(),e=Bg(),n=ES();function i(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function h(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function y(t){if(c(t)!==t)throw Error(i(188))}function v(t){var r=t.alternate;if(!r){if(r=c(t),r===null)throw Error(i(188));return r!==t?null:t}for(var a=t,l=r;;){var f=a.return;if(f===null)break;var p=f.alternate;if(p===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===a)return y(f),t;if(p===l)return y(f),r;p=p.sibling}throw Error(i(188))}if(a.return!==l.return)a=f,l=p;else{for(var _=!1,A=f.child;A;){if(A===a){_=!0,a=f,l=p;break}if(A===l){_=!0,l=f,a=p;break}A=A.sibling}if(!_){for(A=p.child;A;){if(A===a){_=!0,a=p,l=f;break}if(A===l){_=!0,l=p,a=f;break}A=A.sibling}if(!_)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:r}function E(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=E(t),r!==null)return r;t=t.sibling}return null}var S=Object.assign,I=Symbol.for("react.element"),q=Symbol.for("react.transitional.element"),W=Symbol.for("react.portal"),te=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),ue=Symbol.for("react.profiler"),fe=Symbol.for("react.consumer"),oe=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),ke=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function F(t){return t===null||typeof t!="object"?null:(t=P&&t[P]||t["@@iterator"],typeof t=="function"?t:null)}var G=Symbol.for("react.client.reference");function Fe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===G?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case te:return"Fragment";case ue:return"Profiler";case Y:return"StrictMode";case ke:return"Suspense";case Me:return"SuspenseList";case k:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case W:return"Portal";case oe:return t.displayName||"Context";case fe:return(t._context.displayName||"Context")+".Consumer";case _e:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case O:return r=t.displayName||null,r!==null?r:Fe(t.type)||"Memo";case D:r=t._payload,t=t._init;try{return Fe(t(r))}catch{}}return null}var Mt=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ne={pending:!1,data:null,method:null,action:null},Xe=[],at=-1;function U(t){return{current:t}}function B(t){0>at||(t.current=Xe[at],Xe[at]=null,at--)}function le(t,r){at++,Xe[at]=t.current,t.current=r}var he=U(null),ve=U(null),ye=U(null),Se=U(null);function Le(t,r){switch(le(ye,r),le(ve,t),le(he,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?dx(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=dx(r),t=hx(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}B(he),le(he,t)}function Ie(){B(he),B(ve),B(ye)}function Be(t){t.memoizedState!==null&&le(Se,t);var r=he.current,a=hx(r,t.type);r!==a&&(le(ve,t),le(he,a))}function At(t){ve.current===t&&(B(he),B(ve)),Se.current===t&&(B(Se),Au._currentValue=Ne)}var Yr,yr;function _n(t){if(Yr===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Yr=r&&r[1]||"",yr=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yr+t+yr}var Ia=!1;function qn(t,r){if(!t||Ia)return"";Ia=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Z){var X=Z}Reflect.construct(t,[],ie)}else{try{ie.call()}catch(Z){X=Z}t.call(ie.prototype)}}else{try{throw Error()}catch(Z){X=Z}(ie=t())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Z){if(Z&&X&&typeof Z.stack=="string")return[Z.stack,X.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),_=p[0],A=p[1];if(_&&A){var M=_.split(`
`),K=A.split(`
`);for(f=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;f<K.length&&!K[f].includes("DetermineComponentFrameRoot");)f++;if(l===M.length||f===K.length)for(l=M.length-1,f=K.length-1;1<=l&&0<=f&&M[l]!==K[f];)f--;for(;1<=l&&0<=f;l--,f--)if(M[l]!==K[f]){if(l!==1||f!==1)do if(l--,f--,0>f||M[l]!==K[f]){var ne=`
`+M[l].replace(" at new "," at ");return t.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",t.displayName)),ne}while(1<=l&&0<=f);break}}}finally{Ia=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?_n(a):""}function ja(t,r){switch(t.tag){case 26:case 27:case 5:return _n(t.type);case 16:return _n("Lazy");case 13:return t.child!==r&&r!==null?_n("Suspense Fallback"):_n("Suspense");case 19:return _n("SuspenseList");case 0:case 15:return qn(t.type,!1);case 11:return qn(t.type.render,!1);case 1:return qn(t.type,!0);case 31:return _n("Activity");default:return""}}function ps(t){try{var r="",a=null;do r+=ja(t,a),a=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var $t=Object.prototype.hasOwnProperty,jt=s.unstable_scheduleCallback,Os=s.unstable_cancelCallback,vt=s.unstable_shouldYield,wn=s.unstable_requestPaint,Pe=s.unstable_now,Xr=s.unstable_getCurrentPriorityLevel,Da=s.unstable_ImmediatePriority,Wr=s.unstable_UserBlockingPriority,de=s.unstable_NormalPriority,Rn=s.unstable_LowPriority,ct=s.unstable_IdlePriority,rr=s.log,$o=s.unstable_setDisableYieldValue,wt=null,Lt=null;function En(t){if(typeof rr=="function"&&$o(t),Lt&&typeof Lt.setStrictMode=="function")try{Lt.setStrictMode(wt,t)}catch{}}var lt=Math.clz32?Math.clz32:Ko,Qo=Math.log,Fn=Math.LN2;function Ko(t){return t>>>=0,t===0?32:31-(Qo(t)/Fn|0)|0}var br=256,Gs=262144,Qt=4194304;function Kt(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Jr(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var f=0,p=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var A=l&134217727;return A!==0?(l=A&~p,l!==0?f=Kt(l):(_&=A,_!==0?f=Kt(_):a||(a=A&~t,a!==0&&(f=Kt(a))))):(A=l&~p,A!==0?f=Kt(A):_!==0?f=Kt(_):a||(a=l&~t,a!==0&&(f=Kt(a)))),f===0?0:r!==0&&r!==f&&(r&p)===0&&(p=f&-f,a=r&-r,p>=a||p===32&&(a&4194048)!==0)?r:f}function In(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function ai(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $i(){var t=Qt;return Qt<<=1,(Qt&62914560)===0&&(Qt=4194304),t}function gt(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function oi(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Yo(t,r,a,l,f,p){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var A=t.entanglements,M=t.expirationTimes,K=t.hiddenUpdates;for(a=_&~a;0<a;){var ne=31-lt(a),ie=1<<ne;A[ne]=0,M[ne]=-1;var X=K[ne];if(X!==null)for(K[ne]=null,ne=0;ne<X.length;ne++){var Z=X[ne];Z!==null&&(Z.lane&=-536870913)}a&=~ie}l!==0&&Qi(t,l,0),p!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=p&~(_&~r))}function Qi(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-lt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Hn(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-lt(a),f=1<<l;f&r|t[l]&r&&(t[l]|=r),a&=~f}}function ka(t,r){var a=r&-r;return a=(a&42)!==0?1:Ms(a),(a&(t.suspendedLanes|r))!==0?0:a}function Ms(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ps(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Vs(){var t=ge.p;return t!==0?t:(t=window.event,t===void 0?32:Gx(t.type))}function vr(t,r){var a=ge.p;try{return ge.p=t,r()}finally{ge.p=a}}var xr=Math.random().toString(36).slice(2),Bt="__reactFiber$"+xr,on="__reactProps$"+xr,Zr="__reactContainer$"+xr,Ki="__reactEvents$"+xr,gs="__reactListeners$"+xr,Yi="__reactHandles$"+xr,Oa="__reactResources$"+xr,es="__reactMarker$"+xr;function Xi(t){delete t[Bt],delete t[on],delete t[Ki],delete t[gs],delete t[Yi]}function _r(t){var r=t[Bt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Zr]||a[Bt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=vx(t);t!==null;){if(a=t[Bt])return a;t=vx(t)}return r}t=a,a=t.parentNode}return null}function kn(t){if(t=t[Bt]||t[Zr]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function Zt(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(i(33))}function sr(t){var r=t[Oa];return r||(r=t[Oa]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Yt(t){t[es]=!0}var li=new Set,ci={};function wr(t,r){Er(t,r),Er(t+"Capture",r)}function Er(t,r){for(ci[t]=r,t=0;t<r.length;t++)li.add(r[t])}var Wi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ji={},Zi={};function Ga(t){return $t.call(Zi,t)?!0:$t.call(Ji,t)?!1:Wi.test(t)?Zi[t]=!0:(Ji[t]=!0,!1)}function ui(t,r,a){if(Ga(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function $e(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Dt(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}function Xt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function We(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function di(t,r,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,p=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,p.call(this,_)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function mt(t){if(!t._valueTracker){var r=We(t)?"checked":"value";t._valueTracker=di(t,r,""+t[r])}}function Us(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=We(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function ys(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var hi=/[\n"\\]/g;function On(t){return t.replace(hi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Tr(t,r,a,l,f,p,_,A){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),r!=null?_==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Xt(r)):t.value!==""+Xt(r)&&(t.value=""+Xt(r)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),r!=null?Ma(t,_,Xt(r)):a!=null?Ma(t,_,Xt(a)):l!=null&&t.removeAttribute("value"),f==null&&p!=null&&(t.defaultChecked=!!p),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+Xt(A):t.removeAttribute("name")}function Xo(t,r,a,l,f,p,_,A){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),r!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||r!=null)){mt(t);return}a=a!=null?""+Xt(a):"",r=r!=null?""+Xt(r):a,A||r===t.value||(t.value=r),t.defaultValue=r}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=A?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),mt(t)}function Ma(t,r,a){r==="number"&&ys(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function kt(t,r,a,l){if(t=t.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=r.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Xt(a),r=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function Wo(t,r,a){if(r!=null&&(r=""+Xt(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+Xt(a):""}function Ls(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(i(92));if(Mt(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=Xt(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),mt(t)}function Gn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var Bs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ir(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||Bs.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function ea(t,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&a[f]!==l&&ir(t,f,l)}else for(var p in r)r.hasOwnProperty(p)&&ir(t,p,r[p])}function bs(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function en(t){return zs.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Nr(){}var Sr=null;function ar(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qs=null,$n=null;function Pt(t){var r=kn(t);if(r&&(t=r.stateNode)){var a=t[on]||null;e:switch(t=r.stateNode,r.type){case"input":if(Tr(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+On(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var f=l[on]||null;if(!f)throw Error(i(90));Tr(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Us(l)}break e;case"textarea":Wo(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&kt(t,!!a.multiple,r,!1)}}}var fi=!1;function vs(t,r,a){if(fi)return t(r,a);fi=!0;try{var l=t(r);return l}finally{if(fi=!1,(qs!==null||$n!==null)&&(uh(),qs&&(r=qs,t=$n,$n=qs=null,Pt(r),t)))for(r=0;r<t.length;r++)Pt(t[r])}}function Ar(t,r){var a=t.stateNode;if(a===null)return null;var l=a[on]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ts=!1;if(tn)try{var ut={};Object.defineProperty(ut,"passive",{get:function(){ts=!0}}),window.addEventListener("test",ut,ut),window.removeEventListener("test",ut,ut)}catch{ts=!1}var ns=null,Pa=null,mi=null;function Va(){if(mi)return mi;var t,r=Pa,a=r.length,l,f="value"in ns?ns.value:ns.textContent,p=f.length;for(t=0;t<a&&r[t]===f[t];t++);var _=a-t;for(l=1;l<=_&&r[a-l]===f[p-l];l++);return mi=f.slice(t,1<l?1-l:void 0)}function Fs(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function zt(){return!0}function Qn(){return!1}function Tn(t){function r(a,l,f,p,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(a=t[A],this[A]=a?a(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?zt:Qn,this.isPropagationStopped=Qn,this}return S(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=zt)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=zt)},persist:function(){},isPersistent:zt}),r}var Cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xs=Tn(Cr),rs=S({},Cr,{view:0,detail:0}),Rr=Tn(rs),Ir,ta,ss,je=S({},rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ws,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ss&&(ss&&t.type==="mousemove"?(Ir=t.screenX-ss.screenX,ta=t.screenY-ss.screenY):ta=Ir=0,ss=t),Ir)},movementY:function(t){return"movementY"in t?t.movementY:ta}}),Ua=Tn(je),pi=S({},je,{dataTransfer:0}),Zo=Tn(pi),el=S({},rs,{relatedTarget:0}),gi=Tn(el),La=S({},Cr,{animationName:0,elapsedTime:0,pseudoElement:0}),tl=Tn(La),na=S({},Cr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yi=Tn(na),ra=S({},Cr,{data:0}),Kn=Tn(ra),Ba={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_s={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},za={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bi(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=za[t])?!!r[t]:!1}function ws(){return bi}var dt=S({},rs,{key:function(t){if(t.key){var r=Ba[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Fs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_s[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ws,charCode:function(t){return t.type==="keypress"?Fs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Hs=Tn(dt),Pl=S({},je,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jr=Tn(Pl),d=S({},rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ws}),b=Tn(d),w=S({},Cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=Tn(w),$=S({},je,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),J=Tn($),me=S({},Cr,{newState:0,oldState:0}),Ve=Tn(me),qt=[9,13,27,32],He=tn&&"CompositionEvent"in window,Ct=null;tn&&"documentMode"in document&&(Ct=document.documentMode);var Nn=tn&&"TextEvent"in window&&!Ct,is=tn&&(!He||Ct&&8<Ct&&11>=Ct),Dr=" ",or=!1;function Mn(t,r){switch(t){case"keyup":return qt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vi(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var sa=!1;function Ed(t,r){switch(t){case"compositionend":return vi(r);case"keypress":return r.which!==32?null:(or=!0,Dr);case"textInput":return t=r.data,t===Dr&&or?null:t;default:return null}}function Td(t,r){if(sa)return t==="compositionend"||!He&&Mn(t,r)?(t=Va(),mi=Pa=ns=null,sa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return is&&r.locale!=="ko"?null:r.data;default:return null}}var cm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xi(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!cm[t.type]:r==="textarea"}function $s(t,r,a,l){qs?$n?$n.push(l):$n=[l]:qs=l,r=yh(r,"onChange"),0<r.length&&(a=new xs("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var nl=null,ia=null;function Vl(t){ix(t,0)}function aa(t){var r=Zt(t);if(Us(r))return t}function rl(t,r){if(t==="change")return r}var lr=!1;if(tn){var hn;if(tn){var sl="oninput"in document;if(!sl){var Ul=document.createElement("div");Ul.setAttribute("oninput","return;"),sl=typeof Ul.oninput=="function"}hn=sl}else hn=!1;lr=hn&&(!document.documentMode||9<document.documentMode)}function Ll(){nl&&(nl.detachEvent("onpropertychange",Bl),ia=nl=null)}function Bl(t){if(t.propertyName==="value"&&aa(ia)){var r=[];$s(r,ia,t,ar(t)),vs(Vl,r)}}function Hc(t,r,a){t==="focusin"?(Ll(),nl=r,ia=a,nl.attachEvent("onpropertychange",Bl)):t==="focusout"&&Ll()}function oa(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return aa(ia)}function qa(t,r){if(t==="click")return aa(r)}function um(t,r){if(t==="input"||t==="change")return aa(r)}function $c(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Yn=typeof Object.is=="function"?Object.is:$c;function Pn(t,r){if(Yn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!$t.call(r,f)||!Yn(t[f],r[f]))return!1}return!0}function Fa(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Nd(t,r){var a=Fa(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Fa(a)}}function _i(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?_i(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Ha(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=ys(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=ys(t.document)}return r}function il(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var Qc=tn&&"documentMode"in document&&11>=document.documentMode,Qs=null,Es=null,wi=null,$a=!1;function Sd(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;$a||Qs==null||Qs!==ys(l)||(l=Qs,"selectionStart"in l&&il(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),wi&&Pn(wi,l)||(wi=l,l=yh(Es,"onSelect"),0<l.length&&(r=new xs("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=Qs)))}function Ei(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Qa={animationend:Ei("Animation","AnimationEnd"),animationiteration:Ei("Animation","AnimationIteration"),animationstart:Ei("Animation","AnimationStart"),transitionrun:Ei("Transition","TransitionRun"),transitionstart:Ei("Transition","TransitionStart"),transitioncancel:Ei("Transition","TransitionCancel"),transitionend:Ei("Transition","TransitionEnd")},Kc={},Ti={};tn&&(Ti=document.createElement("div").style,"AnimationEvent"in window||(delete Qa.animationend.animation,delete Qa.animationiteration.animation,delete Qa.animationstart.animation),"TransitionEvent"in window||delete Qa.transitionend.transition);function cr(t){if(Kc[t])return Kc[t];if(!Qa[t])return t;var r=Qa[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Ti)return Kc[t]=r[a];return t}var Ad=cr("animationend"),Cd=cr("animationiteration"),Rd=cr("animationstart"),dm=cr("transitionrun"),hm=cr("transitionstart"),Id=cr("transitioncancel"),jd=cr("transitionend"),Dd=new Map,Yc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yc.push("scrollEnd");function kr(t,r){Dd.set(t,r),wr(r,[t])}var zl=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Or=[],Ka=0,Ya=0;function ql(){for(var t=Ka,r=Ya=Ka=0;r<t;){var a=Or[r];Or[r++]=null;var l=Or[r];Or[r++]=null;var f=Or[r];Or[r++]=null;var p=Or[r];if(Or[r++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}p!==0&&Wc(a,f,p)}}function Fl(t,r,a,l){Or[Ka++]=t,Or[Ka++]=r,Or[Ka++]=a,Or[Ka++]=l,Ya|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Xc(t,r,a,l){return Fl(t,r,a,l),Hl(t)}function Ni(t,r){return Fl(t,null,null,r),Hl(t)}function Wc(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var f=!1,p=t.return;p!==null;)p.childLanes|=a,l=p.alternate,l!==null&&(l.childLanes|=a),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(f=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,f&&r!==null&&(f=31-lt(a),t=p.hiddenUpdates,l=t[f],l===null?t[f]=[r]:l.push(r),r.lane=a|536870912),p):null}function Hl(t){if(50<xu)throw xu=0,up=null,Error(i(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Xa={};function al(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ur(t,r,a,l){return new al(t,r,a,l)}function Jc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ts(t,r){var a=t.alternate;return a===null?(a=ur(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Zc(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function $l(t,r,a,l,f,p){var _=0;if(l=t,typeof t=="function")Jc(t)&&(_=1);else if(typeof t=="string")_=iS(t,a,he.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case k:return t=ur(31,a,r,f),t.elementType=k,t.lanes=p,t;case te:return Ks(a.children,f,p,r);case Y:_=8,f|=24;break;case ue:return t=ur(12,a,r,f|2),t.elementType=ue,t.lanes=p,t;case ke:return t=ur(13,a,r,f),t.elementType=ke,t.lanes=p,t;case Me:return t=ur(19,a,r,f),t.elementType=Me,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case oe:_=10;break e;case fe:_=9;break e;case _e:_=11;break e;case O:_=14;break e;case D:_=16,l=null;break e}_=29,a=Error(i(130,t===null?"null":typeof t,"")),l=null}return r=ur(_,a,r,f),r.elementType=t,r.type=l,r.lanes=p,r}function Ks(t,r,a,l){return t=ur(7,t,l,r),t.lanes=a,t}function Ql(t,r,a){return t=ur(6,t,null,r),t.lanes=a,t}function kd(t){var r=ur(18,null,null,0);return r.stateNode=t,r}function eu(t,r,a){return r=ur(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Od=new WeakMap;function Gr(t,r){if(typeof t=="object"&&t!==null){var a=Od.get(t);return a!==void 0?a:(r={value:t,source:r,stack:ps(r)},Od.set(t,r),r)}return{value:t,source:r,stack:ps(r)}}var Wa=[],Ja=0,ol=null,ll=0,Mr=[],Pr=0,Si=null,as=1,Ns="";function Ys(t,r){Wa[Ja++]=ll,Wa[Ja++]=ol,ol=t,ll=r}function Gd(t,r,a){Mr[Pr++]=as,Mr[Pr++]=Ns,Mr[Pr++]=Si,Si=t;var l=as;t=Ns;var f=32-lt(l)-1;l&=~(1<<f),a+=1;var p=32-lt(r)+f;if(30<p){var _=f-f%5;p=(l&(1<<_)-1).toString(32),l>>=_,f-=_,as=1<<32-lt(r)+f|a<<f|l,Ns=p+t}else as=1<<p|a<<f|l,Ns=t}function cl(t){t.return!==null&&(Ys(t,1),Gd(t,1,0))}function ul(t){for(;t===ol;)ol=Wa[--Ja],Wa[Ja]=null,ll=Wa[--Ja],Wa[Ja]=null;for(;t===Si;)Si=Mr[--Pr],Mr[Pr]=null,Ns=Mr[--Pr],Mr[Pr]=null,as=Mr[--Pr],Mr[Pr]=null}function Md(t,r){Mr[Pr++]=as,Mr[Pr++]=Ns,Mr[Pr++]=Si,as=r.id,Ns=r.overflow,Si=t}var Sn=null,Rt=null,Je=!1,Ai=null,Vr=!1,Kl=Error(i(519));function Xs(t){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw dl(Gr(r,t)),Kl}function tu(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[Bt]=t,r[on]=l,a){case"dialog":et("cancel",r),et("close",r);break;case"iframe":case"object":case"embed":et("load",r);break;case"video":case"audio":for(a=0;a<wu.length;a++)et(wu[a],r);break;case"source":et("error",r);break;case"img":case"image":case"link":et("error",r),et("load",r);break;case"details":et("toggle",r);break;case"input":et("invalid",r),Xo(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":et("invalid",r);break;case"textarea":et("invalid",r),Ls(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||cx(r.textContent,a)?(l.popover!=null&&(et("beforetoggle",r),et("toggle",r)),l.onScroll!=null&&et("scroll",r),l.onScrollEnd!=null&&et("scrollend",r),l.onClick!=null&&(r.onclick=Nr),r=!0):r=!1,r||Xs(t,!0)}function Pd(t){for(Sn=t.return;Sn;)switch(Sn.tag){case 5:case 31:case 13:Vr=!1;return;case 27:case 3:Vr=!0;return;default:Sn=Sn.return}}function Ss(t){if(t!==Sn)return!1;if(!Je)return Pd(t),Je=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Np(t.type,t.memoizedProps)),a=!a),a&&Rt&&Xs(t),Pd(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Rt=bx(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Rt=bx(t)}else r===27?(r=Rt,mo(t.type)?(t=Ip,Ip=null,Rt=t):Rt=r):Rt=Sn?Cs(t.stateNode.nextSibling):null;return!0}function Ci(){Rt=Sn=null,Je=!1}function nu(){var t=Ai;return t!==null&&(zr===null?zr=t:zr.push.apply(zr,t),Ai=null),t}function dl(t){Ai===null?Ai=[t]:Ai.push(t)}var Za=U(null),Ri=null,dr=null;function Ii(t,r,a){le(Za,r._currentValue),r._currentValue=a}function Ws(t){t._currentValue=Za.current,B(Za)}function hr(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function hl(t,r,a,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var p=f.dependencies;if(p!==null){var _=f.child;p=p.firstContext;e:for(;p!==null;){var A=p;p=f;for(var M=0;M<r.length;M++)if(A.context===r[M]){p.lanes|=a,A=p.alternate,A!==null&&(A.lanes|=a),hr(p.return,a,t),l||(_=null);break e}p=A.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(i(341));_.lanes|=a,p=_.alternate,p!==null&&(p.lanes|=a),hr(_,a,t),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===t){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function eo(t,r,a,l){t=null;for(var f=r,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var A=f.type;Yn(f.pendingProps.value,_.value)||(t!==null?t.push(A):t=[A])}}else if(f===Se.current){if(_=f.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Au):t=[Au])}f=f.return}t!==null&&hl(r,t,a,l),r.flags|=262144}function Js(t){for(t=t.firstContext;t!==null;){if(!Yn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ji(t){Ri=t,dr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function fn(t){return x(Ri,t)}function m(t,r){return Ri===null&&ji(t),x(t,r)}function x(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},dr===null){if(t===null)throw Error(i(308));dr=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else dr=dr.next=r;return a}var T=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},N=s.unstable_scheduleCallback,j=s.unstable_NormalPriority,V={$$typeof:oe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ae(){return{controller:new T,data:new Map,refCount:0}}function pe(t){t.refCount--,t.refCount===0&&N(j,function(){t.controller.abort()})}var Ee=null,Ke=0,mn=0,fr=null;function fm(t,r){if(Ee===null){var a=Ee=[];Ke=0,mn=gp(),fr={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Ke++,r.then(Yy,Yy),r}function Yy(){if(--Ke===0&&Ee!==null){fr!==null&&(fr.status="fulfilled");var t=Ee;Ee=null,mn=0,fr=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function iN(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Xy=ee.S;ee.S=function(t,r){kv=Pe(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&fm(t,r),Xy!==null&&Xy(t,r)};var fl=U(null);function mm(){var t=fl.current;return t!==null?t:It.pooledCache}function Vd(t,r){r===null?le(fl,fl.current):le(fl,r.pool)}function Wy(){var t=mm();return t===null?null:{parent:V._currentValue,pool:t}}var Yl=Error(i(460)),pm=Error(i(474)),Ud=Error(i(542)),Ld={then:function(){}};function Jy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Zy(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(Nr,Nr),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,tb(t),t;default:if(typeof r.status=="string")r.then(Nr,Nr);else{if(t=It,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,tb(t),t}throw pl=r,Yl}}function ml(t){try{var r=t._init;return r(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(pl=a,Yl):a}}var pl=null;function eb(){if(pl===null)throw Error(i(459));var t=pl;return pl=null,t}function tb(t){if(t===Yl||t===Ud)throw Error(i(483))}var Xl=null,ru=0;function Bd(t){var r=ru;return ru+=1,Xl===null&&(Xl=[]),Zy(Xl,t,r)}function su(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function zd(t,r){throw r.$$typeof===I?Error(i(525)):(t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function nb(t){function r(H,L){if(t){var Q=H.deletions;Q===null?(H.deletions=[L],H.flags|=16):Q.push(L)}}function a(H,L){if(!t)return null;for(;L!==null;)r(H,L),L=L.sibling;return null}function l(H){for(var L=new Map;H!==null;)H.key!==null?L.set(H.key,H):L.set(H.index,H),H=H.sibling;return L}function f(H,L){return H=Ts(H,L),H.index=0,H.sibling=null,H}function p(H,L,Q){return H.index=Q,t?(Q=H.alternate,Q!==null?(Q=Q.index,Q<L?(H.flags|=67108866,L):Q):(H.flags|=67108866,L)):(H.flags|=1048576,L)}function _(H){return t&&H.alternate===null&&(H.flags|=67108866),H}function A(H,L,Q,re){return L===null||L.tag!==6?(L=Ql(Q,H.mode,re),L.return=H,L):(L=f(L,Q),L.return=H,L)}function M(H,L,Q,re){var Ce=Q.type;return Ce===te?ne(H,L,Q.props.children,re,Q.key):L!==null&&(L.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===D&&ml(Ce)===L.type)?(L=f(L,Q.props),su(L,Q),L.return=H,L):(L=$l(Q.type,Q.key,Q.props,null,H.mode,re),su(L,Q),L.return=H,L)}function K(H,L,Q,re){return L===null||L.tag!==4||L.stateNode.containerInfo!==Q.containerInfo||L.stateNode.implementation!==Q.implementation?(L=eu(Q,H.mode,re),L.return=H,L):(L=f(L,Q.children||[]),L.return=H,L)}function ne(H,L,Q,re,Ce){return L===null||L.tag!==7?(L=Ks(Q,H.mode,re,Ce),L.return=H,L):(L=f(L,Q),L.return=H,L)}function ie(H,L,Q){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Ql(""+L,H.mode,Q),L.return=H,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case q:return Q=$l(L.type,L.key,L.props,null,H.mode,Q),su(Q,L),Q.return=H,Q;case W:return L=eu(L,H.mode,Q),L.return=H,L;case D:return L=ml(L),ie(H,L,Q)}if(Mt(L)||F(L))return L=Ks(L,H.mode,Q,null),L.return=H,L;if(typeof L.then=="function")return ie(H,Bd(L),Q);if(L.$$typeof===oe)return ie(H,m(H,L),Q);zd(H,L)}return null}function X(H,L,Q,re){var Ce=L!==null?L.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Ce!==null?null:A(H,L,""+Q,re);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case q:return Q.key===Ce?M(H,L,Q,re):null;case W:return Q.key===Ce?K(H,L,Q,re):null;case D:return Q=ml(Q),X(H,L,Q,re)}if(Mt(Q)||F(Q))return Ce!==null?null:ne(H,L,Q,re,null);if(typeof Q.then=="function")return X(H,L,Bd(Q),re);if(Q.$$typeof===oe)return X(H,L,m(H,Q),re);zd(H,Q)}return null}function Z(H,L,Q,re,Ce){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return H=H.get(Q)||null,A(L,H,""+re,Ce);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case q:return H=H.get(re.key===null?Q:re.key)||null,M(L,H,re,Ce);case W:return H=H.get(re.key===null?Q:re.key)||null,K(L,H,re,Ce);case D:return re=ml(re),Z(H,L,Q,re,Ce)}if(Mt(re)||F(re))return H=H.get(Q)||null,ne(L,H,re,Ce,null);if(typeof re.then=="function")return Z(H,L,Q,Bd(re),Ce);if(re.$$typeof===oe)return Z(H,L,Q,m(L,re),Ce);zd(L,re)}return null}function we(H,L,Q,re){for(var Ce=null,ht=null,Te=L,Ye=L=0,nt=null;Te!==null&&Ye<Q.length;Ye++){Te.index>Ye?(nt=Te,Te=null):nt=Te.sibling;var ft=X(H,Te,Q[Ye],re);if(ft===null){Te===null&&(Te=nt);break}t&&Te&&ft.alternate===null&&r(H,Te),L=p(ft,L,Ye),ht===null?Ce=ft:ht.sibling=ft,ht=ft,Te=nt}if(Ye===Q.length)return a(H,Te),Je&&Ys(H,Ye),Ce;if(Te===null){for(;Ye<Q.length;Ye++)Te=ie(H,Q[Ye],re),Te!==null&&(L=p(Te,L,Ye),ht===null?Ce=Te:ht.sibling=Te,ht=Te);return Je&&Ys(H,Ye),Ce}for(Te=l(Te);Ye<Q.length;Ye++)nt=Z(Te,H,Ye,Q[Ye],re),nt!==null&&(t&&nt.alternate!==null&&Te.delete(nt.key===null?Ye:nt.key),L=p(nt,L,Ye),ht===null?Ce=nt:ht.sibling=nt,ht=nt);return t&&Te.forEach(function(vo){return r(H,vo)}),Je&&Ys(H,Ye),Ce}function De(H,L,Q,re){if(Q==null)throw Error(i(151));for(var Ce=null,ht=null,Te=L,Ye=L=0,nt=null,ft=Q.next();Te!==null&&!ft.done;Ye++,ft=Q.next()){Te.index>Ye?(nt=Te,Te=null):nt=Te.sibling;var vo=X(H,Te,ft.value,re);if(vo===null){Te===null&&(Te=nt);break}t&&Te&&vo.alternate===null&&r(H,Te),L=p(vo,L,Ye),ht===null?Ce=vo:ht.sibling=vo,ht=vo,Te=nt}if(ft.done)return a(H,Te),Je&&Ys(H,Ye),Ce;if(Te===null){for(;!ft.done;Ye++,ft=Q.next())ft=ie(H,ft.value,re),ft!==null&&(L=p(ft,L,Ye),ht===null?Ce=ft:ht.sibling=ft,ht=ft);return Je&&Ys(H,Ye),Ce}for(Te=l(Te);!ft.done;Ye++,ft=Q.next())ft=Z(Te,H,Ye,ft.value,re),ft!==null&&(t&&ft.alternate!==null&&Te.delete(ft.key===null?Ye:ft.key),L=p(ft,L,Ye),ht===null?Ce=ft:ht.sibling=ft,ht=ft);return t&&Te.forEach(function(gS){return r(H,gS)}),Je&&Ys(H,Ye),Ce}function Nt(H,L,Q,re){if(typeof Q=="object"&&Q!==null&&Q.type===te&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case q:e:{for(var Ce=Q.key;L!==null;){if(L.key===Ce){if(Ce=Q.type,Ce===te){if(L.tag===7){a(H,L.sibling),re=f(L,Q.props.children),re.return=H,H=re;break e}}else if(L.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===D&&ml(Ce)===L.type){a(H,L.sibling),re=f(L,Q.props),su(re,Q),re.return=H,H=re;break e}a(H,L);break}else r(H,L);L=L.sibling}Q.type===te?(re=Ks(Q.props.children,H.mode,re,Q.key),re.return=H,H=re):(re=$l(Q.type,Q.key,Q.props,null,H.mode,re),su(re,Q),re.return=H,H=re)}return _(H);case W:e:{for(Ce=Q.key;L!==null;){if(L.key===Ce)if(L.tag===4&&L.stateNode.containerInfo===Q.containerInfo&&L.stateNode.implementation===Q.implementation){a(H,L.sibling),re=f(L,Q.children||[]),re.return=H,H=re;break e}else{a(H,L);break}else r(H,L);L=L.sibling}re=eu(Q,H.mode,re),re.return=H,H=re}return _(H);case D:return Q=ml(Q),Nt(H,L,Q,re)}if(Mt(Q))return we(H,L,Q,re);if(F(Q)){if(Ce=F(Q),typeof Ce!="function")throw Error(i(150));return Q=Ce.call(Q),De(H,L,Q,re)}if(typeof Q.then=="function")return Nt(H,L,Bd(Q),re);if(Q.$$typeof===oe)return Nt(H,L,m(H,Q),re);zd(H,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,L!==null&&L.tag===6?(a(H,L.sibling),re=f(L,Q),re.return=H,H=re):(a(H,L),re=Ql(Q,H.mode,re),re.return=H,H=re),_(H)):a(H,L)}return function(H,L,Q,re){try{ru=0;var Ce=Nt(H,L,Q,re);return Xl=null,Ce}catch(Te){if(Te===Yl||Te===Ud)throw Te;var ht=ur(29,Te,null,H.mode);return ht.lanes=re,ht.return=H,ht}finally{}}}var gl=nb(!0),rb=nb(!1),to=!1;function gm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ym(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function no(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ro(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(pt&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=Hl(t),Wc(t,null,a),r}return Fl(t,l,r,a),Hl(t)}function iu(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Hn(t,a)}}function bm(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?f=p=_:p=p.next=_,a=a.next}while(a!==null);p===null?f=p=r:p=p.next=r}else f=p=r;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var vm=!1;function au(){if(vm){var t=fr;if(t!==null)throw t}}function ou(t,r,a,l){vm=!1;var f=t.updateQueue;to=!1;var p=f.firstBaseUpdate,_=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var M=A,K=M.next;M.next=null,_===null?p=K:_.next=K,_=M;var ne=t.alternate;ne!==null&&(ne=ne.updateQueue,A=ne.lastBaseUpdate,A!==_&&(A===null?ne.firstBaseUpdate=K:A.next=K,ne.lastBaseUpdate=M))}if(p!==null){var ie=f.baseState;_=0,ne=K=M=null,A=p;do{var X=A.lane&-536870913,Z=X!==A.lane;if(Z?(tt&X)===X:(l&X)===X){X!==0&&X===mn&&(vm=!0),ne!==null&&(ne=ne.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var we=t,De=A;X=r;var Nt=a;switch(De.tag){case 1:if(we=De.payload,typeof we=="function"){ie=we.call(Nt,ie,X);break e}ie=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=De.payload,X=typeof we=="function"?we.call(Nt,ie,X):we,X==null)break e;ie=S({},ie,X);break e;case 2:to=!0}}X=A.callback,X!==null&&(t.flags|=64,Z&&(t.flags|=8192),Z=f.callbacks,Z===null?f.callbacks=[X]:Z.push(X))}else Z={lane:X,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ne===null?(K=ne=Z,M=ie):ne=ne.next=Z,_|=X;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;Z=A,A=Z.next,Z.next=null,f.lastBaseUpdate=Z,f.shared.pending=null}}while(!0);ne===null&&(M=ie),f.baseState=M,f.firstBaseUpdate=K,f.lastBaseUpdate=ne,p===null&&(f.shared.lanes=0),lo|=_,t.lanes=_,t.memoizedState=ie}}function sb(t,r){if(typeof t!="function")throw Error(i(191,t));t.call(r)}function ib(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)sb(a[t],r)}var Wl=U(null),qd=U(0);function ab(t,r){t=ga,le(qd,t),le(Wl,r),ga=t|r.baseLanes}function xm(){le(qd,ga),le(Wl,Wl.current)}function _m(){ga=qd.current,B(Wl),B(qd)}var os=U(null),As=null;function so(t){var r=t.alternate;le(ln,ln.current&1),le(os,t),As===null&&(r===null||Wl.current!==null||r.memoizedState!==null)&&(As=t)}function wm(t){le(ln,ln.current),le(os,t),As===null&&(As=t)}function ob(t){t.tag===22?(le(ln,ln.current),le(os,t),As===null&&(As=t)):io()}function io(){le(ln,ln.current),le(os,os.current)}function ls(t){B(os),As===t&&(As=null),B(ln)}var ln=U(0);function Fd(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Cp(a)||Rp(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var la=0,Qe=null,Et=null,pn=null,Hd=!1,Jl=!1,yl=!1,$d=0,lu=0,Zl=null,aN=0;function nn(){throw Error(i(321))}function Em(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Yn(t[a],r[a]))return!1;return!0}function Tm(t,r,a,l,f,p){return la=p,Qe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ee.H=t===null||t.memoizedState===null?Fb:Um,yl=!1,p=a(l,f),yl=!1,Jl&&(p=cb(r,a,l,f)),lb(t),p}function lb(t){ee.H=du;var r=Et!==null&&Et.next!==null;if(la=0,pn=Et=Qe=null,Hd=!1,lu=0,Zl=null,r)throw Error(i(300));t===null||gn||(t=t.dependencies,t!==null&&Js(t)&&(gn=!0))}function cb(t,r,a,l){Qe=t;var f=0;do{if(Jl&&(Zl=null),lu=0,Jl=!1,25<=f)throw Error(i(301));if(f+=1,pn=Et=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}ee.H=Hb,p=r(a,l)}while(Jl);return p}function oN(){var t=ee.H,r=t.useState()[0];return r=typeof r.then=="function"?cu(r):r,t=t.useState()[0],(Et!==null?Et.memoizedState:null)!==t&&(Qe.flags|=1024),r}function Nm(){var t=$d!==0;return $d=0,t}function Sm(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function Am(t){if(Hd){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Hd=!1}la=0,pn=Et=Qe=null,Jl=!1,lu=$d=0,Zl=null}function mr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?Qe.memoizedState=pn=t:pn=pn.next=t,pn}function cn(){if(Et===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=Et.next;var r=pn===null?Qe.memoizedState:pn.next;if(r!==null)pn=r,Et=t;else{if(t===null)throw Qe.alternate===null?Error(i(467)):Error(i(310));Et=t,t={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},pn===null?Qe.memoizedState=pn=t:pn=pn.next=t}return pn}function Qd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cu(t){var r=lu;return lu+=1,Zl===null&&(Zl=[]),t=Zy(Zl,t,r),r=Qe,(pn===null?r.memoizedState:pn.next)===null&&(r=r.alternate,ee.H=r===null||r.memoizedState===null?Fb:Um),t}function Kd(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return cu(t);if(t.$$typeof===oe)return fn(t)}throw Error(i(438,String(t)))}function Cm(t){var r=null,a=Qe.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Qe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Qd(),Qe.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=z;return r.index++,a}function ca(t,r){return typeof r=="function"?r(t):r}function Yd(t){var r=cn();return Rm(r,Et,t)}function Rm(t,r,a){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var f=t.baseQueue,p=l.pending;if(p!==null){if(f!==null){var _=f.next;f.next=p.next,p.next=_}r.baseQueue=f=p,l.pending=null}if(p=t.baseState,f===null)t.memoizedState=p;else{r=f.next;var A=_=null,M=null,K=r,ne=!1;do{var ie=K.lane&-536870913;if(ie!==K.lane?(tt&ie)===ie:(la&ie)===ie){var X=K.revertLane;if(X===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ie===mn&&(ne=!0);else if((la&X)===X){K=K.next,X===mn&&(ne=!0);continue}else ie={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},M===null?(A=M=ie,_=p):M=M.next=ie,Qe.lanes|=X,lo|=X;ie=K.action,yl&&a(p,ie),p=K.hasEagerState?K.eagerState:a(p,ie)}else X={lane:ie,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},M===null?(A=M=X,_=p):M=M.next=X,Qe.lanes|=ie,lo|=ie;K=K.next}while(K!==null&&K!==r);if(M===null?_=p:M.next=A,!Yn(p,t.memoizedState)&&(gn=!0,ne&&(a=fr,a!==null)))throw a;t.memoizedState=p,t.baseState=_,t.baseQueue=M,l.lastRenderedState=p}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Im(t){var r=cn(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var l=a.dispatch,f=a.pending,p=r.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do p=t(p,_.action),_=_.next;while(_!==f);Yn(p,r.memoizedState)||(gn=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),a.lastRenderedState=p}return[p,l]}function ub(t,r,a){var l=Qe,f=cn(),p=Je;if(p){if(a===void 0)throw Error(i(407));a=a()}else a=r();var _=!Yn((Et||f).memoizedState,a);if(_&&(f.memoizedState=a,gn=!0),f=f.queue,km(fb.bind(null,l,f,t),[t]),f.getSnapshot!==r||_||pn!==null&&pn.memoizedState.tag&1){if(l.flags|=2048,ec(9,{destroy:void 0},hb.bind(null,l,f,a,r),null),It===null)throw Error(i(349));p||(la&127)!==0||db(l,r,a)}return a}function db(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Qe.updateQueue,r===null?(r=Qd(),Qe.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function hb(t,r,a,l){r.value=a,r.getSnapshot=l,mb(r)&&pb(t)}function fb(t,r,a){return a(function(){mb(r)&&pb(t)})}function mb(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Yn(t,a)}catch{return!0}}function pb(t){var r=Ni(t,2);r!==null&&qr(r,t,2)}function jm(t){var r=mr();if(typeof t=="function"){var a=t;if(t=a(),yl){En(!0);try{a()}finally{En(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:t},r}function gb(t,r,a,l){return t.baseState=a,Rm(t,Et,typeof l=="function"?l:ca)}function lN(t,r,a,l,f){if(Jd(t))throw Error(i(485));if(t=r.action,t!==null){var p={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){p.listeners.push(_)}};ee.T!==null?a(!0):p.isTransition=!1,l(p),a=r.pending,a===null?(p.next=r.pending=p,yb(r,p)):(p.next=a.next,r.pending=a.next=p)}}function yb(t,r){var a=r.action,l=r.payload,f=t.state;if(r.isTransition){var p=ee.T,_={};ee.T=_;try{var A=a(f,l),M=ee.S;M!==null&&M(_,A),bb(t,r,A)}catch(K){Dm(t,r,K)}finally{p!==null&&_.types!==null&&(p.types=_.types),ee.T=p}}else try{p=a(f,l),bb(t,r,p)}catch(K){Dm(t,r,K)}}function bb(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){vb(t,r,l)},function(l){return Dm(t,r,l)}):vb(t,r,a)}function vb(t,r,a){r.status="fulfilled",r.value=a,xb(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,yb(t,a)))}function Dm(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,xb(r),r=r.next;while(r!==l)}t.action=null}function xb(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function _b(t,r){return r}function wb(t,r){if(Je){var a=It.formState;if(a!==null){e:{var l=Qe;if(Je){if(Rt){t:{for(var f=Rt,p=Vr;f.nodeType!==8;){if(!p){f=null;break t}if(f=Cs(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Rt=Cs(f.nextSibling),l=f.data==="F!";break e}}Xs(l)}l=!1}l&&(r=a[0])}}return a=mr(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_b,lastRenderedState:r},a.queue=l,a=Bb.bind(null,Qe,l),l.dispatch=a,l=jm(!1),p=Vm.bind(null,Qe,!1,l.queue),l=mr(),f={state:r,dispatch:null,action:t,pending:null},l.queue=f,a=lN.bind(null,Qe,f,p,a),f.dispatch=a,l.memoizedState=t,[r,a,!1]}function Eb(t){var r=cn();return Tb(r,Et,t)}function Tb(t,r,a){if(r=Rm(t,r,_b)[0],t=Yd(ca)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=cu(r)}catch(_){throw _===Yl?Ud:_}else l=r;r=cn();var f=r.queue,p=f.dispatch;return a!==r.memoizedState&&(Qe.flags|=2048,ec(9,{destroy:void 0},cN.bind(null,f,a),null)),[l,p,t]}function cN(t,r){t.action=r}function Nb(t){var r=cn(),a=Et;if(a!==null)return Tb(r,a,t);cn(),r=r.memoizedState,a=cn();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function ec(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Qe.updateQueue,r===null&&(r=Qd(),Qe.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function Sb(){return cn().memoizedState}function Xd(t,r,a,l){var f=mr();Qe.flags|=t,f.memoizedState=ec(1|r,{destroy:void 0},a,l===void 0?null:l)}function Wd(t,r,a,l){var f=cn();l=l===void 0?null:l;var p=f.memoizedState.inst;Et!==null&&l!==null&&Em(l,Et.memoizedState.deps)?f.memoizedState=ec(r,p,a,l):(Qe.flags|=t,f.memoizedState=ec(1|r,p,a,l))}function Ab(t,r){Xd(8390656,8,t,r)}function km(t,r){Wd(2048,8,t,r)}function uN(t){Qe.flags|=4;var r=Qe.updateQueue;if(r===null)r=Qd(),Qe.updateQueue=r,r.events=[t];else{var a=r.events;a===null?r.events=[t]:a.push(t)}}function Cb(t){var r=cn().memoizedState;return uN({ref:r,nextImpl:t}),function(){if((pt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Rb(t,r){return Wd(4,2,t,r)}function Ib(t,r){return Wd(4,4,t,r)}function jb(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Db(t,r,a){a=a!=null?a.concat([t]):null,Wd(4,4,jb.bind(null,r,t),a)}function Om(){}function kb(t,r){var a=cn();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Em(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Ob(t,r){var a=cn();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Em(r,l[1]))return l[0];if(l=t(),yl){En(!0);try{t()}finally{En(!1)}}return a.memoizedState=[l,r],l}function Gm(t,r,a){return a===void 0||(la&1073741824)!==0&&(tt&261930)===0?t.memoizedState=r:(t.memoizedState=a,t=Gv(),Qe.lanes|=t,lo|=t,a)}function Gb(t,r,a,l){return Yn(a,r)?a:Wl.current!==null?(t=Gm(t,a,l),Yn(t,r)||(gn=!0),t):(la&42)===0||(la&1073741824)!==0&&(tt&261930)===0?(gn=!0,t.memoizedState=a):(t=Gv(),Qe.lanes|=t,lo|=t,r)}function Mb(t,r,a,l,f){var p=ge.p;ge.p=p!==0&&8>p?p:8;var _=ee.T,A={};ee.T=A,Vm(t,!1,r,a);try{var M=f(),K=ee.S;if(K!==null&&K(A,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var ne=iN(M,l);uu(t,r,ne,ds(t))}else uu(t,r,l,ds(t))}catch(ie){uu(t,r,{then:function(){},status:"rejected",reason:ie},ds())}finally{ge.p=p,_!==null&&A.types!==null&&(_.types=A.types),ee.T=_}}function dN(){}function Mm(t,r,a,l){if(t.tag!==5)throw Error(i(476));var f=Pb(t).queue;Mb(t,f,r,Ne,a===null?dN:function(){return Vb(t),a(l)})}function Pb(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:Ne,baseState:Ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:Ne},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Vb(t){var r=Pb(t);r.next===null&&(r=t.alternate.memoizedState),uu(t,r.next.queue,{},ds())}function Pm(){return fn(Au)}function Ub(){return cn().memoizedState}function Lb(){return cn().memoizedState}function hN(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=ds();t=no(a);var l=ro(r,t,a);l!==null&&(qr(l,r,a),iu(l,r,a)),r={cache:ae()},t.payload=r;return}r=r.return}}function fN(t,r,a){var l=ds();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Jd(t)?zb(r,a):(a=Xc(t,r,a,l),a!==null&&(qr(a,t,l),qb(a,r,l)))}function Bb(t,r,a){var l=ds();uu(t,r,a,l)}function uu(t,r,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Jd(t))zb(r,f);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var _=r.lastRenderedState,A=p(_,a);if(f.hasEagerState=!0,f.eagerState=A,Yn(A,_))return Fl(t,r,f,0),It===null&&ql(),!1}catch{}finally{}if(a=Xc(t,r,f,l),a!==null)return qr(a,t,l),qb(a,r,l),!0}return!1}function Vm(t,r,a,l){if(l={lane:2,revertLane:gp(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Jd(t)){if(r)throw Error(i(479))}else r=Xc(t,a,l,2),r!==null&&qr(r,t,2)}function Jd(t){var r=t.alternate;return t===Qe||r!==null&&r===Qe}function zb(t,r){Jl=Hd=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function qb(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Hn(t,a)}}var du={readContext:fn,use:Kd,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useLayoutEffect:nn,useInsertionEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useSyncExternalStore:nn,useId:nn,useHostTransitionStatus:nn,useFormState:nn,useActionState:nn,useOptimistic:nn,useMemoCache:nn,useCacheRefresh:nn};du.useEffectEvent=nn;var Fb={readContext:fn,use:Kd,useCallback:function(t,r){return mr().memoizedState=[t,r===void 0?null:r],t},useContext:fn,useEffect:Ab,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Xd(4194308,4,jb.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Xd(4194308,4,t,r)},useInsertionEffect:function(t,r){Xd(4,2,t,r)},useMemo:function(t,r){var a=mr();r=r===void 0?null:r;var l=t();if(yl){En(!0);try{t()}finally{En(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=mr();if(a!==void 0){var f=a(r);if(yl){En(!0);try{a(r)}finally{En(!1)}}}else f=r;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=fN.bind(null,Qe,t),[l.memoizedState,t]},useRef:function(t){var r=mr();return t={current:t},r.memoizedState=t},useState:function(t){t=jm(t);var r=t.queue,a=Bb.bind(null,Qe,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:Om,useDeferredValue:function(t,r){var a=mr();return Gm(a,t,r)},useTransition:function(){var t=jm(!1);return t=Mb.bind(null,Qe,t.queue,!0,!1),mr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Qe,f=mr();if(Je){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),It===null)throw Error(i(349));(tt&127)!==0||db(l,r,a)}f.memoizedState=a;var p={value:a,getSnapshot:r};return f.queue=p,Ab(fb.bind(null,l,p,t),[t]),l.flags|=2048,ec(9,{destroy:void 0},hb.bind(null,l,p,a,r),null),a},useId:function(){var t=mr(),r=It.identifierPrefix;if(Je){var a=Ns,l=as;a=(l&~(1<<32-lt(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=$d++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=aN++,r="_"+r+"r_"+a.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:Pm,useFormState:wb,useActionState:wb,useOptimistic:function(t){var r=mr();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Vm.bind(null,Qe,!0,a),a.dispatch=r,[t,r]},useMemoCache:Cm,useCacheRefresh:function(){return mr().memoizedState=hN.bind(null,Qe)},useEffectEvent:function(t){var r=mr(),a={impl:t};return r.memoizedState=a,function(){if((pt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},Um={readContext:fn,use:Kd,useCallback:kb,useContext:fn,useEffect:km,useImperativeHandle:Db,useInsertionEffect:Rb,useLayoutEffect:Ib,useMemo:Ob,useReducer:Yd,useRef:Sb,useState:function(){return Yd(ca)},useDebugValue:Om,useDeferredValue:function(t,r){var a=cn();return Gb(a,Et.memoizedState,t,r)},useTransition:function(){var t=Yd(ca)[0],r=cn().memoizedState;return[typeof t=="boolean"?t:cu(t),r]},useSyncExternalStore:ub,useId:Ub,useHostTransitionStatus:Pm,useFormState:Eb,useActionState:Eb,useOptimistic:function(t,r){var a=cn();return gb(a,Et,t,r)},useMemoCache:Cm,useCacheRefresh:Lb};Um.useEffectEvent=Cb;var Hb={readContext:fn,use:Kd,useCallback:kb,useContext:fn,useEffect:km,useImperativeHandle:Db,useInsertionEffect:Rb,useLayoutEffect:Ib,useMemo:Ob,useReducer:Im,useRef:Sb,useState:function(){return Im(ca)},useDebugValue:Om,useDeferredValue:function(t,r){var a=cn();return Et===null?Gm(a,t,r):Gb(a,Et.memoizedState,t,r)},useTransition:function(){var t=Im(ca)[0],r=cn().memoizedState;return[typeof t=="boolean"?t:cu(t),r]},useSyncExternalStore:ub,useId:Ub,useHostTransitionStatus:Pm,useFormState:Nb,useActionState:Nb,useOptimistic:function(t,r){var a=cn();return Et!==null?gb(a,Et,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Cm,useCacheRefresh:Lb};Hb.useEffectEvent=Cb;function Lm(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:S({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Bm={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=ds(),f=no(l);f.payload=r,a!=null&&(f.callback=a),r=ro(t,f,l),r!==null&&(qr(r,t,l),iu(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=ds(),f=no(l);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=ro(t,f,l),r!==null&&(qr(r,t,l),iu(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=ds(),l=no(a);l.tag=2,r!=null&&(l.callback=r),r=ro(t,l,a),r!==null&&(qr(r,t,a),iu(r,t,a))}};function $b(t,r,a,l,f,p,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,p,_):r.prototype&&r.prototype.isPureReactComponent?!Pn(a,l)||!Pn(f,p):!0}function Qb(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&Bm.enqueueReplaceState(r,r.state,null)}function bl(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=S({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}function Kb(t){zl(t)}function Yb(t){console.error(t)}function Xb(t){zl(t)}function Zd(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Wb(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function zm(t,r,a){return a=no(a),a.tag=3,a.payload={element:null},a.callback=function(){Zd(t,r)},a}function Jb(t){return t=no(t),t.tag=3,t}function Zb(t,r,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var p=l.value;t.payload=function(){return f(p)},t.callback=function(){Wb(r,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){Wb(r,a,l),typeof f!="function"&&(co===null?co=new Set([this]):co.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function mN(t,r,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&eo(r,a,f,!0),a=os.current,a!==null){switch(a.tag){case 31:case 13:return As===null?dh():a.alternate===null&&rn===0&&(rn=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Ld?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),fp(t,l,f)),!1;case 22:return a.flags|=65536,l===Ld?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),fp(t,l,f)),!1}throw Error(i(435,a.tag))}return fp(t,l,f),dh(),!1}if(Je)return r=os.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==Kl&&(t=Error(i(422),{cause:l}),dl(Gr(t,a)))):(l!==Kl&&(r=Error(i(423),{cause:l}),dl(Gr(r,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=Gr(l,a),f=zm(t.stateNode,l,f),bm(t,f),rn!==4&&(rn=2)),!1;var p=Error(i(520),{cause:l});if(p=Gr(p,a),vu===null?vu=[p]:vu.push(p),rn!==4&&(rn=2),r===null)return!0;l=Gr(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=zm(a.stateNode,l,t),bm(a,t),!1;case 1:if(r=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(co===null||!co.has(p))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Jb(f),Zb(f,t,a,l),bm(a,f),!1}a=a.return}while(a!==null);return!1}var qm=Error(i(461)),gn=!1;function Vn(t,r,a,l){r.child=t===null?rb(r,null,a,l):gl(r,t.child,a,l)}function ev(t,r,a,l,f){a=a.render;var p=r.ref;if("ref"in l){var _={};for(var A in l)A!=="ref"&&(_[A]=l[A])}else _=l;return ji(r),l=Tm(t,r,a,_,p,f),A=Nm(),t!==null&&!gn?(Sm(t,r,f),ua(t,r,f)):(Je&&A&&cl(r),r.flags|=1,Vn(t,r,l,f),r.child)}function tv(t,r,a,l,f){if(t===null){var p=a.type;return typeof p=="function"&&!Jc(p)&&p.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=p,nv(t,r,p,l,f)):(t=$l(a.type,null,l,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,!Wm(t,f)){var _=p.memoizedProps;if(a=a.compare,a=a!==null?a:Pn,a(_,l)&&t.ref===r.ref)return ua(t,r,f)}return r.flags|=1,t=Ts(p,l),t.ref=r.ref,t.return=r,r.child=t}function nv(t,r,a,l,f){if(t!==null){var p=t.memoizedProps;if(Pn(p,l)&&t.ref===r.ref)if(gn=!1,r.pendingProps=l=p,Wm(t,f))(t.flags&131072)!==0&&(gn=!0);else return r.lanes=t.lanes,ua(t,r,f)}return Fm(t,r,a,l,f)}function rv(t,r,a,l){var f=l.children,p=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(p=p!==null?p.baseLanes|a:a,t!==null){for(l=r.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~p}else l=0,r.child=null;return sv(t,r,p,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Vd(r,p!==null?p.cachePool:null),p!==null?ab(r,p):xm(),ob(r);else return l=r.lanes=536870912,sv(t,r,p!==null?p.baseLanes|a:a,a,l)}else p!==null?(Vd(r,p.cachePool),ab(r,p),io(),r.memoizedState=null):(t!==null&&Vd(r,null),xm(),io());return Vn(t,r,f,a),r.child}function hu(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function sv(t,r,a,l,f){var p=mm();return p=p===null?null:{parent:V._currentValue,pool:p},r.memoizedState={baseLanes:a,cachePool:p},t!==null&&Vd(r,null),xm(),ob(r),t!==null&&eo(t,r,l,!0),r.childLanes=f,null}function eh(t,r){return r=nh({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function iv(t,r,a){return gl(r,t.child,null,a),t=eh(r,r.pendingProps),t.flags|=2,ls(r),r.memoizedState=null,t}function pN(t,r,a){var l=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(Je){if(l.mode==="hidden")return t=eh(r,l),r.lanes=536870912,hu(null,t);if(wm(r),(t=Rt)?(t=yx(t,Vr),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Si!==null?{id:as,overflow:Ns}:null,retryLane:536870912,hydrationErrors:null},a=kd(t),a.return=r,r.child=a,Sn=r,Rt=null)):t=null,t===null)throw Xs(r);return r.lanes=536870912,null}return eh(r,l)}var p=t.memoizedState;if(p!==null){var _=p.dehydrated;if(wm(r),f)if(r.flags&256)r.flags&=-257,r=iv(t,r,a);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(i(558));else if(gn||eo(t,r,a,!1),f=(a&t.childLanes)!==0,gn||f){if(l=It,l!==null&&(_=ka(l,a),_!==0&&_!==p.retryLane))throw p.retryLane=_,Ni(t,_),qr(l,t,_),qm;dh(),r=iv(t,r,a)}else t=p.treeContext,Rt=Cs(_.nextSibling),Sn=r,Je=!0,Ai=null,Vr=!1,t!==null&&Md(r,t),r=eh(r,l),r.flags|=4096;return r}return t=Ts(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function th(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Fm(t,r,a,l,f){return ji(r),a=Tm(t,r,a,l,void 0,f),l=Nm(),t!==null&&!gn?(Sm(t,r,f),ua(t,r,f)):(Je&&l&&cl(r),r.flags|=1,Vn(t,r,a,f),r.child)}function av(t,r,a,l,f,p){return ji(r),r.updateQueue=null,a=cb(r,l,a,f),lb(t),l=Nm(),t!==null&&!gn?(Sm(t,r,p),ua(t,r,p)):(Je&&l&&cl(r),r.flags|=1,Vn(t,r,a,p),r.child)}function ov(t,r,a,l,f){if(ji(r),r.stateNode===null){var p=Xa,_=a.contextType;typeof _=="object"&&_!==null&&(p=fn(_)),p=new a(l,p),r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Bm,r.stateNode=p,p._reactInternals=r,p=r.stateNode,p.props=l,p.state=r.memoizedState,p.refs={},gm(r),_=a.contextType,p.context=typeof _=="object"&&_!==null?fn(_):Xa,p.state=r.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Lm(r,a,_,l),p.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(_=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),_!==p.state&&Bm.enqueueReplaceState(p,p.state,null),ou(r,l,p,f),au(),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){p=r.stateNode;var A=r.memoizedProps,M=bl(a,A);p.props=M;var K=p.context,ne=a.contextType;_=Xa,typeof ne=="object"&&ne!==null&&(_=fn(ne));var ie=a.getDerivedStateFromProps;ne=typeof ie=="function"||typeof p.getSnapshotBeforeUpdate=="function",A=r.pendingProps!==A,ne||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A||K!==_)&&Qb(r,p,l,_),to=!1;var X=r.memoizedState;p.state=X,ou(r,l,p,f),au(),K=r.memoizedState,A||X!==K||to?(typeof ie=="function"&&(Lm(r,a,ie,l),K=r.memoizedState),(M=to||$b(r,a,M,l,X,K,_))?(ne||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(r.flags|=4194308)):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=K),p.props=l,p.state=K,p.context=_,l=M):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{p=r.stateNode,ym(t,r),_=r.memoizedProps,ne=bl(a,_),p.props=ne,ie=r.pendingProps,X=p.context,K=a.contextType,M=Xa,typeof K=="object"&&K!==null&&(M=fn(K)),A=a.getDerivedStateFromProps,(K=typeof A=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(_!==ie||X!==M)&&Qb(r,p,l,M),to=!1,X=r.memoizedState,p.state=X,ou(r,l,p,f),au();var Z=r.memoizedState;_!==ie||X!==Z||to||t!==null&&t.dependencies!==null&&Js(t.dependencies)?(typeof A=="function"&&(Lm(r,a,A,l),Z=r.memoizedState),(ne=to||$b(r,a,ne,l,X,Z,M)||t!==null&&t.dependencies!==null&&Js(t.dependencies))?(K||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,Z,M),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,Z,M)),typeof p.componentDidUpdate=="function"&&(r.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof p.componentDidUpdate!="function"||_===t.memoizedProps&&X===t.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&X===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=Z),p.props=l,p.state=Z,p.context=M,l=ne):(typeof p.componentDidUpdate!="function"||_===t.memoizedProps&&X===t.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&X===t.memoizedState||(r.flags|=1024),l=!1)}return p=l,th(t,r),l=(r.flags&128)!==0,p||l?(p=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:p.render(),r.flags|=1,t!==null&&l?(r.child=gl(r,t.child,null,f),r.child=gl(r,null,a,f)):Vn(t,r,a,f),r.memoizedState=p.state,t=r.child):t=ua(t,r,f),t}function lv(t,r,a,l){return Ci(),r.flags|=256,Vn(t,r,a,l),r.child}var Hm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $m(t){return{baseLanes:t,cachePool:Wy()}}function Qm(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=us),t}function cv(t,r,a){var l=r.pendingProps,f=!1,p=(r.flags&128)!==0,_;if((_=p)||(_=t!==null&&t.memoizedState===null?!1:(ln.current&2)!==0),_&&(f=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,t===null){if(Je){if(f?so(r):io(),(t=Rt)?(t=yx(t,Vr),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Si!==null?{id:as,overflow:Ns}:null,retryLane:536870912,hydrationErrors:null},a=kd(t),a.return=r,r.child=a,Sn=r,Rt=null)):t=null,t===null)throw Xs(r);return Rp(t)?r.lanes=32:r.lanes=536870912,null}var A=l.children;return l=l.fallback,f?(io(),f=r.mode,A=nh({mode:"hidden",children:A},f),l=Ks(l,f,a,null),A.return=r,l.return=r,A.sibling=l,r.child=A,l=r.child,l.memoizedState=$m(a),l.childLanes=Qm(t,_,a),r.memoizedState=Hm,hu(null,l)):(so(r),Km(r,A))}var M=t.memoizedState;if(M!==null&&(A=M.dehydrated,A!==null)){if(p)r.flags&256?(so(r),r.flags&=-257,r=Ym(t,r,a)):r.memoizedState!==null?(io(),r.child=t.child,r.flags|=128,r=null):(io(),A=l.fallback,f=r.mode,l=nh({mode:"visible",children:l.children},f),A=Ks(A,f,a,null),A.flags|=2,l.return=r,A.return=r,l.sibling=A,r.child=l,gl(r,t.child,null,a),l=r.child,l.memoizedState=$m(a),l.childLanes=Qm(t,_,a),r.memoizedState=Hm,r=hu(null,l));else if(so(r),Rp(A)){if(_=A.nextSibling&&A.nextSibling.dataset,_)var K=_.dgst;_=K,l=Error(i(419)),l.stack="",l.digest=_,dl({value:l,source:null,stack:null}),r=Ym(t,r,a)}else if(gn||eo(t,r,a,!1),_=(a&t.childLanes)!==0,gn||_){if(_=It,_!==null&&(l=ka(_,a),l!==0&&l!==M.retryLane))throw M.retryLane=l,Ni(t,l),qr(_,t,l),qm;Cp(A)||dh(),r=Ym(t,r,a)}else Cp(A)?(r.flags|=192,r.child=t.child,r=null):(t=M.treeContext,Rt=Cs(A.nextSibling),Sn=r,Je=!0,Ai=null,Vr=!1,t!==null&&Md(r,t),r=Km(r,l.children),r.flags|=4096);return r}return f?(io(),A=l.fallback,f=r.mode,M=t.child,K=M.sibling,l=Ts(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,K!==null?A=Ts(K,A):(A=Ks(A,f,a,null),A.flags|=2),A.return=r,l.return=r,l.sibling=A,r.child=l,hu(null,l),l=r.child,A=t.child.memoizedState,A===null?A=$m(a):(f=A.cachePool,f!==null?(M=V._currentValue,f=f.parent!==M?{parent:M,pool:M}:f):f=Wy(),A={baseLanes:A.baseLanes|a,cachePool:f}),l.memoizedState=A,l.childLanes=Qm(t,_,a),r.memoizedState=Hm,hu(t.child,l)):(so(r),a=t.child,t=a.sibling,a=Ts(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(_=r.deletions,_===null?(r.deletions=[t],r.flags|=16):_.push(t)),r.child=a,r.memoizedState=null,a)}function Km(t,r){return r=nh({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function nh(t,r){return t=ur(22,t,null,r),t.lanes=0,t}function Ym(t,r,a){return gl(r,t.child,null,a),t=Km(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function uv(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),hr(t.return,r,a)}function Xm(t,r,a,l,f,p){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:p}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=p)}function dv(t,r,a){var l=r.pendingProps,f=l.revealOrder,p=l.tail;l=l.children;var _=ln.current,A=(_&2)!==0;if(A?(_=_&1|2,r.flags|=128):_&=1,le(ln,_),Vn(t,r,l,a),l=Je?ll:0,!A&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&uv(t,a,r);else if(t.tag===19)uv(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(a=r.child,f=null;a!==null;)t=a.alternate,t!==null&&Fd(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),Xm(r,!1,f,a,p,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&Fd(t)===null){r.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}Xm(r,!0,a,null,p,l);break;case"together":Xm(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function ua(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),lo|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(eo(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,a=Ts(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Ts(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Wm(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Js(t)))}function gN(t,r,a){switch(r.tag){case 3:Le(r,r.stateNode.containerInfo),Ii(r,V,t.memoizedState.cache),Ci();break;case 27:case 5:Be(r);break;case 4:Le(r,r.stateNode.containerInfo);break;case 10:Ii(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,wm(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(so(r),r.flags|=128,null):(a&r.child.childLanes)!==0?cv(t,r,a):(so(r),t=ua(t,r,a),t!==null?t.sibling:null);so(r);break;case 19:var f=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(eo(t,r,a,!1),l=(a&r.childLanes)!==0),f){if(l)return dv(t,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),le(ln,ln.current),l)break;return null;case 22:return r.lanes=0,rv(t,r,a,r.pendingProps);case 24:Ii(r,V,t.memoizedState.cache)}return ua(t,r,a)}function hv(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)gn=!0;else{if(!Wm(t,a)&&(r.flags&128)===0)return gn=!1,gN(t,r,a);gn=(t.flags&131072)!==0}else gn=!1,Je&&(r.flags&1048576)!==0&&Gd(r,ll,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=ml(r.elementType),r.type=t,typeof t=="function")Jc(t)?(l=bl(t,l),r.tag=1,r=ov(null,r,t,l,a)):(r.tag=0,r=Fm(null,r,t,l,a));else{if(t!=null){var f=t.$$typeof;if(f===_e){r.tag=11,r=ev(null,r,t,l,a);break e}else if(f===O){r.tag=14,r=tv(null,r,t,l,a);break e}}throw r=Fe(t)||t,Error(i(306,r,""))}}return r;case 0:return Fm(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,f=bl(l,r.pendingProps),ov(t,r,l,f,a);case 3:e:{if(Le(r,r.stateNode.containerInfo),t===null)throw Error(i(387));l=r.pendingProps;var p=r.memoizedState;f=p.element,ym(t,r),ou(r,l,null,a);var _=r.memoizedState;if(l=_.cache,Ii(r,V,l),l!==p.cache&&hl(r,[V],a,!0),au(),l=_.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){r=lv(t,r,l,a);break e}else if(l!==f){f=Gr(Error(i(424)),r),dl(f),r=lv(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Rt=Cs(t.firstChild),Sn=r,Je=!0,Ai=null,Vr=!0,a=rb(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ci(),l===f){r=ua(t,r,a);break e}Vn(t,r,l,a)}r=r.child}return r;case 26:return th(t,r),t===null?(a=Ex(r.type,null,r.pendingProps,null))?r.memoizedState=a:Je||(a=r.type,t=r.pendingProps,l=bh(ye.current).createElement(a),l[Bt]=r,l[on]=t,Un(l,a,t),Yt(l),r.stateNode=l):r.memoizedState=Ex(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Be(r),t===null&&Je&&(l=r.stateNode=xx(r.type,r.pendingProps,ye.current),Sn=r,Vr=!0,f=Rt,mo(r.type)?(Ip=f,Rt=Cs(l.firstChild)):Rt=f),Vn(t,r,r.pendingProps.children,a),th(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Je&&((f=l=Rt)&&(l=$N(l,r.type,r.pendingProps,Vr),l!==null?(r.stateNode=l,Sn=r,Rt=Cs(l.firstChild),Vr=!1,f=!0):f=!1),f||Xs(r)),Be(r),f=r.type,p=r.pendingProps,_=t!==null?t.memoizedProps:null,l=p.children,Np(f,p)?l=null:_!==null&&Np(f,_)&&(r.flags|=32),r.memoizedState!==null&&(f=Tm(t,r,oN,null,null,a),Au._currentValue=f),th(t,r),Vn(t,r,l,a),r.child;case 6:return t===null&&Je&&((t=a=Rt)&&(a=QN(a,r.pendingProps,Vr),a!==null?(r.stateNode=a,Sn=r,Rt=null,t=!0):t=!1),t||Xs(r)),null;case 13:return cv(t,r,a);case 4:return Le(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=gl(r,null,l,a):Vn(t,r,l,a),r.child;case 11:return ev(t,r,r.type,r.pendingProps,a);case 7:return Vn(t,r,r.pendingProps,a),r.child;case 8:return Vn(t,r,r.pendingProps.children,a),r.child;case 12:return Vn(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Ii(r,r.type,l.value),Vn(t,r,l.children,a),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,ji(r),f=fn(f),l=l(f),r.flags|=1,Vn(t,r,l,a),r.child;case 14:return tv(t,r,r.type,r.pendingProps,a);case 15:return nv(t,r,r.type,r.pendingProps,a);case 19:return dv(t,r,a);case 31:return pN(t,r,a);case 22:return rv(t,r,a,r.pendingProps);case 24:return ji(r),l=fn(V),t===null?(f=mm(),f===null&&(f=It,p=ae(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=a),f=p),r.memoizedState={parent:l,cache:f},gm(r),Ii(r,V,f)):((t.lanes&a)!==0&&(ym(t,r),ou(r,null,null,a),au()),f=t.memoizedState,p=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Ii(r,V,l)):(l=p.cache,Ii(r,V,l),l!==f.cache&&hl(r,[V],a,!0))),Vn(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function da(t){t.flags|=4}function Jm(t,r,a,l,f){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(Uv())t.flags|=8192;else throw pl=Ld,pm}else t.flags&=-16777217}function fv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Cx(r))if(Uv())t.flags|=8192;else throw pl=Ld,pm}function rh(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?$i():536870912,t.lanes|=r,sc|=r)}function fu(t,r){if(!Je)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Vt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function yN(t,r,a){var l=r.pendingProps;switch(ul(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(r),null;case 1:return Vt(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Ws(V),Ie(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ss(r)?da(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,nu())),Vt(r),null;case 26:var f=r.type,p=r.memoizedState;return t===null?(da(r),p!==null?(Vt(r),fv(r,p)):(Vt(r),Jm(r,f,null,l,a))):p?p!==t.memoizedState?(da(r),Vt(r),fv(r,p)):(Vt(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&da(r),Vt(r),Jm(r,f,t,l,a)),null;case 27:if(At(r),a=ye.current,f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&da(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return Vt(r),null}t=he.current,Ss(r)?tu(r):(t=xx(f,l,a),r.stateNode=t,da(r))}return Vt(r),null;case 5:if(At(r),f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&da(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return Vt(r),null}if(p=he.current,Ss(r))tu(r);else{var _=bh(ye.current);switch(p){case 1:p=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=_.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?p.multiple=!0:l.size&&(p.size=l.size);break;default:p=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}p[Bt]=r,p[on]=l;e:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)p.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break e;for(;_.sibling===null;){if(_.return===null||_.return===r)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=p;e:switch(Un(p,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&da(r)}}return Vt(r),Jm(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,a),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&da(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(i(166));if(t=ye.current,Ss(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,f=Sn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[Bt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||cx(t.nodeValue,a)),t||Xs(r,!0)}else t=bh(t).createTextNode(l),t[Bt]=r,r.stateNode=t}return Vt(r),null;case 31:if(a=r.memoizedState,t===null||t.memoizedState!==null){if(l=Ss(r),a!==null){if(t===null){if(!l)throw Error(i(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[Bt]=r}else Ci(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Vt(r),t=!1}else a=nu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return r.flags&256?(ls(r),r):(ls(r),null);if((r.flags&128)!==0)throw Error(i(558))}return Vt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Ss(r),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Bt]=r}else Ci(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Vt(r),f=!1}else f=nu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(ls(r),r):(ls(r),null)}return ls(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==f&&(l.flags|=2048)),a!==t&&a&&(r.child.flags|=8192),rh(r,r.updateQueue),Vt(r),null);case 4:return Ie(),t===null&&xp(r.stateNode.containerInfo),Vt(r),null;case 10:return Ws(r.type),Vt(r),null;case 19:if(B(ln),l=r.memoizedState,l===null)return Vt(r),null;if(f=(r.flags&128)!==0,p=l.rendering,p===null)if(f)fu(l,!1);else{if(rn!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(p=Fd(t),p!==null){for(r.flags|=128,fu(l,!1),t=p.updateQueue,r.updateQueue=t,rh(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Zc(a,t),a=a.sibling;return le(ln,ln.current&1|2),Je&&Ys(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&Pe()>lh&&(r.flags|=128,f=!0,fu(l,!1),r.lanes=4194304)}else{if(!f)if(t=Fd(p),t!==null){if(r.flags|=128,f=!0,t=t.updateQueue,r.updateQueue=t,rh(r,t),fu(l,!0),l.tail===null&&l.tailMode==="hidden"&&!p.alternate&&!Je)return Vt(r),null}else 2*Pe()-l.renderingStartTime>lh&&a!==536870912&&(r.flags|=128,f=!0,fu(l,!1),r.lanes=4194304);l.isBackwards?(p.sibling=r.child,r.child=p):(t=l.last,t!==null?t.sibling=p:r.child=p,l.last=p)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Pe(),t.sibling=null,a=ln.current,le(ln,f?a&1|2:a&1),Je&&Ys(r,l.treeForkCount),t):(Vt(r),null);case 22:case 23:return ls(r),_m(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(Vt(r),r.subtreeFlags&6&&(r.flags|=8192)):Vt(r),a=r.updateQueue,a!==null&&rh(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&B(fl),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Ws(V),Vt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function bN(t,r){switch(ul(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Ws(V),Ie(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return At(r),null;case 31:if(r.memoizedState!==null){if(ls(r),r.alternate===null)throw Error(i(340));Ci()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(ls(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Ci()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return B(ln),null;case 4:return Ie(),null;case 10:return Ws(r.type),null;case 22:case 23:return ls(r),_m(),t!==null&&B(fl),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Ws(V),null;case 25:return null;default:return null}}function mv(t,r){switch(ul(r),r.tag){case 3:Ws(V),Ie();break;case 26:case 27:case 5:At(r);break;case 4:Ie();break;case 31:r.memoizedState!==null&&ls(r);break;case 13:ls(r);break;case 19:B(ln);break;case 10:Ws(r.type);break;case 22:case 23:ls(r),_m(),t!==null&&B(fl);break;case 24:Ws(V)}}function mu(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&t)===t){l=void 0;var p=a.create,_=a.inst;l=p(),_.destroy=l}a=a.next}while(a!==f)}}catch(A){_t(r,r.return,A)}}function ao(t,r,a){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var p=f.next;l=p;do{if((l.tag&t)===t){var _=l.inst,A=_.destroy;if(A!==void 0){_.destroy=void 0,f=r;var M=a,K=A;try{K()}catch(ne){_t(f,M,ne)}}}l=l.next}while(l!==p)}}catch(ne){_t(r,r.return,ne)}}function pv(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{ib(r,a)}catch(l){_t(t,t.return,l)}}}function gv(t,r,a){a.props=bl(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){_t(t,r,l)}}function pu(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(f){_t(t,r,f)}}function Di(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){_t(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){_t(t,r,f)}else a.current=null}function yv(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){_t(t,t.return,f)}}function Zm(t,r,a){try{var l=t.stateNode;LN(l,t.type,a,r),l[on]=r}catch(f){_t(t,t.return,f)}}function bv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&mo(t.type)||t.tag===4}function ep(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&mo(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function tp(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Nr));else if(l!==4&&(l===27&&mo(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(tp(t,r,a),t=t.sibling;t!==null;)tp(t,r,a),t=t.sibling}function sh(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&mo(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(sh(t,r,a),t=t.sibling;t!==null;)sh(t,r,a),t=t.sibling}function vv(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Un(r,l,a),r[Bt]=t,r[on]=a}catch(p){_t(t,t.return,p)}}var ha=!1,yn=!1,np=!1,xv=typeof WeakSet=="function"?WeakSet:Set,jn=null;function vN(t,r){if(t=t.containerInfo,Ep=Nh,t=Ha(t),il(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var _=0,A=-1,M=-1,K=0,ne=0,ie=t,X=null;t:for(;;){for(var Z;ie!==a||f!==0&&ie.nodeType!==3||(A=_+f),ie!==p||l!==0&&ie.nodeType!==3||(M=_+l),ie.nodeType===3&&(_+=ie.nodeValue.length),(Z=ie.firstChild)!==null;)X=ie,ie=Z;for(;;){if(ie===t)break t;if(X===a&&++K===f&&(A=_),X===p&&++ne===l&&(M=_),(Z=ie.nextSibling)!==null)break;ie=X,X=ie.parentNode}ie=Z}a=A===-1||M===-1?null:{start:A,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(Tp={focusedElem:t,selectionRange:a},Nh=!1,jn=r;jn!==null;)if(r=jn,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,jn=t;else for(;jn!==null;){switch(r=jn,p=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)f=t[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,a=r,f=p.memoizedProps,p=p.memoizedState,l=a.stateNode;try{var we=bl(a.type,f);t=l.getSnapshotBeforeUpdate(we,p),l.__reactInternalSnapshotBeforeUpdate=t}catch(De){_t(a,a.return,De)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)Ap(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Ap(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=r.sibling,t!==null){t.return=r.return,jn=t;break}jn=r.return}}function _v(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ma(t,a),l&4&&mu(5,a);break;case 1:if(ma(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(_){_t(a,a.return,_)}else{var f=bl(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(_){_t(a,a.return,_)}}l&64&&pv(a),l&512&&pu(a,a.return);break;case 3:if(ma(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{ib(t,r)}catch(_){_t(a,a.return,_)}}break;case 27:r===null&&l&4&&vv(a);case 26:case 5:ma(t,a),r===null&&l&4&&yv(a),l&512&&pu(a,a.return);break;case 12:ma(t,a);break;case 31:ma(t,a),l&4&&Tv(t,a);break;case 13:ma(t,a),l&4&&Nv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=CN.bind(null,a),KN(t,a))));break;case 22:if(l=a.memoizedState!==null||ha,!l){r=r!==null&&r.memoizedState!==null||yn,f=ha;var p=yn;ha=l,(yn=r)&&!p?pa(t,a,(a.subtreeFlags&8772)!==0):ma(t,a),ha=f,yn=p}break;case 30:break;default:ma(t,a)}}function wv(t){var r=t.alternate;r!==null&&(t.alternate=null,wv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Xi(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ft=null,Ur=!1;function fa(t,r,a){for(a=a.child;a!==null;)Ev(t,r,a),a=a.sibling}function Ev(t,r,a){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(wt,a)}catch{}switch(a.tag){case 26:yn||Di(a,r),fa(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:yn||Di(a,r);var l=Ft,f=Ur;mo(a.type)&&(Ft=a.stateNode,Ur=!1),fa(t,r,a),Tu(a.stateNode),Ft=l,Ur=f;break;case 5:yn||Di(a,r);case 6:if(l=Ft,f=Ur,Ft=null,fa(t,r,a),Ft=l,Ur=f,Ft!==null)if(Ur)try{(Ft.nodeType===9?Ft.body:Ft.nodeName==="HTML"?Ft.ownerDocument.body:Ft).removeChild(a.stateNode)}catch(p){_t(a,r,p)}else try{Ft.removeChild(a.stateNode)}catch(p){_t(a,r,p)}break;case 18:Ft!==null&&(Ur?(t=Ft,px(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),hc(t)):px(Ft,a.stateNode));break;case 4:l=Ft,f=Ur,Ft=a.stateNode.containerInfo,Ur=!0,fa(t,r,a),Ft=l,Ur=f;break;case 0:case 11:case 14:case 15:ao(2,a,r),yn||ao(4,a,r),fa(t,r,a);break;case 1:yn||(Di(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&gv(a,r,l)),fa(t,r,a);break;case 21:fa(t,r,a);break;case 22:yn=(l=yn)||a.memoizedState!==null,fa(t,r,a),yn=l;break;default:fa(t,r,a)}}function Tv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{hc(t)}catch(a){_t(r,r.return,a)}}}function Nv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{hc(t)}catch(a){_t(r,r.return,a)}}function xN(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new xv),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new xv),r;default:throw Error(i(435,t.tag))}}function ih(t,r){var a=xN(t);r.forEach(function(l){if(!a.has(l)){a.add(l);var f=RN.bind(null,t,l);l.then(f,f)}})}function Lr(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],p=t,_=r,A=_;e:for(;A!==null;){switch(A.tag){case 27:if(mo(A.type)){Ft=A.stateNode,Ur=!1;break e}break;case 5:Ft=A.stateNode,Ur=!1;break e;case 3:case 4:Ft=A.stateNode.containerInfo,Ur=!0;break e}A=A.return}if(Ft===null)throw Error(i(160));Ev(p,_,f),Ft=null,Ur=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Sv(r,t),r=r.sibling}var Zs=null;function Sv(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Lr(r,t),Br(t),l&4&&(ao(3,t,t.return),mu(3,t),ao(5,t,t.return));break;case 1:Lr(r,t),Br(t),l&512&&(yn||a===null||Di(a,a.return)),l&64&&ha&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=Zs;if(Lr(r,t),Br(t),l&512&&(yn||a===null||Di(a,a.return)),l&4){var p=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":p=f.getElementsByTagName("title")[0],(!p||p[es]||p[Bt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(l),f.head.insertBefore(p,f.querySelector("head > title"))),Un(p,l,a),p[Bt]=t,Yt(p),l=p;break e;case"link":var _=Sx("link","href",f).get(l+(a.href||""));if(_){for(var A=0;A<_.length;A++)if(p=_[A],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(A,1);break t}}p=f.createElement(l),Un(p,l,a),f.head.appendChild(p);break;case"meta":if(_=Sx("meta","content",f).get(l+(a.content||""))){for(A=0;A<_.length;A++)if(p=_[A],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(A,1);break t}}p=f.createElement(l),Un(p,l,a),f.head.appendChild(p);break;default:throw Error(i(468,l))}p[Bt]=t,Yt(p),l=p}t.stateNode=l}else Ax(f,t.type,t.stateNode);else t.stateNode=Nx(f,l,t.memoizedProps);else p!==l?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,l===null?Ax(f,t.type,t.stateNode):Nx(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Zm(t,t.memoizedProps,a.memoizedProps)}break;case 27:Lr(r,t),Br(t),l&512&&(yn||a===null||Di(a,a.return)),a!==null&&l&4&&Zm(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Lr(r,t),Br(t),l&512&&(yn||a===null||Di(a,a.return)),t.flags&32){f=t.stateNode;try{Gn(f,"")}catch(we){_t(t,t.return,we)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,Zm(t,f,a!==null?a.memoizedProps:f)),l&1024&&(np=!0);break;case 6:if(Lr(r,t),Br(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(we){_t(t,t.return,we)}}break;case 3:if(_h=null,f=Zs,Zs=vh(r.containerInfo),Lr(r,t),Zs=f,Br(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{hc(r.containerInfo)}catch(we){_t(t,t.return,we)}np&&(np=!1,Av(t));break;case 4:l=Zs,Zs=vh(t.stateNode.containerInfo),Lr(r,t),Br(t),Zs=l;break;case 12:Lr(r,t),Br(t);break;case 31:Lr(r,t),Br(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ih(t,l)));break;case 13:Lr(r,t),Br(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(oh=Pe()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ih(t,l)));break;case 22:f=t.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,K=ha,ne=yn;if(ha=K||f,yn=ne||M,Lr(r,t),yn=ne,ha=K,Br(t),l&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||M||ha||yn||vl(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){M=a=r;try{if(p=M.stateNode,f)_=p.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{A=M.stateNode;var ie=M.memoizedProps.style,X=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;A.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(we){_t(M,M.return,we)}}}else if(r.tag===6){if(a===null){M=r;try{M.stateNode.nodeValue=f?"":M.memoizedProps}catch(we){_t(M,M.return,we)}}}else if(r.tag===18){if(a===null){M=r;try{var Z=M.stateNode;f?gx(Z,!0):gx(M.stateNode,!1)}catch(we){_t(M,M.return,we)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,ih(t,a))));break;case 19:Lr(r,t),Br(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ih(t,l)));break;case 30:break;case 21:break;default:Lr(r,t),Br(t)}}function Br(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(bv(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var f=a.stateNode,p=ep(t);sh(t,p,f);break;case 5:var _=a.stateNode;a.flags&32&&(Gn(_,""),a.flags&=-33);var A=ep(t);sh(t,A,_);break;case 3:case 4:var M=a.stateNode.containerInfo,K=ep(t);tp(t,K,M);break;default:throw Error(i(161))}}catch(ne){_t(t,t.return,ne)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Av(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Av(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function ma(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)_v(t,r.alternate,r),r=r.sibling}function vl(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:ao(4,r,r.return),vl(r);break;case 1:Di(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&gv(r,r.return,a),vl(r);break;case 27:Tu(r.stateNode);case 26:case 5:Di(r,r.return),vl(r);break;case 22:r.memoizedState===null&&vl(r);break;case 30:vl(r);break;default:vl(r)}t=t.sibling}}function pa(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=t,p=r,_=p.flags;switch(p.tag){case 0:case 11:case 15:pa(f,p,a),mu(4,p);break;case 1:if(pa(f,p,a),l=p,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(K){_t(l,l.return,K)}if(l=p,f=l.updateQueue,f!==null){var A=l.stateNode;try{var M=f.shared.hiddenCallbacks;if(M!==null)for(f.shared.hiddenCallbacks=null,f=0;f<M.length;f++)sb(M[f],A)}catch(K){_t(l,l.return,K)}}a&&_&64&&pv(p),pu(p,p.return);break;case 27:vv(p);case 26:case 5:pa(f,p,a),a&&l===null&&_&4&&yv(p),pu(p,p.return);break;case 12:pa(f,p,a);break;case 31:pa(f,p,a),a&&_&4&&Tv(f,p);break;case 13:pa(f,p,a),a&&_&4&&Nv(f,p);break;case 22:p.memoizedState===null&&pa(f,p,a),pu(p,p.return);break;case 30:break;default:pa(f,p,a)}r=r.sibling}}function rp(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&pe(a))}function sp(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&pe(t))}function ei(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Cv(t,r,a,l),r=r.sibling}function Cv(t,r,a,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:ei(t,r,a,l),f&2048&&mu(9,r);break;case 1:ei(t,r,a,l);break;case 3:ei(t,r,a,l),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&pe(t)));break;case 12:if(f&2048){ei(t,r,a,l),t=r.stateNode;try{var p=r.memoizedProps,_=p.id,A=p.onPostCommit;typeof A=="function"&&A(_,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){_t(r,r.return,M)}}else ei(t,r,a,l);break;case 31:ei(t,r,a,l);break;case 13:ei(t,r,a,l);break;case 23:break;case 22:p=r.stateNode,_=r.alternate,r.memoizedState!==null?p._visibility&2?ei(t,r,a,l):gu(t,r):p._visibility&2?ei(t,r,a,l):(p._visibility|=2,tc(t,r,a,l,(r.subtreeFlags&10256)!==0||!1)),f&2048&&rp(_,r);break;case 24:ei(t,r,a,l),f&2048&&sp(r.alternate,r);break;default:ei(t,r,a,l)}}function tc(t,r,a,l,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var p=t,_=r,A=a,M=l,K=_.flags;switch(_.tag){case 0:case 11:case 15:tc(p,_,A,M,f),mu(8,_);break;case 23:break;case 22:var ne=_.stateNode;_.memoizedState!==null?ne._visibility&2?tc(p,_,A,M,f):gu(p,_):(ne._visibility|=2,tc(p,_,A,M,f)),f&&K&2048&&rp(_.alternate,_);break;case 24:tc(p,_,A,M,f),f&&K&2048&&sp(_.alternate,_);break;default:tc(p,_,A,M,f)}r=r.sibling}}function gu(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,f=l.flags;switch(l.tag){case 22:gu(a,l),f&2048&&rp(l.alternate,l);break;case 24:gu(a,l),f&2048&&sp(l.alternate,l);break;default:gu(a,l)}r=r.sibling}}var yu=8192;function nc(t,r,a){if(t.subtreeFlags&yu)for(t=t.child;t!==null;)Rv(t,r,a),t=t.sibling}function Rv(t,r,a){switch(t.tag){case 26:nc(t,r,a),t.flags&yu&&t.memoizedState!==null&&aS(a,Zs,t.memoizedState,t.memoizedProps);break;case 5:nc(t,r,a);break;case 3:case 4:var l=Zs;Zs=vh(t.stateNode.containerInfo),nc(t,r,a),Zs=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=yu,yu=16777216,nc(t,r,a),yu=l):nc(t,r,a));break;default:nc(t,r,a)}}function Iv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function bu(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];jn=l,Dv(l,t)}Iv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)jv(t),t=t.sibling}function jv(t){switch(t.tag){case 0:case 11:case 15:bu(t),t.flags&2048&&ao(9,t,t.return);break;case 3:bu(t);break;case 12:bu(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,ah(t)):bu(t);break;default:bu(t)}}function ah(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];jn=l,Dv(l,t)}Iv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:ao(8,r,r.return),ah(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,ah(r));break;default:ah(r)}t=t.sibling}}function Dv(t,r){for(;jn!==null;){var a=jn;switch(a.tag){case 0:case 11:case 15:ao(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:pe(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,jn=l;else e:for(a=t;jn!==null;){l=jn;var f=l.sibling,p=l.return;if(wv(l),l===a){jn=null;break e}if(f!==null){f.return=p,jn=f;break e}jn=p}}}var _N={getCacheForType:function(t){var r=fn(V),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a},cacheSignal:function(){return fn(V).controller.signal}},wN=typeof WeakMap=="function"?WeakMap:Map,pt=0,It=null,Ze=null,tt=0,xt=0,cs=null,oo=!1,rc=!1,ip=!1,ga=0,rn=0,lo=0,xl=0,ap=0,us=0,sc=0,vu=null,zr=null,op=!1,oh=0,kv=0,lh=1/0,ch=null,co=null,An=0,uo=null,ic=null,ya=0,lp=0,cp=null,Ov=null,xu=0,up=null;function ds(){return(pt&2)!==0&&tt!==0?tt&-tt:ee.T!==null?gp():Vs()}function Gv(){if(us===0)if((tt&536870912)===0||Je){var t=Gs;Gs<<=1,(Gs&3932160)===0&&(Gs=262144),us=t}else us=536870912;return t=os.current,t!==null&&(t.flags|=32),us}function qr(t,r,a){(t===It&&(xt===2||xt===9)||t.cancelPendingCommit!==null)&&(ac(t,0),ho(t,tt,us,!1)),oi(t,a),((pt&2)===0||t!==It)&&(t===It&&((pt&2)===0&&(xl|=a),rn===4&&ho(t,tt,us,!1)),ki(t))}function Mv(t,r,a){if((pt&6)!==0)throw Error(i(327));var l=!a&&(r&127)===0&&(r&t.expiredLanes)===0||In(t,r),f=l?NN(t,r):hp(t,r,!0),p=l;do{if(f===0){rc&&!l&&ho(t,r,0,!1);break}else{if(a=t.current.alternate,p&&!EN(a)){f=hp(t,r,!1),p=!1;continue}if(f===2){if(p=r,t.errorRecoveryDisabledLanes&p)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var A=t;f=vu;var M=A.current.memoizedState.isDehydrated;if(M&&(ac(A,_).flags|=256),_=hp(A,_,!1),_!==2){if(ip&&!M){A.errorRecoveryDisabledLanes|=p,xl|=p,f=4;break e}p=zr,zr=f,p!==null&&(zr===null?zr=p:zr.push.apply(zr,p))}f=_}if(p=!1,f!==2)continue}}if(f===1){ac(t,0),ho(t,r,0,!0);break}e:{switch(l=t,p=f,p){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:ho(l,r,us,!oo);break e;case 2:zr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=oh+300-Pe(),10<f)){if(ho(l,r,us,!oo),Jr(l,0,!0)!==0)break e;ya=r,l.timeoutHandle=fx(Pv.bind(null,l,a,zr,ch,op,r,us,xl,sc,oo,p,"Throttled",-0,0),f);break e}Pv(l,a,zr,ch,op,r,us,xl,sc,oo,p,null,-0,0)}}break}while(!0);ki(t)}function Pv(t,r,a,l,f,p,_,A,M,K,ne,ie,X,Z){if(t.timeoutHandle=-1,ie=r.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Nr},Rv(r,p,ie);var we=(p&62914560)===p?oh-Pe():(p&4194048)===p?kv-Pe():0;if(we=oS(ie,we),we!==null){ya=p,t.cancelPendingCommit=we(Hv.bind(null,t,r,p,a,l,f,_,A,M,ne,ie,null,X,Z)),ho(t,p,_,!K);return}}Hv(t,r,p,a,l,f,_,A,M)}function EN(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],p=f.getSnapshot;f=f.value;try{if(!Yn(p(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ho(t,r,a,l){r&=~ap,r&=~xl,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var f=r;0<f;){var p=31-lt(f),_=1<<p;l[p]=-1,f&=~_}a!==0&&Qi(t,a,r)}function uh(){return(pt&6)===0?(_u(0),!1):!0}function dp(){if(Ze!==null){if(xt===0)var t=Ze.return;else t=Ze,dr=Ri=null,Am(t),Xl=null,ru=0,t=Ze;for(;t!==null;)mv(t.alternate,t),t=t.return;Ze=null}}function ac(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,qN(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),ya=0,dp(),It=t,Ze=a=Ts(t.current,null),tt=r,xt=0,cs=null,oo=!1,rc=In(t,r),ip=!1,sc=us=ap=xl=lo=rn=0,zr=vu=null,op=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var f=31-lt(l),p=1<<f;r|=t[f],l&=~p}return ga=r,ql(),a}function Vv(t,r){Qe=null,ee.H=du,r===Yl||r===Ud?(r=eb(),xt=3):r===pm?(r=eb(),xt=4):xt=r===qm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,cs=r,Ze===null&&(rn=1,Zd(t,Gr(r,t.current)))}function Uv(){var t=os.current;return t===null?!0:(tt&4194048)===tt?As===null:(tt&62914560)===tt||(tt&536870912)!==0?t===As:!1}function Lv(){var t=ee.H;return ee.H=du,t===null?du:t}function Bv(){var t=ee.A;return ee.A=_N,t}function dh(){rn=4,oo||(tt&4194048)!==tt&&os.current!==null||(rc=!0),(lo&134217727)===0&&(xl&134217727)===0||It===null||ho(It,tt,us,!1)}function hp(t,r,a){var l=pt;pt|=2;var f=Lv(),p=Bv();(It!==t||tt!==r)&&(ch=null,ac(t,r)),r=!1;var _=rn;e:do try{if(xt!==0&&Ze!==null){var A=Ze,M=cs;switch(xt){case 8:dp(),_=6;break e;case 3:case 2:case 9:case 6:os.current===null&&(r=!0);var K=xt;if(xt=0,cs=null,oc(t,A,M,K),a&&rc){_=0;break e}break;default:K=xt,xt=0,cs=null,oc(t,A,M,K)}}TN(),_=rn;break}catch(ne){Vv(t,ne)}while(!0);return r&&t.shellSuspendCounter++,dr=Ri=null,pt=l,ee.H=f,ee.A=p,Ze===null&&(It=null,tt=0,ql()),_}function TN(){for(;Ze!==null;)zv(Ze)}function NN(t,r){var a=pt;pt|=2;var l=Lv(),f=Bv();It!==t||tt!==r?(ch=null,lh=Pe()+500,ac(t,r)):rc=In(t,r);e:do try{if(xt!==0&&Ze!==null){r=Ze;var p=cs;t:switch(xt){case 1:xt=0,cs=null,oc(t,r,p,1);break;case 2:case 9:if(Jy(p)){xt=0,cs=null,qv(r);break}r=function(){xt!==2&&xt!==9||It!==t||(xt=7),ki(t)},p.then(r,r);break e;case 3:xt=7;break e;case 4:xt=5;break e;case 7:Jy(p)?(xt=0,cs=null,qv(r)):(xt=0,cs=null,oc(t,r,p,7));break;case 5:var _=null;switch(Ze.tag){case 26:_=Ze.memoizedState;case 5:case 27:var A=Ze;if(_?Cx(_):A.stateNode.complete){xt=0,cs=null;var M=A.sibling;if(M!==null)Ze=M;else{var K=A.return;K!==null?(Ze=K,hh(K)):Ze=null}break t}}xt=0,cs=null,oc(t,r,p,5);break;case 6:xt=0,cs=null,oc(t,r,p,6);break;case 8:dp(),rn=6;break e;default:throw Error(i(462))}}SN();break}catch(ne){Vv(t,ne)}while(!0);return dr=Ri=null,ee.H=l,ee.A=f,pt=a,Ze!==null?0:(It=null,tt=0,ql(),rn)}function SN(){for(;Ze!==null&&!vt();)zv(Ze)}function zv(t){var r=hv(t.alternate,t,ga);t.memoizedProps=t.pendingProps,r===null?hh(t):Ze=r}function qv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=av(a,r,r.pendingProps,r.type,void 0,tt);break;case 11:r=av(a,r,r.pendingProps,r.type.render,r.ref,tt);break;case 5:Am(r);default:mv(a,r),r=Ze=Zc(r,ga),r=hv(a,r,ga)}t.memoizedProps=t.pendingProps,r===null?hh(t):Ze=r}function oc(t,r,a,l){dr=Ri=null,Am(r),Xl=null,ru=0;var f=r.return;try{if(mN(t,f,r,a,tt)){rn=1,Zd(t,Gr(a,t.current)),Ze=null;return}}catch(p){if(f!==null)throw Ze=f,p;rn=1,Zd(t,Gr(a,t.current)),Ze=null;return}r.flags&32768?(Je||l===1?t=!0:rc||(tt&536870912)!==0?t=!1:(oo=t=!0,(l===2||l===9||l===3||l===6)&&(l=os.current,l!==null&&l.tag===13&&(l.flags|=16384))),Fv(r,t)):hh(r)}function hh(t){var r=t;do{if((r.flags&32768)!==0){Fv(r,oo);return}t=r.return;var a=yN(r.alternate,r,ga);if(a!==null){Ze=a;return}if(r=r.sibling,r!==null){Ze=r;return}Ze=r=t}while(r!==null);rn===0&&(rn=5)}function Fv(t,r){do{var a=bN(t.alternate,t);if(a!==null){a.flags&=32767,Ze=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Ze=t;return}Ze=t=a}while(t!==null);rn=6,Ze=null}function Hv(t,r,a,l,f,p,_,A,M){t.cancelPendingCommit=null;do fh();while(An!==0);if((pt&6)!==0)throw Error(i(327));if(r!==null){if(r===t.current)throw Error(i(177));if(p=r.lanes|r.childLanes,p|=Ya,Yo(t,a,p,_,A,M),t===It&&(Ze=It=null,tt=0),ic=r,uo=t,ya=a,lp=p,cp=f,Ov=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,IN(de,function(){return Xv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=ee.T,ee.T=null,f=ge.p,ge.p=2,_=pt,pt|=4;try{vN(t,r,a)}finally{pt=_,ge.p=f,ee.T=l}}An=1,$v(),Qv(),Kv()}}function $v(){if(An===1){An=0;var t=uo,r=ic,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=ee.T,ee.T=null;var l=ge.p;ge.p=2;var f=pt;pt|=4;try{Sv(r,t);var p=Tp,_=Ha(t.containerInfo),A=p.focusedElem,M=p.selectionRange;if(_!==A&&A&&A.ownerDocument&&_i(A.ownerDocument.documentElement,A)){if(M!==null&&il(A)){var K=M.start,ne=M.end;if(ne===void 0&&(ne=K),"selectionStart"in A)A.selectionStart=K,A.selectionEnd=Math.min(ne,A.value.length);else{var ie=A.ownerDocument||document,X=ie&&ie.defaultView||window;if(X.getSelection){var Z=X.getSelection(),we=A.textContent.length,De=Math.min(M.start,we),Nt=M.end===void 0?De:Math.min(M.end,we);!Z.extend&&De>Nt&&(_=Nt,Nt=De,De=_);var H=Nd(A,De),L=Nd(A,Nt);if(H&&L&&(Z.rangeCount!==1||Z.anchorNode!==H.node||Z.anchorOffset!==H.offset||Z.focusNode!==L.node||Z.focusOffset!==L.offset)){var Q=ie.createRange();Q.setStart(H.node,H.offset),Z.removeAllRanges(),De>Nt?(Z.addRange(Q),Z.extend(L.node,L.offset)):(Q.setEnd(L.node,L.offset),Z.addRange(Q))}}}}for(ie=[],Z=A;Z=Z.parentNode;)Z.nodeType===1&&ie.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ie.length;A++){var re=ie[A];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Nh=!!Ep,Tp=Ep=null}finally{pt=f,ge.p=l,ee.T=a}}t.current=r,An=2}}function Qv(){if(An===2){An=0;var t=uo,r=ic,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=ee.T,ee.T=null;var l=ge.p;ge.p=2;var f=pt;pt|=4;try{_v(t,r.alternate,r)}finally{pt=f,ge.p=l,ee.T=a}}An=3}}function Kv(){if(An===4||An===3){An=0,wn();var t=uo,r=ic,a=ya,l=Ov;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?An=5:(An=0,ic=uo=null,Yv(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(co=null),Ps(a),r=r.stateNode,Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(wt,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=ee.T,f=ge.p,ge.p=2,ee.T=null;try{for(var p=t.onRecoverableError,_=0;_<l.length;_++){var A=l[_];p(A.value,{componentStack:A.stack})}}finally{ee.T=r,ge.p=f}}(ya&3)!==0&&fh(),ki(t),f=t.pendingLanes,(a&261930)!==0&&(f&42)!==0?t===up?xu++:(xu=0,up=t):xu=0,_u(0)}}function Yv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,pe(r)))}function fh(){return $v(),Qv(),Kv(),Xv()}function Xv(){if(An!==5)return!1;var t=uo,r=lp;lp=0;var a=Ps(ya),l=ee.T,f=ge.p;try{ge.p=32>a?32:a,ee.T=null,a=cp,cp=null;var p=uo,_=ya;if(An=0,ic=uo=null,ya=0,(pt&6)!==0)throw Error(i(331));var A=pt;if(pt|=4,jv(p.current),Cv(p,p.current,_,a),pt=A,_u(0,!1),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(wt,p)}catch{}return!0}finally{ge.p=f,ee.T=l,Yv(t,r)}}function Wv(t,r,a){r=Gr(a,r),r=zm(t.stateNode,r,2),t=ro(t,r,2),t!==null&&(oi(t,2),ki(t))}function _t(t,r,a){if(t.tag===3)Wv(t,t,a);else for(;r!==null;){if(r.tag===3){Wv(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(co===null||!co.has(l))){t=Gr(a,t),a=Jb(2),l=ro(r,a,2),l!==null&&(Zb(a,l,r,t),oi(l,2),ki(l));break}}r=r.return}}function fp(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new wN;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(a)||(ip=!0,f.add(a),t=AN.bind(null,t,r,a),r.then(t,t))}function AN(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,It===t&&(tt&a)===a&&(rn===4||rn===3&&(tt&62914560)===tt&&300>Pe()-oh?(pt&2)===0&&ac(t,0):ap|=a,sc===tt&&(sc=0)),ki(t)}function Jv(t,r){r===0&&(r=$i()),t=Ni(t,r),t!==null&&(oi(t,r),ki(t))}function CN(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),Jv(t,a)}function RN(t,r){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(r),Jv(t,a)}function IN(t,r){return jt(t,r)}var mh=null,lc=null,mp=!1,ph=!1,pp=!1,fo=0;function ki(t){t!==lc&&t.next===null&&(lc===null?mh=lc=t:lc=lc.next=t),ph=!0,mp||(mp=!0,DN())}function _u(t,r){if(!pp&&ph){pp=!0;do for(var a=!1,l=mh;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var p=0;else{var _=l.suspendedLanes,A=l.pingedLanes;p=(1<<31-lt(42|t)+1)-1,p&=f&~(_&~A),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,nx(l,p))}else p=tt,p=Jr(l,l===It?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||In(l,p)||(a=!0,nx(l,p));l=l.next}while(a);pp=!1}}function jN(){Zv()}function Zv(){ph=mp=!1;var t=0;fo!==0&&zN()&&(t=fo);for(var r=Pe(),a=null,l=mh;l!==null;){var f=l.next,p=ex(l,r);p===0?(l.next=null,a===null?mh=f:a.next=f,f===null&&(lc=a)):(a=l,(t!==0||(p&3)!==0)&&(ph=!0)),l=f}An!==0&&An!==5||_u(t),fo!==0&&(fo=0)}function ex(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var _=31-lt(p),A=1<<_,M=f[_];M===-1?((A&a)===0||(A&l)!==0)&&(f[_]=ai(A,r)):M<=r&&(t.expiredLanes|=A),p&=~A}if(r=It,a=tt,a=Jr(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(xt===2||xt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Os(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||In(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Os(l),Ps(a)){case 2:case 8:a=Wr;break;case 32:a=de;break;case 268435456:a=ct;break;default:a=de}return l=tx.bind(null,t),a=jt(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Os(l),t.callbackPriority=2,t.callbackNode=null,2}function tx(t,r){if(An!==0&&An!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(fh()&&t.callbackNode!==a)return null;var l=tt;return l=Jr(t,t===It?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Mv(t,l,r),ex(t,Pe()),t.callbackNode!=null&&t.callbackNode===a?tx.bind(null,t):null)}function nx(t,r){if(fh())return null;Mv(t,r,!0)}function DN(){FN(function(){(pt&6)!==0?jt(Da,jN):Zv()})}function gp(){if(fo===0){var t=mn;t===0&&(t=br,br<<=1,(br&261888)===0&&(br=256)),fo=t}return fo}function rx(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:en(""+t)}function sx(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function kN(t,r,a,l,f){if(r==="submit"&&a&&a.stateNode===f){var p=rx((f[on]||null).action),_=l.submitter;_&&(r=(r=_[on]||null)?rx(r.formAction):_.getAttribute("formAction"),r!==null&&(p=r,_=null));var A=new xs("action","action",null,l,f);t.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(fo!==0){var M=_?sx(f,_):new FormData(f);Mm(a,{pending:!0,data:M,method:f.method,action:p},null,M)}}else typeof p=="function"&&(A.preventDefault(),M=_?sx(f,_):new FormData(f),Mm(a,{pending:!0,data:M,method:f.method,action:p},p,M))},currentTarget:f}]})}}for(var yp=0;yp<Yc.length;yp++){var bp=Yc[yp],ON=bp.toLowerCase(),GN=bp[0].toUpperCase()+bp.slice(1);kr(ON,"on"+GN)}kr(Ad,"onAnimationEnd"),kr(Cd,"onAnimationIteration"),kr(Rd,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(dm,"onTransitionRun"),kr(hm,"onTransitionStart"),kr(Id,"onTransitionCancel"),kr(jd,"onTransitionEnd"),Er("onMouseEnter",["mouseout","mouseover"]),Er("onMouseLeave",["mouseout","mouseover"]),Er("onPointerEnter",["pointerout","pointerover"]),Er("onPointerLeave",["pointerout","pointerover"]),wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wr("onBeforeInput",["compositionend","keypress","textInput","paste"]),wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wu));function ix(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],f=l.event;l=l.listeners;e:{var p=void 0;if(r)for(var _=l.length-1;0<=_;_--){var A=l[_],M=A.instance,K=A.currentTarget;if(A=A.listener,M!==p&&f.isPropagationStopped())break e;p=A,f.currentTarget=K;try{p(f)}catch(ne){zl(ne)}f.currentTarget=null,p=M}else for(_=0;_<l.length;_++){if(A=l[_],M=A.instance,K=A.currentTarget,A=A.listener,M!==p&&f.isPropagationStopped())break e;p=A,f.currentTarget=K;try{p(f)}catch(ne){zl(ne)}f.currentTarget=null,p=M}}}}function et(t,r){var a=r[Ki];a===void 0&&(a=r[Ki]=new Set);var l=t+"__bubble";a.has(l)||(ax(r,t,2,!1),a.add(l))}function vp(t,r,a){var l=0;r&&(l|=4),ax(a,t,l,r)}var gh="_reactListening"+Math.random().toString(36).slice(2);function xp(t){if(!t[gh]){t[gh]=!0,li.forEach(function(a){a!=="selectionchange"&&(MN.has(a)||vp(a,!1,t),vp(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[gh]||(r[gh]=!0,vp("selectionchange",!1,r))}}function ax(t,r,a,l){switch(Gx(r)){case 2:var f=uS;break;case 8:f=dS;break;default:f=Gp}a=f.bind(null,r,a,t),f=void 0,!ts||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(r,a,{capture:!0,passive:f}):t.addEventListener(r,a,!0):f!==void 0?t.addEventListener(r,a,{passive:f}):t.addEventListener(r,a,!1)}function _p(t,r,a,l,f){var p=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var A=l.stateNode.containerInfo;if(A===f)break;if(_===4)for(_=l.return;_!==null;){var M=_.tag;if((M===3||M===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;A!==null;){if(_=_r(A),_===null)return;if(M=_.tag,M===5||M===6||M===26||M===27){l=p=_;continue e}A=A.parentNode}}l=l.return}vs(function(){var K=p,ne=ar(a),ie=[];e:{var X=Dd.get(t);if(X!==void 0){var Z=xs,we=t;switch(t){case"keypress":if(Fs(a)===0)break e;case"keydown":case"keyup":Z=Hs;break;case"focusin":we="focus",Z=gi;break;case"focusout":we="blur",Z=gi;break;case"beforeblur":case"afterblur":Z=gi;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Ua;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Zo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=b;break;case Ad:case Cd:case Rd:Z=tl;break;case jd:Z=C;break;case"scroll":case"scrollend":Z=Rr;break;case"wheel":Z=J;break;case"copy":case"cut":case"paste":Z=yi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=jr;break;case"toggle":case"beforetoggle":Z=Ve}var De=(r&4)!==0,Nt=!De&&(t==="scroll"||t==="scrollend"),H=De?X!==null?X+"Capture":null:X;De=[];for(var L=K,Q;L!==null;){var re=L;if(Q=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||Q===null||H===null||(re=Ar(L,H),re!=null&&De.push(Eu(L,re,Q))),Nt)break;L=L.return}0<De.length&&(X=new Z(X,we,null,a,ne),ie.push({event:X,listeners:De}))}}if((r&7)===0){e:{if(X=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",X&&a!==Sr&&(we=a.relatedTarget||a.fromElement)&&(_r(we)||we[Zr]))break e;if((Z||X)&&(X=ne.window===ne?ne:(X=ne.ownerDocument)?X.defaultView||X.parentWindow:window,Z?(we=a.relatedTarget||a.toElement,Z=K,we=we?_r(we):null,we!==null&&(Nt=c(we),De=we.tag,we!==Nt||De!==5&&De!==27&&De!==6)&&(we=null)):(Z=null,we=K),Z!==we)){if(De=Ua,re="onMouseLeave",H="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(De=jr,re="onPointerLeave",H="onPointerEnter",L="pointer"),Nt=Z==null?X:Zt(Z),Q=we==null?X:Zt(we),X=new De(re,L+"leave",Z,a,ne),X.target=Nt,X.relatedTarget=Q,re=null,_r(ne)===K&&(De=new De(H,L+"enter",we,a,ne),De.target=Q,De.relatedTarget=Nt,re=De),Nt=re,Z&&we)t:{for(De=PN,H=Z,L=we,Q=0,re=H;re;re=De(re))Q++;re=0;for(var Ce=L;Ce;Ce=De(Ce))re++;for(;0<Q-re;)H=De(H),Q--;for(;0<re-Q;)L=De(L),re--;for(;Q--;){if(H===L||L!==null&&H===L.alternate){De=H;break t}H=De(H),L=De(L)}De=null}else De=null;Z!==null&&ox(ie,X,Z,De,!1),we!==null&&Nt!==null&&ox(ie,Nt,we,De,!0)}}e:{if(X=K?Zt(K):window,Z=X.nodeName&&X.nodeName.toLowerCase(),Z==="select"||Z==="input"&&X.type==="file")var ht=rl;else if(xi(X))if(lr)ht=um;else{ht=oa;var Te=Hc}else Z=X.nodeName,!Z||Z.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?K&&bs(K.elementType)&&(ht=rl):ht=qa;if(ht&&(ht=ht(t,K))){$s(ie,ht,a,ne);break e}Te&&Te(t,X,K),t==="focusout"&&K&&X.type==="number"&&K.memoizedProps.value!=null&&Ma(X,"number",X.value)}switch(Te=K?Zt(K):window,t){case"focusin":(xi(Te)||Te.contentEditable==="true")&&(Qs=Te,Es=K,wi=null);break;case"focusout":wi=Es=Qs=null;break;case"mousedown":$a=!0;break;case"contextmenu":case"mouseup":case"dragend":$a=!1,Sd(ie,a,ne);break;case"selectionchange":if(Qc)break;case"keydown":case"keyup":Sd(ie,a,ne)}var Ye;if(He)e:{switch(t){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else sa?Mn(t,a)&&(nt="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(nt="onCompositionStart");nt&&(is&&a.locale!=="ko"&&(sa||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&sa&&(Ye=Va()):(ns=ne,Pa="value"in ns?ns.value:ns.textContent,sa=!0)),Te=yh(K,nt),0<Te.length&&(nt=new Kn(nt,t,null,a,ne),ie.push({event:nt,listeners:Te}),Ye?nt.data=Ye:(Ye=vi(a),Ye!==null&&(nt.data=Ye)))),(Ye=Nn?Ed(t,a):Td(t,a))&&(nt=yh(K,"onBeforeInput"),0<nt.length&&(Te=new Kn("onBeforeInput","beforeinput",null,a,ne),ie.push({event:Te,listeners:nt}),Te.data=Ye)),kN(ie,t,K,a,ne)}ix(ie,r)})}function Eu(t,r,a){return{instance:t,listener:r,currentTarget:a}}function yh(t,r){for(var a=r+"Capture",l=[];t!==null;){var f=t,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Ar(t,a),f!=null&&l.unshift(Eu(t,f,p)),f=Ar(t,r),f!=null&&l.push(Eu(t,f,p))),t.tag===3)return l;t=t.return}return[]}function PN(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function ox(t,r,a,l,f){for(var p=r._reactName,_=[];a!==null&&a!==l;){var A=a,M=A.alternate,K=A.stateNode;if(A=A.tag,M!==null&&M===l)break;A!==5&&A!==26&&A!==27||K===null||(M=K,f?(K=Ar(a,p),K!=null&&_.unshift(Eu(a,K,M))):f||(K=Ar(a,p),K!=null&&_.push(Eu(a,K,M)))),a=a.return}_.length!==0&&t.push({event:r,listeners:_})}var VN=/\r\n?/g,UN=/\u0000|\uFFFD/g;function lx(t){return(typeof t=="string"?t:""+t).replace(VN,`
`).replace(UN,"")}function cx(t,r){return r=lx(r),lx(t)===r}function Tt(t,r,a,l,f,p){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Gn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Gn(t,""+l);break;case"className":$e(t,"class",l);break;case"tabIndex":$e(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":$e(t,a,l);break;case"style":ea(t,l,p);break;case"data":if(r!=="object"){$e(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=en(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(r!=="input"&&Tt(t,r,"name",f.name,f,null),Tt(t,r,"formEncType",f.formEncType,f,null),Tt(t,r,"formMethod",f.formMethod,f,null),Tt(t,r,"formTarget",f.formTarget,f,null)):(Tt(t,r,"encType",f.encType,f,null),Tt(t,r,"method",f.method,f,null),Tt(t,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=en(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Nr);break;case"onScroll":l!=null&&et("scroll",t);break;case"onScrollEnd":l!=null&&et("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=en(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":et("beforetoggle",t),et("toggle",t),ui(t,"popover",l);break;case"xlinkActuate":Dt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Dt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Dt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Dt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Dt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Dt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Dt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Dt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Dt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ui(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Jo.get(a)||a,ui(t,a,l))}}function wp(t,r,a,l,f,p){switch(a){case"style":ea(t,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Gn(t,l):(typeof l=="number"||typeof l=="bigint")&&Gn(t,""+l);break;case"onScroll":l!=null&&et("scroll",t);break;case"onScrollEnd":l!=null&&et("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Nr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ci.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),p=t[on]||null,p=p!=null?p[a]:null,typeof p=="function"&&t.removeEventListener(r,p,f),typeof l=="function")){typeof p!="function"&&p!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,f);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ui(t,a,l)}}}function Un(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",t),et("load",t);var l=!1,f=!1,p;for(p in a)if(a.hasOwnProperty(p)){var _=a[p];if(_!=null)switch(p){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Tt(t,r,p,_,a,null)}}f&&Tt(t,r,"srcSet",a.srcSet,a,null),l&&Tt(t,r,"src",a.src,a,null);return;case"input":et("invalid",t);var A=p=_=f=null,M=null,K=null;for(l in a)if(a.hasOwnProperty(l)){var ne=a[l];if(ne!=null)switch(l){case"name":f=ne;break;case"type":_=ne;break;case"checked":M=ne;break;case"defaultChecked":K=ne;break;case"value":p=ne;break;case"defaultValue":A=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,r));break;default:Tt(t,r,l,ne,a,null)}}Xo(t,p,A,M,K,_,f,!1);return;case"select":et("invalid",t),l=_=p=null;for(f in a)if(a.hasOwnProperty(f)&&(A=a[f],A!=null))switch(f){case"value":p=A;break;case"defaultValue":_=A;break;case"multiple":l=A;default:Tt(t,r,f,A,a,null)}r=p,a=_,t.multiple=!!l,r!=null?kt(t,!!l,r,!1):a!=null&&kt(t,!!l,a,!0);return;case"textarea":et("invalid",t),p=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(A=a[_],A!=null))switch(_){case"value":l=A;break;case"defaultValue":f=A;break;case"children":p=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:Tt(t,r,_,A,a,null)}Ls(t,l,f,p);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(l=a[M],l!=null))switch(M){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Tt(t,r,M,l,a,null)}return;case"dialog":et("beforetoggle",t),et("toggle",t),et("cancel",t),et("close",t);break;case"iframe":case"object":et("load",t);break;case"video":case"audio":for(l=0;l<wu.length;l++)et(wu[l],t);break;case"image":et("error",t),et("load",t);break;case"details":et("toggle",t);break;case"embed":case"source":case"link":et("error",t),et("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in a)if(a.hasOwnProperty(K)&&(l=a[K],l!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Tt(t,r,K,l,a,null)}return;default:if(bs(r)){for(ne in a)a.hasOwnProperty(ne)&&(l=a[ne],l!==void 0&&wp(t,r,ne,l,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(l=a[A],l!=null&&Tt(t,r,A,l,a,null))}function LN(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,_=null,A=null,M=null,K=null,ne=null;for(Z in a){var ie=a[Z];if(a.hasOwnProperty(Z)&&ie!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":M=ie;default:l.hasOwnProperty(Z)||Tt(t,r,Z,null,l,ie)}}for(var X in l){var Z=l[X];if(ie=a[X],l.hasOwnProperty(X)&&(Z!=null||ie!=null))switch(X){case"type":p=Z;break;case"name":f=Z;break;case"checked":K=Z;break;case"defaultChecked":ne=Z;break;case"value":_=Z;break;case"defaultValue":A=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:Z!==ie&&Tt(t,r,X,Z,l,ie)}}Tr(t,_,A,M,K,ne,p,f);return;case"select":Z=_=A=X=null;for(p in a)if(M=a[p],a.hasOwnProperty(p)&&M!=null)switch(p){case"value":break;case"multiple":Z=M;default:l.hasOwnProperty(p)||Tt(t,r,p,null,l,M)}for(f in l)if(p=l[f],M=a[f],l.hasOwnProperty(f)&&(p!=null||M!=null))switch(f){case"value":X=p;break;case"defaultValue":A=p;break;case"multiple":_=p;default:p!==M&&Tt(t,r,f,p,l,M)}r=A,a=_,l=Z,X!=null?kt(t,!!a,X,!1):!!l!=!!a&&(r!=null?kt(t,!!a,r,!0):kt(t,!!a,a?[]:"",!1));return;case"textarea":Z=X=null;for(A in a)if(f=a[A],a.hasOwnProperty(A)&&f!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Tt(t,r,A,null,l,f)}for(_ in l)if(f=l[_],p=a[_],l.hasOwnProperty(_)&&(f!=null||p!=null))switch(_){case"value":X=f;break;case"defaultValue":Z=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==p&&Tt(t,r,_,f,l,p)}Wo(t,X,Z);return;case"option":for(var we in a)if(X=a[we],a.hasOwnProperty(we)&&X!=null&&!l.hasOwnProperty(we))switch(we){case"selected":t.selected=!1;break;default:Tt(t,r,we,null,l,X)}for(M in l)if(X=l[M],Z=a[M],l.hasOwnProperty(M)&&X!==Z&&(X!=null||Z!=null))switch(M){case"selected":t.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:Tt(t,r,M,X,l,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in a)X=a[De],a.hasOwnProperty(De)&&X!=null&&!l.hasOwnProperty(De)&&Tt(t,r,De,null,l,X);for(K in l)if(X=l[K],Z=a[K],l.hasOwnProperty(K)&&X!==Z&&(X!=null||Z!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,r));break;default:Tt(t,r,K,X,l,Z)}return;default:if(bs(r)){for(var Nt in a)X=a[Nt],a.hasOwnProperty(Nt)&&X!==void 0&&!l.hasOwnProperty(Nt)&&wp(t,r,Nt,void 0,l,X);for(ne in l)X=l[ne],Z=a[ne],!l.hasOwnProperty(ne)||X===Z||X===void 0&&Z===void 0||wp(t,r,ne,X,l,Z);return}}for(var H in a)X=a[H],a.hasOwnProperty(H)&&X!=null&&!l.hasOwnProperty(H)&&Tt(t,r,H,null,l,X);for(ie in l)X=l[ie],Z=a[ie],!l.hasOwnProperty(ie)||X===Z||X==null&&Z==null||Tt(t,r,ie,X,l,Z)}function ux(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function BN(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],p=f.transferSize,_=f.initiatorType,A=f.duration;if(p&&A&&ux(_)){for(_=0,A=f.responseEnd,l+=1;l<a.length;l++){var M=a[l],K=M.startTime;if(K>A)break;var ne=M.transferSize,ie=M.initiatorType;ne&&ux(ie)&&(M=M.responseEnd,_+=ne*(M<A?1:(A-K)/(M-K)))}if(--l,r+=8*(p+_)/(f.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Ep=null,Tp=null;function bh(t){return t.nodeType===9?t:t.ownerDocument}function dx(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hx(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Np(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Sp=null;function zN(){var t=window.event;return t&&t.type==="popstate"?t===Sp?!1:(Sp=t,!0):(Sp=null,!1)}var fx=typeof setTimeout=="function"?setTimeout:void 0,qN=typeof clearTimeout=="function"?clearTimeout:void 0,mx=typeof Promise=="function"?Promise:void 0,FN=typeof queueMicrotask=="function"?queueMicrotask:typeof mx<"u"?function(t){return mx.resolve(null).then(t).catch(HN)}:fx;function HN(t){setTimeout(function(){throw t})}function mo(t){return t==="head"}function px(t,r){var a=r,l=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(f),hc(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Tu(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Tu(a);for(var p=a.firstChild;p;){var _=p.nextSibling,A=p.nodeName;p[es]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&p.rel.toLowerCase()==="stylesheet"||a.removeChild(p),p=_}}else a==="body"&&Tu(t.ownerDocument.body);a=f}while(a);hc(r)}function gx(t,r){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Ap(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ap(a),Xi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function $N(t,r,a,l){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[es])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=Cs(t.nextSibling),t===null)break}return null}function QN(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Cs(t.nextSibling),t===null))return null;return t}function yx(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Cs(t.nextSibling),t===null))return null;return t}function Cp(t){return t.data==="$?"||t.data==="$~"}function Rp(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function KN(t,r){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Cs(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var Ip=null;function bx(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(r===0)return Cs(t.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}t=t.nextSibling}return null}function vx(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return t;r--}else a!=="/$"&&a!=="/&"||r++}t=t.previousSibling}return null}function xx(t,r,a){switch(r=bh(a),t){case"html":if(t=r.documentElement,!t)throw Error(i(452));return t;case"head":if(t=r.head,!t)throw Error(i(453));return t;case"body":if(t=r.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Tu(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Xi(t)}var Rs=new Map,_x=new Set;function vh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ba=ge.d;ge.d={f:YN,r:XN,D:WN,C:JN,L:ZN,m:eS,X:nS,S:tS,M:rS};function YN(){var t=ba.f(),r=uh();return t||r}function XN(t){var r=kn(t);r!==null&&r.tag===5&&r.type==="form"?Vb(r):ba.r(t)}var cc=typeof document>"u"?null:document;function wx(t,r,a){var l=cc;if(l&&typeof r=="string"&&r){var f=On(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),_x.has(f)||(_x.add(f),t={rel:t,crossOrigin:a,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),Un(r,"link",t),Yt(r),l.head.appendChild(r)))}}function WN(t){ba.D(t),wx("dns-prefetch",t,null)}function JN(t,r){ba.C(t,r),wx("preconnect",t,r)}function ZN(t,r,a){ba.L(t,r,a);var l=cc;if(l&&t&&r){var f='link[rel="preload"][as="'+On(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+On(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+On(a.imageSizes)+'"]')):f+='[href="'+On(t)+'"]';var p=f;switch(r){case"style":p=uc(t);break;case"script":p=dc(t)}Rs.has(p)||(t=S({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Rs.set(p,t),l.querySelector(f)!==null||r==="style"&&l.querySelector(Nu(p))||r==="script"&&l.querySelector(Su(p))||(r=l.createElement("link"),Un(r,"link",t),Yt(r),l.head.appendChild(r)))}}function eS(t,r){ba.m(t,r);var a=cc;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+On(l)+'"][href="'+On(t)+'"]',p=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=dc(t)}if(!Rs.has(p)&&(t=S({rel:"modulepreload",href:t},r),Rs.set(p,t),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Su(p)))return}l=a.createElement("link"),Un(l,"link",t),Yt(l),a.head.appendChild(l)}}}function tS(t,r,a){ba.S(t,r,a);var l=cc;if(l&&t){var f=sr(l).hoistableStyles,p=uc(t);r=r||"default";var _=f.get(p);if(!_){var A={loading:0,preload:null};if(_=l.querySelector(Nu(p)))A.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Rs.get(p))&&jp(t,a);var M=_=l.createElement("link");Yt(M),Un(M,"link",t),M._p=new Promise(function(K,ne){M.onload=K,M.onerror=ne}),M.addEventListener("load",function(){A.loading|=1}),M.addEventListener("error",function(){A.loading|=2}),A.loading|=4,xh(_,r,l)}_={type:"stylesheet",instance:_,count:1,state:A},f.set(p,_)}}}function nS(t,r){ba.X(t,r);var a=cc;if(a&&t){var l=sr(a).hoistableScripts,f=dc(t),p=l.get(f);p||(p=a.querySelector(Su(f)),p||(t=S({src:t,async:!0},r),(r=Rs.get(f))&&Dp(t,r),p=a.createElement("script"),Yt(p),Un(p,"link",t),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function rS(t,r){ba.M(t,r);var a=cc;if(a&&t){var l=sr(a).hoistableScripts,f=dc(t),p=l.get(f);p||(p=a.querySelector(Su(f)),p||(t=S({src:t,async:!0,type:"module"},r),(r=Rs.get(f))&&Dp(t,r),p=a.createElement("script"),Yt(p),Un(p,"link",t),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function Ex(t,r,a,l){var f=(f=ye.current)?vh(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=uc(a.href),a=sr(f).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=uc(a.href);var p=sr(f).hoistableStyles,_=p.get(t);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,_),(p=f.querySelector(Nu(t)))&&!p._p&&(_.instance=p,_.state.loading=5),Rs.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Rs.set(t,a),p||sS(f,t,a,_.state))),r&&l===null)throw Error(i(528,""));return _}if(r&&l!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=dc(a),a=sr(f).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function uc(t){return'href="'+On(t)+'"'}function Nu(t){return'link[rel="stylesheet"]['+t+"]"}function Tx(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function sS(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Un(r,"link",a),Yt(r),t.head.appendChild(r))}function dc(t){return'[src="'+On(t)+'"]'}function Su(t){return"script[async]"+t}function Nx(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+On(a.href)+'"]');if(l)return r.instance=l,Yt(l),l;var f=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Yt(l),Un(l,"style",f),xh(l,a.precedence,t),r.instance=l;case"stylesheet":f=uc(a.href);var p=t.querySelector(Nu(f));if(p)return r.state.loading|=4,r.instance=p,Yt(p),p;l=Tx(a),(f=Rs.get(f))&&jp(l,f),p=(t.ownerDocument||t).createElement("link"),Yt(p);var _=p;return _._p=new Promise(function(A,M){_.onload=A,_.onerror=M}),Un(p,"link",l),r.state.loading|=4,xh(p,a.precedence,t),r.instance=p;case"script":return p=dc(a.src),(f=t.querySelector(Su(p)))?(r.instance=f,Yt(f),f):(l=a,(f=Rs.get(p))&&(l=S({},a),Dp(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),Yt(f),Un(f,"link",l),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,xh(l,a.precedence,t));return r.instance}function xh(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,p=f,_=0;_<l.length;_++){var A=l[_];if(A.dataset.precedence===r)p=A;else if(p!==f)break}p?p.parentNode.insertBefore(t,p.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function jp(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Dp(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var _h=null;function Sx(t,r,a){if(_h===null){var l=new Map,f=_h=new Map;f.set(a,l)}else f=_h,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var p=a[f];if(!(p[es]||p[Bt]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var _=p.getAttribute(r)||"";_=t+_;var A=l.get(_);A?A.push(p):l.set(_,[p])}}return l}function Ax(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function iS(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Cx(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function aS(t,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=uc(l.href),p=r.querySelector(Nu(f));if(p){r=p._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=wh.bind(t),r.then(t,t)),a.state.loading|=4,a.instance=p,Yt(p);return}p=r.ownerDocument||r,l=Tx(l),(f=Rs.get(f))&&jp(l,f),p=p.createElement("link"),Yt(p);var _=p;_._p=new Promise(function(A,M){_.onload=A,_.onerror=M}),Un(p,"link",l),a.instance=p}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=wh.bind(t),r.addEventListener("load",a),r.addEventListener("error",a))}}var kp=0;function oS(t,r){return t.stylesheets&&t.count===0&&Th(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Th(t,t.stylesheets),t.unsuspend){var p=t.unsuspend;t.unsuspend=null,p()}},6e4+r);0<t.imgBytes&&kp===0&&(kp=62500*BN());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Th(t,t.stylesheets),t.unsuspend)){var p=t.unsuspend;t.unsuspend=null,p()}},(t.imgBytes>kp?50:800)+r);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function wh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Th(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Eh=null;function Th(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Eh=new Map,r.forEach(lS,t),Eh=null,wh.call(t))}function lS(t,r){if(!(r.state.loading&4)){var a=Eh.get(t);if(a)var l=a.get(null);else{a=new Map,Eh.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var _=f[p];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=r.instance,_=f.getAttribute("data-precedence"),p=a.get(_)||l,p===l&&a.set(null,f),a.set(_,f),this.count++,l=wh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),p?p.parentNode.insertBefore(f,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var Au={$$typeof:oe,Provider:null,Consumer:null,_currentValue:Ne,_currentValue2:Ne,_threadCount:0};function cS(t,r,a,l,f,p,_,A,M){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.hiddenUpdates=gt(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function Rx(t,r,a,l,f,p,_,A,M,K,ne,ie){return t=new cS(t,r,a,_,M,K,ne,ie,A),r=1,p===!0&&(r|=24),p=ur(3,null,null,r),t.current=p,p.stateNode=t,r=ae(),r.refCount++,t.pooledCache=r,r.refCount++,p.memoizedState={element:l,isDehydrated:a,cache:r},gm(p),t}function Ix(t){return t?(t=Xa,t):Xa}function jx(t,r,a,l,f,p){f=Ix(f),l.context===null?l.context=f:l.pendingContext=f,l=no(r),l.payload={element:a},p=p===void 0?null:p,p!==null&&(l.callback=p),a=ro(t,l,r),a!==null&&(qr(a,t,r),iu(a,t,r))}function Dx(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function Op(t,r){Dx(t,r),(t=t.alternate)&&Dx(t,r)}function kx(t){if(t.tag===13||t.tag===31){var r=Ni(t,67108864);r!==null&&qr(r,t,67108864),Op(t,67108864)}}function Ox(t){if(t.tag===13||t.tag===31){var r=ds();r=Ms(r);var a=Ni(t,r);a!==null&&qr(a,t,r),Op(t,r)}}var Nh=!0;function uS(t,r,a,l){var f=ee.T;ee.T=null;var p=ge.p;try{ge.p=2,Gp(t,r,a,l)}finally{ge.p=p,ee.T=f}}function dS(t,r,a,l){var f=ee.T;ee.T=null;var p=ge.p;try{ge.p=8,Gp(t,r,a,l)}finally{ge.p=p,ee.T=f}}function Gp(t,r,a,l){if(Nh){var f=Mp(l);if(f===null)_p(t,r,l,Sh,a),Mx(t,l);else if(fS(f,t,r,a,l))l.stopPropagation();else if(Mx(t,l),r&4&&-1<hS.indexOf(t)){for(;f!==null;){var p=kn(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var _=Kt(p.pendingLanes);if(_!==0){var A=p;for(A.pendingLanes|=2,A.entangledLanes|=2;_;){var M=1<<31-lt(_);A.entanglements[1]|=M,_&=~M}ki(p),(pt&6)===0&&(lh=Pe()+500,_u(0))}}break;case 31:case 13:A=Ni(p,2),A!==null&&qr(A,p,2),uh(),Op(p,2)}if(p=Mp(l),p===null&&_p(t,r,l,Sh,a),p===f)break;f=p}f!==null&&l.stopPropagation()}else _p(t,r,l,null,a)}}function Mp(t){return t=ar(t),Pp(t)}var Sh=null;function Pp(t){if(Sh=null,t=_r(t),t!==null){var r=c(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=h(r),t!==null)return t;t=null}else if(a===31){if(t=g(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Sh=t,null}function Gx(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xr()){case Da:return 2;case Wr:return 8;case de:case Rn:return 32;case ct:return 268435456;default:return 32}default:return 32}}var Vp=!1,po=null,go=null,yo=null,Cu=new Map,Ru=new Map,bo=[],hS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Mx(t,r){switch(t){case"focusin":case"focusout":po=null;break;case"dragenter":case"dragleave":go=null;break;case"mouseover":case"mouseout":yo=null;break;case"pointerover":case"pointerout":Cu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ru.delete(r.pointerId)}}function Iu(t,r,a,l,f,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:p,targetContainers:[f]},r!==null&&(r=kn(r),r!==null&&kx(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function fS(t,r,a,l,f){switch(r){case"focusin":return po=Iu(po,t,r,a,l,f),!0;case"dragenter":return go=Iu(go,t,r,a,l,f),!0;case"mouseover":return yo=Iu(yo,t,r,a,l,f),!0;case"pointerover":var p=f.pointerId;return Cu.set(p,Iu(Cu.get(p)||null,t,r,a,l,f)),!0;case"gotpointercapture":return p=f.pointerId,Ru.set(p,Iu(Ru.get(p)||null,t,r,a,l,f)),!0}return!1}function Px(t){var r=_r(t.target);if(r!==null){var a=c(r);if(a!==null){if(r=a.tag,r===13){if(r=h(a),r!==null){t.blockedOn=r,vr(t.priority,function(){Ox(a)});return}}else if(r===31){if(r=g(a),r!==null){t.blockedOn=r,vr(t.priority,function(){Ox(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ah(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=Mp(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Sr=l,a.target.dispatchEvent(l),Sr=null}else return r=kn(a),r!==null&&kx(r),t.blockedOn=a,!1;r.shift()}return!0}function Vx(t,r,a){Ah(t)&&a.delete(r)}function mS(){Vp=!1,po!==null&&Ah(po)&&(po=null),go!==null&&Ah(go)&&(go=null),yo!==null&&Ah(yo)&&(yo=null),Cu.forEach(Vx),Ru.forEach(Vx)}function Ch(t,r){t.blockedOn===r&&(t.blockedOn=null,Vp||(Vp=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,mS)))}var Rh=null;function Ux(t){Rh!==t&&(Rh=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Rh===t&&(Rh=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],f=t[r+2];if(typeof l!="function"){if(Pp(l||a)===null)continue;break}var p=kn(a);p!==null&&(t.splice(r,3),r-=3,Mm(p,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function hc(t){function r(M){return Ch(M,t)}po!==null&&Ch(po,t),go!==null&&Ch(go,t),yo!==null&&Ch(yo,t),Cu.forEach(r),Ru.forEach(r);for(var a=0;a<bo.length;a++){var l=bo[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<bo.length&&(a=bo[0],a.blockedOn===null);)Px(a),a.blockedOn===null&&bo.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],p=a[l+1],_=f[on]||null;if(typeof p=="function")_||Ux(a);else if(_){var A=null;if(p&&p.hasAttribute("formAction")){if(f=p,_=p[on]||null)A=_.formAction;else if(Pp(f)!==null)continue}else A=_.action;typeof A=="function"?a[l+1]=A:(a.splice(l,3),l-=3),Ux(a)}}}function Lx(){function t(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function Up(t){this._internalRoot=t}Ih.prototype.render=Up.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,l=ds();jx(a,l,t,r,null,null)},Ih.prototype.unmount=Up.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;jx(t.current,2,null,t,null,null),uh(),r[Zr]=null}};function Ih(t){this._internalRoot=t}Ih.prototype.unstable_scheduleHydration=function(t){if(t){var r=Vs();t={blockedOn:null,target:t,priority:r};for(var a=0;a<bo.length&&r!==0&&r<bo[a].priority;a++);bo.splice(a,0,t),a===0&&Px(t)}};var Bx=e.version;if(Bx!=="19.2.0")throw Error(i(527,Bx,"19.2.0"));ge.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=v(r),t=t!==null?E(t):null,t=t===null?null:t.stateNode,t};var pS={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jh.isDisabled&&jh.supportsFiber)try{wt=jh.inject(pS),Lt=jh}catch{}}return Du.createRoot=function(t,r){if(!o(t))throw Error(i(299));var a=!1,l="",f=Kb,p=Yb,_=Xb;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(p=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=Rx(t,1,!1,null,null,a,l,null,f,p,_,Lx),t[Zr]=r.current,xp(t),new Up(r)},Du.hydrateRoot=function(t,r,a){if(!o(t))throw Error(i(299));var l=!1,f="",p=Kb,_=Yb,A=Xb,M=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.formState!==void 0&&(M=a.formState)),r=Rx(t,1,!0,r,a??null,l,f,M,p,_,A,Lx),r.context=Ix(null),a=r.current,l=ds(),l=Ms(l),f=no(l),f.callback=null,ro(a,f,l),a=l,r.current.lanes=a,oi(r,a),ki(r),t[Zr]=r.current,xp(t),new Ih(r)},Du.version="19.2.0",Du}var Wx;function NS(){if(Wx)return zp.exports;Wx=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),zp.exports=TS(),zp.exports}var SS=NS();var Jx="popstate";function AS(s={}){function e(i,o){let{pathname:c,search:h,hash:g}=i.location;return dg("",{pathname:c,search:h,hash:g},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){return typeof o=="string"?o:Zu(o)}return RS(e,n,null,s)}function Ht(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function ks(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function CS(){return Math.random().toString(36).substring(2,10)}function Zx(s,e){return{usr:s.state,key:s.key,idx:e}}function dg(s,e,n=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Oc(e):e,state:n,key:e&&e.key||i||CS()}}function Zu({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Oc(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function RS(s,e,n,i={}){let{window:o=document.defaultView,v5Compat:c=!1}=i,h=o.history,g="POP",y=null,v=E();v==null&&(v=0,h.replaceState({...h.state,idx:v},""));function E(){return(h.state||{idx:null}).idx}function S(){g="POP";let Y=E(),ue=Y==null?null:Y-v;v=Y,y&&y({action:g,location:te.location,delta:ue})}function I(Y,ue){g="PUSH";let fe=dg(te.location,Y,ue);v=E()+1;let oe=Zx(fe,v),_e=te.createHref(fe);try{h.pushState(oe,"",_e)}catch(ke){if(ke instanceof DOMException&&ke.name==="DataCloneError")throw ke;o.location.assign(_e)}c&&y&&y({action:g,location:te.location,delta:1})}function q(Y,ue){g="REPLACE";let fe=dg(te.location,Y,ue);v=E();let oe=Zx(fe,v),_e=te.createHref(fe);h.replaceState(oe,"",_e),c&&y&&y({action:g,location:te.location,delta:0})}function W(Y){return IS(Y)}let te={get action(){return g},get location(){return s(o,h)},listen(Y){if(y)throw new Error("A history only accepts one active listener");return o.addEventListener(Jx,S),y=Y,()=>{o.removeEventListener(Jx,S),y=null}},createHref(Y){return e(o,Y)},createURL:W,encodeLocation(Y){let ue=W(Y);return{pathname:ue.pathname,search:ue.search,hash:ue.hash}},push:I,replace:q,go(Y){return h.go(Y)}};return te}function IS(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ht(n,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:Zu(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function K_(s,e,n="/"){return jS(s,e,n,!1)}function jS(s,e,n,i){let o=typeof e=="string"?Oc(e):e,c=Ea(o.pathname||"/",n);if(c==null)return null;let h=Y_(s);DS(h);let g=null;for(let y=0;g==null&&y<h.length;++y){let v=qS(c);g=BS(h[y],v,i)}return g}function Y_(s,e=[],n=[],i="",o=!1){let c=(h,g,y=o,v)=>{let E={relativePath:v===void 0?h.path||"":v,caseSensitive:h.caseSensitive===!0,childrenIndex:g,route:h};if(E.relativePath.startsWith("/")){if(!E.relativePath.startsWith(i)&&y)return;Ht(E.relativePath.startsWith(i),`Absolute route path "${E.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(i.length)}let S=wa([i,E.relativePath]),I=n.concat(E);h.children&&h.children.length>0&&(Ht(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),Y_(h.children,e,I,S,y)),!(h.path==null&&!h.index)&&e.push({path:S,score:US(S,h.index),routesMeta:I})};return s.forEach((h,g)=>{if(h.path===""||!h.path?.includes("?"))c(h,g);else for(let y of X_(h.path))c(h,g,!0,y)}),e}function X_(s){let e=s.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(i.length===0)return o?[c,""]:[c];let h=X_(i.join("/")),g=[];return g.push(...h.map(y=>y===""?c:[c,y].join("/"))),o&&g.push(...h),g.map(y=>s.startsWith("/")&&y===""?"/":y)}function DS(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:LS(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var kS=/^:[\w-]+$/,OS=3,GS=2,MS=1,PS=10,VS=-2,e0=s=>s==="*";function US(s,e){let n=s.split("/"),i=n.length;return n.some(e0)&&(i+=VS),e&&(i+=GS),n.filter(o=>!e0(o)).reduce((o,c)=>o+(kS.test(c)?OS:c===""?MS:PS),i)}function LS(s,e){return s.length===e.length&&s.slice(0,-1).every((i,o)=>i===e[o])?s[s.length-1]-e[e.length-1]:0}function BS(s,e,n=!1){let{routesMeta:i}=s,o={},c="/",h=[];for(let g=0;g<i.length;++g){let y=i[g],v=g===i.length-1,E=c==="/"?e:e.slice(c.length)||"/",S=uf({path:y.relativePath,caseSensitive:y.caseSensitive,end:v},E),I=y.route;if(!S&&v&&n&&!i[i.length-1].route.index&&(S=uf({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},E)),!S)return null;Object.assign(o,S.params),h.push({params:o,pathname:wa([c,S.pathname]),pathnameBase:KS(wa([c,S.pathnameBase])),route:I}),S.pathnameBase!=="/"&&(c=wa([c,S.pathnameBase]))}return h}function uf(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,i]=zS(s.path,s.caseSensitive,s.end),o=e.match(n);if(!o)return null;let c=o[0],h=c.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:i.reduce((v,{paramName:E,isOptional:S},I)=>{if(E==="*"){let W=g[I]||"";h=c.slice(0,c.length-W.length).replace(/(.)\/+$/,"$1")}const q=g[I];return S&&!q?v[E]=void 0:v[E]=(q||"").replace(/%2F/g,"/"),v},{}),pathname:c,pathnameBase:h,pattern:s}}function zS(s,e=!1,n=!0){ks(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,g,y)=>(i.push({paramName:g,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function qS(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ks(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Ea(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=s.charAt(n);return i&&i!=="/"?null:s.slice(n)||"/"}var FS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,HS=s=>FS.test(s);function $S(s,e="/"){let{pathname:n,search:i="",hash:o=""}=typeof s=="string"?Oc(s):s,c;if(n)if(HS(n))c=n;else{if(n.includes("//")){let h=n;n=n.replace(/\/\/+/g,"/"),ks(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${n}`)}n.startsWith("/")?c=t0(n.substring(1),"/"):c=t0(n,e)}else c=e;return{pathname:c,search:YS(i),hash:XS(o)}}function t0(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function $p(s,e,n,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function QS(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function zg(s){let e=QS(s);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function qg(s,e,n,i=!1){let o;typeof s=="string"?o=Oc(s):(o={...s},Ht(!o.pathname||!o.pathname.includes("?"),$p("?","pathname","search",o)),Ht(!o.pathname||!o.pathname.includes("#"),$p("#","pathname","hash",o)),Ht(!o.search||!o.search.includes("#"),$p("#","search","hash",o)));let c=s===""||o.pathname==="",h=c?"/":o.pathname,g;if(h==null)g=n;else{let S=e.length-1;if(!i&&h.startsWith("..")){let I=h.split("/");for(;I[0]==="..";)I.shift(),S-=1;o.pathname=I.join("/")}g=S>=0?e[S]:"/"}let y=$S(o,g),v=h&&h!=="/"&&h.endsWith("/"),E=(c||h===".")&&n.endsWith("/");return!y.pathname.endsWith("/")&&(v||E)&&(y.pathname+="/"),y}var wa=s=>s.join("/").replace(/\/\/+/g,"/"),KS=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),YS=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,XS=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function WS(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var W_=["POST","PUT","PATCH","DELETE"];new Set(W_);var JS=["GET",...W_];new Set(JS);var Gc=R.createContext(null);Gc.displayName="DataRouter";var Df=R.createContext(null);Df.displayName="DataRouterState";R.createContext(!1);var J_=R.createContext({isTransitioning:!1});J_.displayName="ViewTransition";var ZS=R.createContext(new Map);ZS.displayName="Fetchers";var eA=R.createContext(null);eA.displayName="Await";var ii=R.createContext(null);ii.displayName="Navigation";var cd=R.createContext(null);cd.displayName="Location";var Fi=R.createContext({outlet:null,matches:[],isDataRoute:!1});Fi.displayName="Route";var Fg=R.createContext(null);Fg.displayName="RouteError";function tA(s,{relative:e}={}){Ht(Mc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=R.useContext(ii),{hash:o,pathname:c,search:h}=ud(s,{relative:e}),g=c;return n!=="/"&&(g=c==="/"?n:wa([n,c])),i.createHref({pathname:g,search:h,hash:o})}function Mc(){return R.useContext(cd)!=null}function Bo(){return Ht(Mc(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(cd).location}var Z_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ew(s){R.useContext(ii).static||R.useLayoutEffect(s)}function tw(){let{isDataRoute:s}=R.useContext(Fi);return s?mA():nA()}function nA(){Ht(Mc(),"useNavigate() may be used only in the context of a <Router> component.");let s=R.useContext(Gc),{basename:e,navigator:n}=R.useContext(ii),{matches:i}=R.useContext(Fi),{pathname:o}=Bo(),c=JSON.stringify(zg(i)),h=R.useRef(!1);return ew(()=>{h.current=!0}),R.useCallback((y,v={})=>{if(ks(h.current,Z_),!h.current)return;if(typeof y=="number"){n.go(y);return}let E=qg(y,JSON.parse(c),o,v.relative==="path");s==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:wa([e,E.pathname])),(v.replace?n.replace:n.push)(E,v.state,v)},[e,n,c,o,s])}R.createContext(null);function ud(s,{relative:e}={}){let{matches:n}=R.useContext(Fi),{pathname:i}=Bo(),o=JSON.stringify(zg(n));return R.useMemo(()=>qg(s,JSON.parse(o),i,e==="path"),[s,o,i,e])}function rA(s,e){return nw(s,e)}function nw(s,e,n,i,o){Ht(Mc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=R.useContext(ii),{matches:h}=R.useContext(Fi),g=h[h.length-1],y=g?g.params:{},v=g?g.pathname:"/",E=g?g.pathnameBase:"/",S=g&&g.route;{let fe=S&&S.path||"";rw(v,!S||fe.endsWith("*")||fe.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${fe}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${fe}"> to <Route path="${fe==="/"?"*":`${fe}/*`}">.`)}let I=Bo(),q;if(e){let fe=typeof e=="string"?Oc(e):e;Ht(E==="/"||fe.pathname?.startsWith(E),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${fe.pathname}" was given in the \`location\` prop.`),q=fe}else q=I;let W=q.pathname||"/",te=W;if(E!=="/"){let fe=E.replace(/^\//,"").split("/");te="/"+W.replace(/^\//,"").split("/").slice(fe.length).join("/")}let Y=K_(s,{pathname:te});ks(S||Y!=null,`No routes matched location "${q.pathname}${q.search}${q.hash}" `),ks(Y==null||Y[Y.length-1].route.element!==void 0||Y[Y.length-1].route.Component!==void 0||Y[Y.length-1].route.lazy!==void 0,`Matched leaf route at location "${q.pathname}${q.search}${q.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ue=lA(Y&&Y.map(fe=>Object.assign({},fe,{params:Object.assign({},y,fe.params),pathname:wa([E,c.encodeLocation?c.encodeLocation(fe.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:fe.pathname]),pathnameBase:fe.pathnameBase==="/"?E:wa([E,c.encodeLocation?c.encodeLocation(fe.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:fe.pathnameBase])})),h,n,i,o);return e&&ue?R.createElement(cd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...q},navigationType:"POP"}},ue):ue}function sA(){let s=fA(),e=WS(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},c={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",s),h=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:c},"ErrorBoundary")," or"," ",R.createElement("code",{style:c},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:o},n):null,h)}var iA=R.createElement(sA,null),aA=class extends R.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?R.createElement(Fi.Provider,{value:this.props.routeContext},R.createElement(Fg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function oA({routeContext:s,match:e,children:n}){let i=R.useContext(Gc);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(Fi.Provider,{value:s},n)}function lA(s,e=[],n=null,i=null,o=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let c=s,h=n?.errors;if(h!=null){let E=c.findIndex(S=>S.route.id&&h?.[S.route.id]!==void 0);Ht(E>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),c=c.slice(0,Math.min(c.length,E+1))}let g=!1,y=-1;if(n)for(let E=0;E<c.length;E++){let S=c[E];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(y=E),S.route.id){let{loaderData:I,errors:q}=n,W=S.route.loader&&!I.hasOwnProperty(S.route.id)&&(!q||q[S.route.id]===void 0);if(S.route.lazy||W){g=!0,y>=0?c=c.slice(0,y+1):c=[c[0]];break}}}let v=n&&i?(E,S)=>{i(E,{location:n.location,params:n.matches?.[0]?.params??{},errorInfo:S})}:void 0;return c.reduceRight((E,S,I)=>{let q,W=!1,te=null,Y=null;n&&(q=h&&S.route.id?h[S.route.id]:void 0,te=S.route.errorElement||iA,g&&(y<0&&I===0?(rw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),W=!0,Y=null):y===I&&(W=!0,Y=S.route.hydrateFallbackElement||null)));let ue=e.concat(c.slice(0,I+1)),fe=()=>{let oe;return q?oe=te:W?oe=Y:S.route.Component?oe=R.createElement(S.route.Component,null):S.route.element?oe=S.route.element:oe=E,R.createElement(oA,{match:S,routeContext:{outlet:E,matches:ue,isDataRoute:n!=null},children:oe})};return n&&(S.route.ErrorBoundary||S.route.errorElement||I===0)?R.createElement(aA,{location:n.location,revalidation:n.revalidation,component:te,error:q,children:fe(),routeContext:{outlet:null,matches:ue,isDataRoute:!0},onError:v}):fe()},null)}function Hg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cA(s){let e=R.useContext(Gc);return Ht(e,Hg(s)),e}function uA(s){let e=R.useContext(Df);return Ht(e,Hg(s)),e}function dA(s){let e=R.useContext(Fi);return Ht(e,Hg(s)),e}function $g(s){let e=dA(s),n=e.matches[e.matches.length-1];return Ht(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function hA(){return $g("useRouteId")}function fA(){let s=R.useContext(Fg),e=uA("useRouteError"),n=$g("useRouteError");return s!==void 0?s:e.errors?.[n]}function mA(){let{router:s}=cA("useNavigate"),e=$g("useNavigate"),n=R.useRef(!1);return ew(()=>{n.current=!0}),R.useCallback(async(o,c={})=>{ks(n.current,Z_),n.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:e,...c}))},[s,e])}var n0={};function rw(s,e,n){!e&&!n0[s]&&(n0[s]=!0,ks(!1,n))}R.memo(pA);function pA({routes:s,future:e,state:n,unstable_onError:i}){return nw(s,void 0,n,i,e)}function gA({to:s,replace:e,state:n,relative:i}){Ht(Mc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=R.useContext(ii);ks(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=R.useContext(Fi),{pathname:h}=Bo(),g=tw(),y=qg(s,zg(c),h,i==="path"),v=JSON.stringify(y);return R.useEffect(()=>{g(JSON.parse(v),{replace:e,state:n,relative:i})},[g,v,i,e,n]),null}function Vu(s){Ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function yA({basename:s="/",children:e=null,location:n,navigationType:i="POP",navigator:o,static:c=!1}){Ht(!Mc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=s.replace(/^\/*/,"/"),g=R.useMemo(()=>({basename:h,navigator:o,static:c,future:{}}),[h,o,c]);typeof n=="string"&&(n=Oc(n));let{pathname:y="/",search:v="",hash:E="",state:S=null,key:I="default"}=n,q=R.useMemo(()=>{let W=Ea(y,h);return W==null?null:{location:{pathname:W,search:v,hash:E,state:S,key:I},navigationType:i}},[h,y,v,E,S,I,i]);return ks(q!=null,`<Router basename="${h}"> is not able to match the URL "${y}${v}${E}" because it does not start with the basename, so the <Router> won't render anything.`),q==null?null:R.createElement(ii.Provider,{value:g},R.createElement(cd.Provider,{children:e,value:q}))}function bA({children:s,location:e}){return rA(hg(s),e)}function hg(s,e=[]){let n=[];return R.Children.forEach(s,(i,o)=>{if(!R.isValidElement(i))return;let c=[...e,o];if(i.type===R.Fragment){n.push.apply(n,hg(i.props.children,c));return}Ht(i.type===Vu,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ht(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=hg(i.props.children,c)),n.push(h)}),n}var Yh="get",Xh="application/x-www-form-urlencoded";function kf(s){return s!=null&&typeof s.tagName=="string"}function vA(s){return kf(s)&&s.tagName.toLowerCase()==="button"}function xA(s){return kf(s)&&s.tagName.toLowerCase()==="form"}function _A(s){return kf(s)&&s.tagName.toLowerCase()==="input"}function wA(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function EA(s,e){return s.button===0&&(!e||e==="_self")&&!wA(s)}var Dh=null;function TA(){if(Dh===null)try{new FormData(document.createElement("form"),0),Dh=!1}catch{Dh=!0}return Dh}var NA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qp(s){return s!=null&&!NA.has(s)?(ks(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xh}"`),null):s}function SA(s,e){let n,i,o,c,h;if(xA(s)){let g=s.getAttribute("action");i=g?Ea(g,e):null,n=s.getAttribute("method")||Yh,o=Qp(s.getAttribute("enctype"))||Xh,c=new FormData(s)}else if(vA(s)||_A(s)&&(s.type==="submit"||s.type==="image")){let g=s.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=s.getAttribute("formaction")||g.getAttribute("action");if(i=y?Ea(y,e):null,n=s.getAttribute("formmethod")||g.getAttribute("method")||Yh,o=Qp(s.getAttribute("formenctype"))||Qp(g.getAttribute("enctype"))||Xh,c=new FormData(g,s),!TA()){let{name:v,type:E,value:S}=s;if(E==="image"){let I=v?`${v}.`:"";c.append(`${I}x`,"0"),c.append(`${I}y`,"0")}else v&&c.append(v,S)}}else{if(kf(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Yh,i=null,o=Xh,h=s}return c&&o==="text/plain"&&(h=c,c=void 0),{action:i,method:n.toLowerCase(),encType:o,formData:c,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Qg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function AA(s,e,n){let i=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&Ea(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function CA(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function RA(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function IA(s,e,n){let i=await Promise.all(s.map(async o=>{let c=e.routes[o.route.id];if(c){let h=await CA(c,n);return h.links?h.links():[]}return[]}));return OA(i.flat(1).filter(RA).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function r0(s,e,n,i,o,c){let h=(y,v)=>n[v]?y.route.id!==n[v].route.id:!0,g=(y,v)=>n[v].pathname!==y.pathname||n[v].route.path?.endsWith("*")&&n[v].params["*"]!==y.params["*"];return c==="assets"?e.filter((y,v)=>h(y,v)||g(y,v)):c==="data"?e.filter((y,v)=>{let E=i.routes[y.route.id];if(!E||!E.hasLoader)return!1;if(h(y,v)||g(y,v))return!0;if(y.route.shouldRevalidate){let S=y.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function jA(s,e,{includeHydrateFallback:n}={}){return DA(s.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function DA(s){return[...new Set(s)]}function kA(s){let e={},n=Object.keys(s).sort();for(let i of n)e[i]=s[i];return e}function OA(s,e){let n=new Set;return new Set(e),s.reduce((i,o)=>{let c=JSON.stringify(kA(o));return n.has(c)||(n.add(c),i.push({key:c,link:o})),i},[])}function sw(){let s=R.useContext(Gc);return Qg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function GA(){let s=R.useContext(Df);return Qg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Kg=R.createContext(void 0);Kg.displayName="FrameworkContext";function iw(){let s=R.useContext(Kg);return Qg(s,"You must render this element inside a <HydratedRouter> element"),s}function MA(s,e){let n=R.useContext(Kg),[i,o]=R.useState(!1),[c,h]=R.useState(!1),{onFocus:g,onBlur:y,onMouseEnter:v,onMouseLeave:E,onTouchStart:S}=e,I=R.useRef(null);R.useEffect(()=>{if(s==="render"&&h(!0),s==="viewport"){let te=ue=>{ue.forEach(fe=>{h(fe.isIntersecting)})},Y=new IntersectionObserver(te,{threshold:.5});return I.current&&Y.observe(I.current),()=>{Y.disconnect()}}},[s]),R.useEffect(()=>{if(i){let te=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(te)}}},[i]);let q=()=>{o(!0)},W=()=>{o(!1),h(!1)};return n?s!=="intent"?[c,I,{}]:[c,I,{onFocus:ku(g,q),onBlur:ku(y,W),onMouseEnter:ku(v,q),onMouseLeave:ku(E,W),onTouchStart:ku(S,q)}]:[!1,I,{}]}function ku(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function PA({page:s,...e}){let{router:n}=sw(),i=R.useMemo(()=>K_(n.routes,s,n.basename),[n.routes,s,n.basename]);return i?R.createElement(UA,{page:s,matches:i,...e}):null}function VA(s){let{manifest:e,routeModules:n}=iw(),[i,o]=R.useState([]);return R.useEffect(()=>{let c=!1;return IA(s,e,n).then(h=>{c||o(h)}),()=>{c=!0}},[s,e,n]),i}function UA({page:s,matches:e,...n}){let i=Bo(),{manifest:o,routeModules:c}=iw(),{basename:h}=sw(),{loaderData:g,matches:y}=GA(),v=R.useMemo(()=>r0(s,e,y,o,i,"data"),[s,e,y,o,i]),E=R.useMemo(()=>r0(s,e,y,o,i,"assets"),[s,e,y,o,i]),S=R.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let W=new Set,te=!1;if(e.forEach(ue=>{let fe=o.routes[ue.route.id];!fe||!fe.hasLoader||(!v.some(oe=>oe.route.id===ue.route.id)&&ue.route.id in g&&c[ue.route.id]?.shouldRevalidate||fe.hasClientLoader?te=!0:W.add(ue.route.id))}),W.size===0)return[];let Y=AA(s,h,"data");return te&&W.size>0&&Y.searchParams.set("_routes",e.filter(ue=>W.has(ue.route.id)).map(ue=>ue.route.id).join(",")),[Y.pathname+Y.search]},[h,g,i,o,v,e,s,c]),I=R.useMemo(()=>jA(E,o),[E,o]),q=VA(E);return R.createElement(R.Fragment,null,S.map(W=>R.createElement("link",{key:W,rel:"prefetch",as:"fetch",href:W,...n})),I.map(W=>R.createElement("link",{key:W,rel:"modulepreload",href:W,...n})),q.map(({key:W,link:te})=>R.createElement("link",{key:W,nonce:n.nonce,...te})))}function LA(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var aw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{aw&&(window.__reactRouterVersion="7.9.6")}catch{}function BA({basename:s,children:e,window:n}){let i=R.useRef();i.current==null&&(i.current=AS({window:n,v5Compat:!0}));let o=i.current,[c,h]=R.useState({action:o.action,location:o.location}),g=R.useCallback(y=>{R.startTransition(()=>h(y))},[h]);return R.useLayoutEffect(()=>o.listen(g),[o,g]),R.createElement(yA,{basename:s,children:e,location:c.location,navigationType:c.action,navigator:o})}var ow=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yc=R.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:o,reloadDocument:c,replace:h,state:g,target:y,to:v,preventScrollReset:E,viewTransition:S,...I},q){let{basename:W}=R.useContext(ii),te=typeof v=="string"&&ow.test(v),Y,ue=!1;if(typeof v=="string"&&te&&(Y=v,aw))try{let k=new URL(window.location.href),z=v.startsWith("//")?new URL(k.protocol+v):new URL(v),P=Ea(z.pathname,W);z.origin===k.origin&&P!=null?v=P+z.search+z.hash:ue=!0}catch{ks(!1,`<Link to="${v}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let fe=tA(v,{relative:o}),[oe,_e,ke]=MA(i,I),Me=HA(v,{replace:h,state:g,target:y,preventScrollReset:E,relative:o,viewTransition:S});function O(k){e&&e(k),k.defaultPrevented||Me(k)}let D=R.createElement("a",{...I,...ke,href:Y||fe,onClick:ue||c?e:O,ref:LA(q,_e),target:y,"data-discover":!te&&n==="render"?"true":void 0});return oe&&!te?R.createElement(R.Fragment,null,D,R.createElement(PA,{page:fe})):D});yc.displayName="Link";var zA=R.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:o=!1,style:c,to:h,viewTransition:g,children:y,...v},E){let S=ud(h,{relative:v.relative}),I=Bo(),q=R.useContext(Df),{navigator:W,basename:te}=R.useContext(ii),Y=q!=null&&XA(S)&&g===!0,ue=W.encodeLocation?W.encodeLocation(S).pathname:S.pathname,fe=I.pathname,oe=q&&q.navigation&&q.navigation.location?q.navigation.location.pathname:null;n||(fe=fe.toLowerCase(),oe=oe?oe.toLowerCase():null,ue=ue.toLowerCase()),oe&&te&&(oe=Ea(oe,te)||oe);const _e=ue!=="/"&&ue.endsWith("/")?ue.length-1:ue.length;let ke=fe===ue||!o&&fe.startsWith(ue)&&fe.charAt(_e)==="/",Me=oe!=null&&(oe===ue||!o&&oe.startsWith(ue)&&oe.charAt(ue.length)==="/"),O={isActive:ke,isPending:Me,isTransitioning:Y},D=ke?e:void 0,k;typeof i=="function"?k=i(O):k=[i,ke?"active":null,Me?"pending":null,Y?"transitioning":null].filter(Boolean).join(" ");let z=typeof c=="function"?c(O):c;return R.createElement(yc,{...v,"aria-current":D,className:k,ref:E,style:z,to:h,viewTransition:g},typeof y=="function"?y(O):y)});zA.displayName="NavLink";var qA=R.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:o,state:c,method:h=Yh,action:g,onSubmit:y,relative:v,preventScrollReset:E,viewTransition:S,...I},q)=>{let W=KA(),te=YA(g,{relative:v}),Y=h.toLowerCase()==="get"?"get":"post",ue=typeof g=="string"&&ow.test(g),fe=oe=>{if(y&&y(oe),oe.defaultPrevented)return;oe.preventDefault();let _e=oe.nativeEvent.submitter,ke=_e?.getAttribute("formmethod")||h;W(_e||oe.currentTarget,{fetcherKey:e,method:ke,navigate:n,replace:o,state:c,relative:v,preventScrollReset:E,viewTransition:S})};return R.createElement("form",{ref:q,method:Y,action:te,onSubmit:i?y:fe,...I,"data-discover":!ue&&s==="render"?"true":void 0})});qA.displayName="Form";function FA(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lw(s){let e=R.useContext(Gc);return Ht(e,FA(s)),e}function HA(s,{target:e,replace:n,state:i,preventScrollReset:o,relative:c,viewTransition:h}={}){let g=tw(),y=Bo(),v=ud(s,{relative:c});return R.useCallback(E=>{if(EA(E,e)){E.preventDefault();let S=n!==void 0?n:Zu(y)===Zu(v);g(s,{replace:S,state:i,preventScrollReset:o,relative:c,viewTransition:h})}},[y,g,v,n,i,e,s,o,c,h])}var $A=0,QA=()=>`__${String(++$A)}__`;function KA(){let{router:s}=lw("useSubmit"),{basename:e}=R.useContext(ii),n=hA();return R.useCallback(async(i,o={})=>{let{action:c,method:h,encType:g,formData:y,body:v}=SA(i,e);if(o.navigate===!1){let E=o.fetcherKey||QA();await s.fetch(E,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:y,body:v,formMethod:o.method||h,formEncType:o.encType||g,flushSync:o.flushSync})}else await s.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:y,body:v,formMethod:o.method||h,formEncType:o.encType||g,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,e,n])}function YA(s,{relative:e}={}){let{basename:n}=R.useContext(ii),i=R.useContext(Fi);Ht(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),c={...ud(s||".",{relative:e})},h=Bo();if(s==null){c.search=h.search;let g=new URLSearchParams(c.search),y=g.getAll("index");if(y.some(E=>E==="")){g.delete("index"),y.filter(S=>S).forEach(S=>g.append("index",S));let E=g.toString();c.search=E?`?${E}`:""}}return(!s||s===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:wa([n,c.pathname])),Zu(c)}function XA(s,{relative:e}={}){let n=R.useContext(J_);Ht(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=lw("useViewTransitionState"),o=ud(s,{relative:e});if(!n.isTransitioning)return!1;let c=Ea(n.currentLocation.pathname,i)||n.currentLocation.pathname,h=Ea(n.nextLocation.pathname,i)||n.nextLocation.pathname;return uf(o.pathname,h)!=null||uf(o.pathname,c)!=null}const WA=()=>{};var s0={};const cw=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},JA=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const o=s[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[n++];e[i++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[n++],h=s[n++],g=s[n++],y=((o&7)<<18|(c&63)<<12|(h&63)<<6|g&63)-65536;e[i++]=String.fromCharCode(55296+(y>>10)),e[i++]=String.fromCharCode(56320+(y&1023))}else{const c=s[n++],h=s[n++];e[i++]=String.fromCharCode((o&15)<<12|(c&63)<<6|h&63)}}return e.join("")},uw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const c=s[o],h=o+1<s.length,g=h?s[o+1]:0,y=o+2<s.length,v=y?s[o+2]:0,E=c>>2,S=(c&3)<<4|g>>4;let I=(g&15)<<2|v>>6,q=v&63;y||(q=64,h||(I=64)),i.push(n[E],n[S],n[I],n[q])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(cw(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):JA(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const c=n[s.charAt(o++)],g=o<s.length?n[s.charAt(o)]:0;++o;const v=o<s.length?n[s.charAt(o)]:64;++o;const S=o<s.length?n[s.charAt(o)]:64;if(++o,c==null||g==null||v==null||S==null)throw new ZA;const I=c<<2|g>>4;if(i.push(I),v!==64){const q=g<<4&240|v>>2;if(i.push(q),S!==64){const W=v<<6&192|S;i.push(W)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class ZA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const e1=function(s){const e=cw(s);return uw.encodeByteArray(e,!0)},df=function(s){return e1(s).replace(/\./g,"")},dw=function(s){try{return uw.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function t1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const n1=()=>t1().__FIREBASE_DEFAULTS__,r1=()=>{if(typeof process>"u"||typeof s0>"u")return;const s=s0.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},s1=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&dw(s[1]);return e&&JSON.parse(e)},Of=()=>{try{return WA()||n1()||r1()||s1()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},hw=s=>Of()?.emulatorHosts?.[s],Yg=s=>{const e=hw(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},fw=()=>Of()?.config,mw=s=>Of()?.[`_${s}`];class i1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function Hi(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Gf(s){return(await fetch(s,{credentials:"include"})).ok}function pw(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[df(JSON.stringify(n)),df(JSON.stringify(h)),""].join(".")}const $u={};function a1(){const s={prod:[],emulator:[]};for(const e of Object.keys($u))$u[e]?s.emulator.push(e):s.prod.push(e);return s}function o1(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let i0=!1;function Mf(s,e){if(typeof window>"u"||typeof document>"u"||!Hi(window.location.host)||$u[s]===e||$u[s]||i0)return;$u[s]=e;function n(I){return`__firebase__banner__${I}`}const i="__firebase__banner",c=a1().prod.length>0;function h(){const I=document.getElementById(i);I&&I.remove()}function g(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function y(I,q){I.setAttribute("width","24"),I.setAttribute("id",q),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function v(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{i0=!0,h()},I}function E(I,q){I.setAttribute("id",q),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function S(){const I=o1(i),q=n("text"),W=document.getElementById(q)||document.createElement("span"),te=n("learnmore"),Y=document.getElementById(te)||document.createElement("a"),ue=n("preprendIcon"),fe=document.getElementById(ue)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const oe=I.element;g(oe),E(Y,te);const _e=v();y(fe,ue),oe.append(fe,W,Y,_e),document.body.appendChild(oe)}c?(W.innerText="Preview backend disconnected.",fe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(fe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",q)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}function nr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function l1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nr())}function c1(){const s=Of()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function u1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function d1(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function h1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function f1(){const s=nr();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function m1(){return!c1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function p1(){try{return typeof indexedDB=="object"}catch{return!1}}function g1(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const y1="FirebaseError";class Wt extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=y1,Object.setPrototypeOf(this,Wt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dd.prototype.create)}}class dd{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],h=c?b1(c,i):"Error",g=`${this.serviceName}: ${h} (${o}).`;return new Wt(o,g,i)}}function b1(s,e){return s.replace(v1,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const v1=/\{\$([^}]+)}/g;function x1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Ta(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const c=s[o],h=e[o];if(a0(c)&&a0(h)){if(!Ta(c,h))return!1}else if(c!==h)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function a0(s){return s!==null&&typeof s=="object"}function hd(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Uu(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,c]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Lu(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function _1(s,e){const n=new w1(s,e);return n.subscribe.bind(n)}class w1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");E1(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=Kp),o.error===void 0&&(o.error=Kp),o.complete===void 0&&(o.complete=Kp);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function E1(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Kp(){}function St(s){return s&&s._delegate?s._delegate:s}class Na{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Tl="[DEFAULT]";class T1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new i1;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(S1(e))try{this.getOrInitializeService({instanceIdentifier:Tl})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});i.resolve(c)}catch{}}}}clearInstance(e=Tl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Tl){return this.instances.has(e)}getOptions(e=Tl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,h]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);i===g&&h.resolve(o)}return o}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:N1(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Tl){return this.component?this.component.multipleInstances?e:Tl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function N1(s){return s===Tl?void 0:s}function S1(s){return s.instantiationMode==="EAGER"}class A1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new T1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var rt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(rt||(rt={}));const C1={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},R1=rt.INFO,I1={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},j1=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=I1[e];if(o)console[o](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xg{constructor(e){this.name=e,this._logLevel=R1,this._logHandler=j1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?C1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...e),this._logHandler(this,rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...e),this._logHandler(this,rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...e),this._logHandler(this,rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...e),this._logHandler(this,rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...e),this._logHandler(this,rt.ERROR,...e)}}const D1=(s,e)=>e.some(n=>s instanceof n);let o0,l0;function k1(){return o0||(o0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function O1(){return l0||(l0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gw=new WeakMap,fg=new WeakMap,yw=new WeakMap,Yp=new WeakMap,Wg=new WeakMap;function G1(s){const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",h)},c=()=>{n(Ao(s.result)),o()},h=()=>{i(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&gw.set(n,s)}).catch(()=>{}),Wg.set(e,s),e}function M1(s){if(fg.has(s))return;const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",h),s.removeEventListener("abort",h)},c=()=>{n(),o()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",h),s.addEventListener("abort",h)});fg.set(s,e)}let mg={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return fg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||yw.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ao(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function P1(s){mg=s(mg)}function V1(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(Xp(this),e,...n);return yw.set(i,e.sort?e.sort():[e]),Ao(i)}:O1().includes(s)?function(...e){return s.apply(Xp(this),e),Ao(gw.get(this))}:function(...e){return Ao(s.apply(Xp(this),e))}}function U1(s){return typeof s=="function"?V1(s):(s instanceof IDBTransaction&&M1(s),D1(s,k1())?new Proxy(s,mg):s)}function Ao(s){if(s instanceof IDBRequest)return G1(s);if(Yp.has(s))return Yp.get(s);const e=U1(s);return e!==s&&(Yp.set(s,e),Wg.set(e,s)),e}const Xp=s=>Wg.get(s);function L1(s,e,{blocked:n,upgrade:i,blocking:o,terminated:c}={}){const h=indexedDB.open(s,e),g=Ao(h);return i&&h.addEventListener("upgradeneeded",y=>{i(Ao(h.result),y.oldVersion,y.newVersion,Ao(h.transaction),y)}),n&&h.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),g.then(y=>{c&&y.addEventListener("close",()=>c()),o&&y.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),g}const B1=["get","getKey","getAll","getAllKeys","count"],z1=["put","add","delete","clear"],Wp=new Map;function c0(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Wp.get(e))return Wp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=z1.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||B1.includes(n)))return;const c=async function(h,...g){const y=this.transaction(h,o?"readwrite":"readonly");let v=y.store;return i&&(v=v.index(g.shift())),(await Promise.all([v[n](...g),o&&y.done]))[0]};return Wp.set(e,c),c}P1(s=>({...s,get:(e,n,i)=>c0(e,n)||s.get(e,n,i),has:(e,n)=>!!c0(e,n)||s.has(e,n)}));class q1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(F1(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function F1(s){return s.getComponent()?.type==="VERSION"}const pg="@firebase/app",u0="0.14.6";const Sa=new Xg("@firebase/app"),H1="@firebase/app-compat",$1="@firebase/analytics-compat",Q1="@firebase/analytics",K1="@firebase/app-check-compat",Y1="@firebase/app-check",X1="@firebase/auth",W1="@firebase/auth-compat",J1="@firebase/database",Z1="@firebase/data-connect",eC="@firebase/database-compat",tC="@firebase/functions",nC="@firebase/functions-compat",rC="@firebase/installations",sC="@firebase/installations-compat",iC="@firebase/messaging",aC="@firebase/messaging-compat",oC="@firebase/performance",lC="@firebase/performance-compat",cC="@firebase/remote-config",uC="@firebase/remote-config-compat",dC="@firebase/storage",hC="@firebase/storage-compat",fC="@firebase/firestore",mC="@firebase/ai",pC="@firebase/firestore-compat",gC="firebase",yC="12.6.0";const gg="[DEFAULT]",bC={[pg]:"fire-core",[H1]:"fire-core-compat",[Q1]:"fire-analytics",[$1]:"fire-analytics-compat",[Y1]:"fire-app-check",[K1]:"fire-app-check-compat",[X1]:"fire-auth",[W1]:"fire-auth-compat",[J1]:"fire-rtdb",[Z1]:"fire-data-connect",[eC]:"fire-rtdb-compat",[tC]:"fire-fn",[nC]:"fire-fn-compat",[rC]:"fire-iid",[sC]:"fire-iid-compat",[iC]:"fire-fcm",[aC]:"fire-fcm-compat",[oC]:"fire-perf",[lC]:"fire-perf-compat",[cC]:"fire-rc",[uC]:"fire-rc-compat",[dC]:"fire-gcs",[hC]:"fire-gcs-compat",[fC]:"fire-fst",[pC]:"fire-fst-compat",[mC]:"fire-vertex","fire-js":"fire-js",[gC]:"fire-js-all"};const hf=new Map,vC=new Map,yg=new Map;function d0(s,e){try{s.container.addComponent(e)}catch(n){Sa.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function ko(s){const e=s.name;if(yg.has(e))return Sa.debug(`There were multiple attempts to register component ${e}.`),!1;yg.set(e,s);for(const n of hf.values())d0(n,s);for(const n of vC.values())d0(n,s);return!0}function fd(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function hs(s){return s==null?!1:s.settings!==void 0}const xC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Co=new dd("app","Firebase",xC);class _C{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Na("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Co.create("app-deleted",{appName:this._name})}}const Dl=yC;function bw(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i={name:gg,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Co.create("bad-app-name",{appName:String(o)});if(n||(n=fw()),!n)throw Co.create("no-options");const c=hf.get(o);if(c){if(Ta(n,c.options)&&Ta(i,c.config))return c;throw Co.create("duplicate-app",{appName:o})}const h=new A1(o);for(const y of yg.values())h.addComponent(y);const g=new _C(n,i,h);return hf.set(o,g),g}function Pf(s=gg){const e=hf.get(s);if(!e&&s===gg&&fw())return bw();if(!e)throw Co.create("no-app",{appName:s});return e}function Ds(s,e,n){let i=bC[s]??s;n&&(i+=`-${n}`);const o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sa.warn(h.join(" "));return}ko(new Na(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const wC="firebase-heartbeat-database",EC=1,ed="firebase-heartbeat-store";let Jp=null;function vw(){return Jp||(Jp=L1(wC,EC,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(ed)}catch(n){console.warn(n)}}}}).catch(s=>{throw Co.create("idb-open",{originalErrorMessage:s.message})})),Jp}async function TC(s){try{const n=(await vw()).transaction(ed),i=await n.objectStore(ed).get(xw(s));return await n.done,i}catch(e){if(e instanceof Wt)Sa.warn(e.message);else{const n=Co.create("idb-get",{originalErrorMessage:e?.message});Sa.warn(n.message)}}}async function h0(s,e){try{const i=(await vw()).transaction(ed,"readwrite");await i.objectStore(ed).put(e,xw(s)),await i.done}catch(n){if(n instanceof Wt)Sa.warn(n.message);else{const i=Co.create("idb-set",{originalErrorMessage:n?.message});Sa.warn(i.message)}}}function xw(s){return`${s.name}!${s.options.appId}`}const NC=1024,SC=30;class AC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new RC(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=f0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>SC){const o=IC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Sa.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=f0(),{heartbeatsToSend:n,unsentEntries:i}=CC(this._heartbeatsCache.heartbeats),o=df(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Sa.warn(e),""}}}function f0(){return new Date().toISOString().substring(0,10)}function CC(s,e=NC){const n=[];let i=s.slice();for(const o of s){const c=n.find(h=>h.agent===o.agent);if(c){if(c.dates.push(o.date),m0(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),m0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class RC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return p1()?g1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await TC(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return h0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return h0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function m0(s){return df(JSON.stringify({version:2,heartbeats:s})).length}function IC(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}function jC(s){ko(new Na("platform-logger",e=>new q1(e),"PRIVATE")),ko(new Na("heartbeat",e=>new AC(e),"PRIVATE")),Ds(pg,u0,s),Ds(pg,u0,"esm2020"),Ds("fire-js","")}jC("");function _w(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DC=_w,ww=new dd("auth","Firebase",_w());const ff=new Xg("@firebase/auth");function kC(s,...e){ff.logLevel<=rt.WARN&&ff.warn(`Auth (${Dl}): ${s}`,...e)}function Wh(s,...e){ff.logLevel<=rt.ERROR&&ff.error(`Auth (${Dl}): ${s}`,...e)}function ri(s,...e){throw Jg(s,...e)}function Pi(s,...e){return Jg(s,...e)}function Ew(s,e,n){const i={...DC(),[e]:n};return new dd("auth","Firebase",i).create(e,{appName:s.name})}function Ro(s){return Ew(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jg(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return ww.create(s,...e)}function Oe(s,e,...n){if(!s)throw Jg(e,...n)}function xa(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Wh(e),new Error(e)}function Aa(s,e){s||xa(e)}function bg(){return typeof self<"u"&&self.location?.href||""}function OC(){return p0()==="http:"||p0()==="https:"}function p0(){return typeof self<"u"&&self.location?.protocol||null}function GC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OC()||d1()||"connection"in navigator)?navigator.onLine:!0}function MC(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class md{constructor(e,n){this.shortDelay=e,this.longDelay=n,Aa(n>e,"Short delay should be less than long delay!"),this.isMobile=l1()||h1()}get(){return GC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Zg(s,e){Aa(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Tw{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const PC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const VC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],UC=new md(3e4,6e4);function kl(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function zo(s,e,n,i,o={}){return Nw(s,o,async()=>{let c={},h={};i&&(e==="GET"?h=i:c={body:JSON.stringify(i)});const g=hd({key:s.config.apiKey,...h}).slice(1),y=await s._getAdditionalHeaders();y["Content-Type"]="application/json",s.languageCode&&(y["X-Firebase-Locale"]=s.languageCode);const v={method:e,headers:y,...c};return u1()||(v.referrerPolicy="no-referrer"),s.emulatorConfig&&Hi(s.emulatorConfig.host)&&(v.credentials="include"),Tw.fetch()(await Sw(s,s.config.apiHost,n,g),v)})}async function Nw(s,e,n){s._canInitEmulator=!1;const i={...PC,...e};try{const o=new BC(s),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await c.json();if("needConfirmation"in h)throw kh(s,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const g=c.ok?h.errorMessage:h.error.message,[y,v]=g.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw kh(s,"credential-already-in-use",h);if(y==="EMAIL_EXISTS")throw kh(s,"email-already-in-use",h);if(y==="USER_DISABLED")throw kh(s,"user-disabled",h);const E=i[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Ew(s,E,v);ri(s,E)}}catch(o){if(o instanceof Wt)throw o;ri(s,"network-request-failed",{message:String(o)})}}async function Vf(s,e,n,i,o={}){const c=await zo(s,e,n,i,o);return"mfaPendingCredential"in c&&ri(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function Sw(s,e,n,i){const o=`${e}${n}?${i}`,c=s,h=c.config.emulator?Zg(s.config,o):`${s.config.apiScheme}://${o}`;return VC.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(h).toString():h}function LC(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class BC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Pi(this.auth,"network-request-failed")),UC.get())})}}function kh(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=Pi(s,e,i);return o.customData._tokenResponse=n,o}function g0(s){return s!==void 0&&s.enterprise!==void 0}class zC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return LC(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function qC(s,e){return zo(s,"GET","/v2/recaptchaConfig",kl(s,e))}async function FC(s,e){return zo(s,"POST","/v1/accounts:delete",e)}async function mf(s,e){return zo(s,"POST","/v1/accounts:lookup",e)}function Qu(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Aw(s,e=!1){const n=St(s),i=await n.getIdToken(e),o=ey(i);Oe(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,h=c?.sign_in_provider;return{claims:o,token:i,authTime:Qu(Zp(o.auth_time)),issuedAtTime:Qu(Zp(o.iat)),expirationTime:Qu(Zp(o.exp)),signInProvider:h||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Zp(s){return Number(s)*1e3}function ey(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return Wh("JWT malformed, contained fewer than 3 sections"),null;try{const o=dw(n);return o?JSON.parse(o):(Wh("Failed to decode base64 JWT payload"),null)}catch(o){return Wh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function y0(s){const e=ey(s);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function td(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Wt&&HC(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function HC({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class $C{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class vg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qu(this.lastLoginAt),this.creationTime=Qu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function pf(s){const e=s.auth,n=await s.getIdToken(),i=await td(s,mf(e,{idToken:n}));Oe(i?.users.length,e,"internal-error");const o=i.users[0];s._notifyReloadListener(o);const c=o.providerUserInfo?.length?Cw(o.providerUserInfo):[],h=KC(s.providerData,c),g=s.isAnonymous,y=!(s.email&&o.passwordHash)&&!h?.length,v=g?y:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new vg(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(s,E)}async function QC(s){const e=St(s);await pf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function KC(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Cw(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function YC(s,e){const n=await Nw(s,{},async()=>{const i=hd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=s.config,h=await Sw(s,o,"/v1/token",`key=${c}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:g,body:i};return s.emulatorConfig&&Hi(s.emulatorConfig.host)&&(y.credentials="include"),Tw.fetch()(h,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function XC(s,e){return zo(s,"POST","/v2/accounts:revokeToken",kl(s,e))}class vc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):y0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const n=y0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:c}=await YC(e,n);this.updateTokensAndExpiration(i,o,Number(c))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:c}=n,h=new vc;return i&&(Oe(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Oe(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),c&&(Oe(typeof c=="number","internal-error",{appName:e}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vc,this.toJSON())}_performRefresh(){return xa("not implemented")}}function xo(s,e){Oe(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ti{constructor({uid:e,auth:n,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new $C(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new vg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await td(this,this.stsTokenManager.getToken(this.auth,e));return Oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Aw(this,e)}reload(){return QC(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ti({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await pf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hs(this.auth.app))return Promise.reject(Ro(this.auth));const e=await this.getIdToken();return await td(this,FC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,h=n.photoURL??void 0,g=n.tenantId??void 0,y=n._redirectEventId??void 0,v=n.createdAt??void 0,E=n.lastLoginAt??void 0,{uid:S,emailVerified:I,isAnonymous:q,providerData:W,stsTokenManager:te}=n;Oe(S&&te,e,"internal-error");const Y=vc.fromJSON(this.name,te);Oe(typeof S=="string",e,"internal-error"),xo(i,e.name),xo(o,e.name),Oe(typeof I=="boolean",e,"internal-error"),Oe(typeof q=="boolean",e,"internal-error"),xo(c,e.name),xo(h,e.name),xo(g,e.name),xo(y,e.name),xo(v,e.name),xo(E,e.name);const ue=new ti({uid:S,auth:e,email:o,emailVerified:I,displayName:i,isAnonymous:q,photoURL:h,phoneNumber:c,tenantId:g,stsTokenManager:Y,createdAt:v,lastLoginAt:E});return W&&Array.isArray(W)&&(ue.providerData=W.map(fe=>({...fe}))),y&&(ue._redirectEventId=y),ue}static async _fromIdTokenResponse(e,n,i=!1){const o=new vc;o.updateFromServerResponse(n);const c=new ti({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await pf(c),c}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];Oe(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?Cw(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!c?.length,g=new vc;g.updateFromIdToken(i);const y=new ti({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new vg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(y,v),y}}const b0=new Map;function _a(s){Aa(s instanceof Function,"Expected a class definition");let e=b0.get(s);return e?(Aa(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,b0.set(s,e),e)}class Rw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Rw.type="NONE";const v0=Rw;function Jh(s,e,n){return`firebase:${s}:${e}:${n}`}class xc{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:c}=this.auth;this.fullUserKey=Jh(this.userKey,o.apiKey,c),this.fullPersistenceKey=Jh("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await mf(this.auth,{idToken:e}).catch(()=>{});return n?ti._fromGetAccountInfoResponse(this.auth,n,e):null}return ti._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new xc(_a(v0),e,i);const o=(await Promise.all(n.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let c=o[0]||_a(v0);const h=Jh(i,e.config.apiKey,e.name);let g=null;for(const v of n)try{const E=await v._get(h);if(E){let S;if(typeof E=="string"){const I=await mf(e,{idToken:E}).catch(()=>{});if(!I)break;S=await ti._fromGetAccountInfoResponse(e,I,E)}else S=ti._fromJSON(e,E);v!==c&&(g=S),c=v;break}}catch{}const y=o.filter(v=>v._shouldAllowMigration);return!c._shouldAllowMigration||!y.length?new xc(c,e,i):(c=y[0],g&&await c._set(h,g.toJSON()),await Promise.all(n.map(async v=>{if(v!==c)try{await v._remove(h)}catch{}})),new xc(c,e,i))}}function x0(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Iw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Gw(e))return"Blackberry";if(Mw(e))return"Webos";if(jw(e))return"Safari";if((e.includes("chrome/")||Dw(e))&&!e.includes("edge/"))return"Chrome";if(Ow(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if(i?.length===2)return i[1]}return"Other"}function Iw(s=nr()){return/firefox\//i.test(s)}function jw(s=nr()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Dw(s=nr()){return/crios\//i.test(s)}function kw(s=nr()){return/iemobile/i.test(s)}function Ow(s=nr()){return/android/i.test(s)}function Gw(s=nr()){return/blackberry/i.test(s)}function Mw(s=nr()){return/webos/i.test(s)}function ty(s=nr()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function WC(s=nr()){return ty(s)&&!!window.navigator?.standalone}function JC(){return f1()&&document.documentMode===10}function Pw(s=nr()){return ty(s)||Ow(s)||Mw(s)||Gw(s)||/windows phone/i.test(s)||kw(s)}function Vw(s,e=[]){let n;switch(s){case"Browser":n=x0(nr());break;case"Worker":n=`${x0(nr())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Dl}/${i}`}class ZC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=c=>new Promise((h,g)=>{try{const y=e(c);h(y)}catch(y){g(y)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function e2(s,e={}){return zo(s,"GET","/v2/passwordPolicy",kl(s,e))}const t2=6;class n2{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??t2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class r2{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _0(this),this.idTokenSubscription=new _0(this),this.beforeStateQueue=new ZC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ww,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_a(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await xc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await mf(this,{idToken:e}),i=await ti._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(hs(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,h=i?._redirectEventId,g=await this.tryRedirectSignIn(e);(!c||c===h)&&g?.user&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await pf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hs(this.app))return Promise.reject(Ro(this));const n=e?St(e):null;return n&&Oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hs(this.app)?Promise.reject(Ro(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hs(this.app)?Promise.reject(Ro(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_a(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await e2(this),n=new n2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new dd("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await XC(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_a(e)||this._popupRedirectResolver;Oe(n,this,"argument-error"),this.redirectPersistenceManager=await xc.create(this,[_a(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let h=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(g,this,"internal-error"),g.then(()=>{h||c(this.currentUser)}),typeof n=="function"){const y=e.addObserver(n,i,o);return()=>{h=!0,y()}}else{const y=e.addObserver(n);return()=>{h=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Vw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(hs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&kC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Pc(s){return St(s)}class _0{constructor(e){this.auth=e,this.observer=null,this.addObserver=_1(n=>this.observer=n)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Uf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function s2(s){Uf=s}function Uw(s){return Uf.loadJS(s)}function i2(){return Uf.recaptchaEnterpriseScript}function a2(){return Uf.gapiScript}function o2(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class l2{constructor(){this.enterprise=new c2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class c2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const u2="recaptcha-enterprise",Lw="NO_RECAPTCHA";class d2{constructor(e){this.type=u2,this.auth=Pc(e)}async verify(e="verify",n=!1){async function i(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(h,g)=>{qC(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const v=new zC(y);return c.tenantId==null?c._agentRecaptchaConfig=v:c._tenantRecaptchaConfigs[c.tenantId]=v,h(v.siteKey)}}).catch(y=>{g(y)})})}function o(c,h,g){const y=window.grecaptcha;g0(y)?y.enterprise.ready(()=>{y.enterprise.execute(c,{action:e}).then(v=>{h(v)}).catch(()=>{h(Lw)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new l2().execute("siteKey",{action:"verify"}):new Promise((c,h)=>{i(this.auth).then(g=>{if(!n&&g0(window.grecaptcha))o(g,c,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let y=i2();y.length!==0&&(y+=g),Uw(y).then(()=>{o(g,c,h)}).catch(v=>{h(v)})}}).catch(g=>{h(g)})})}}async function w0(s,e,n,i=!1,o=!1){const c=new d2(s);let h;if(o)h=Lw;else try{h=await c.verify(n)}catch{h=await c.verify(n,!0)}const g={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const y=g.phoneEnrollmentInfo.phoneNumber,v=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:v,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const y=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return i?Object.assign(g,{captchaResp:h}):Object.assign(g,{captchaResponse:h}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function E0(s,e,n,i,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await w0(s,e,n,n==="getOobCode");return i(s,c)}else return i(s,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await w0(s,e,n,n==="getOobCode");return i(s,h)}else return Promise.reject(c)})}function h2(s,e){const n=fd(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Ta(c,e??{}))return o;ri(o,"already-initialized")}return n.initialize({options:e})}function f2(s,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(_a);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function m2(s,e,n){const i=Pc(s);Oe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,c=Bw(e),{host:h,port:g}=p2(e),y=g===null?"":`:${g}`,v={url:`${c}//${h}${y}/`},E=Object.freeze({host:h,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Oe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Oe(Ta(v,i.config.emulator)&&Ta(E,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=E,i.settings.appVerificationDisabledForTesting=!0,Hi(h)?(Gf(`${c}//${h}${y}`),Mf("Auth",!0)):g2()}function Bw(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function p2(s){const e=Bw(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const c=o[1];return{host:c,port:T0(i.substr(c.length+1))}}else{const[c,h]=i.split(":");return{host:c,port:T0(h)}}}function T0(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function g2(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class ny{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return xa("not implemented")}_getIdTokenResponse(e){return xa("not implemented")}_linkToIdToken(e,n){return xa("not implemented")}_getReauthenticationResolver(e){return xa("not implemented")}}async function y2(s,e){return zo(s,"POST","/v1/accounts:signUp",e)}async function b2(s,e){return Vf(s,"POST","/v1/accounts:signInWithPassword",kl(s,e))}async function v2(s,e){return Vf(s,"POST","/v1/accounts:signInWithEmailLink",kl(s,e))}async function x2(s,e){return Vf(s,"POST","/v1/accounts:signInWithEmailLink",kl(s,e))}class nd extends ny{constructor(e,n,i,o=null){super("password",i),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new nd(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new nd(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return E0(e,n,"signInWithPassword",b2);case"emailLink":return v2(e,{email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return E0(e,i,"signUpPassword",y2);case"emailLink":return x2(e,{idToken:n,email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function _c(s,e){return Vf(s,"POST","/v1/accounts:signInWithIdp",kl(s,e))}const _2="http://localhost";class Cl extends ny{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Cl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ri("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...c}=n;if(!i||!o)return null;const h=new Cl(i,o);return h.idToken=c.idToken||void 0,h.accessToken=c.accessToken||void 0,h.secret=c.secret,h.nonce=c.nonce,h.pendingToken=c.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return _c(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,_c(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_c(e,n)}buildRequest(){const e={requestUri:_2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=hd(n)}return e}}function w2(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function E2(s){const e=Uu(Lu(s)).link,n=e?Uu(Lu(e)).deep_link_id:null,i=Uu(Lu(s)).deep_link_id;return(i?Uu(Lu(i)).link:null)||i||n||e||s}class ry{constructor(e){const n=Uu(Lu(e)),i=n.apiKey??null,o=n.oobCode??null,c=w2(n.mode??null);Oe(i&&o&&c,"argument-error"),this.apiKey=i,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=E2(e);try{return new ry(n)}catch{return null}}}class Vc{constructor(){this.providerId=Vc.PROVIDER_ID}static credential(e,n){return nd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=ry.parseLink(n);return Oe(i,"argument-error"),nd._fromEmailAndCode(e,i.code,i.tenantId)}}Vc.PROVIDER_ID="password";Vc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class zw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class pd extends zw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class _o extends pd{constructor(){super("facebook.com")}static credential(e){return Cl._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _o.credentialFromTaggedObject(e)}static credentialFromError(e){return _o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _o.credential(e.oauthAccessToken)}catch{return null}}}_o.FACEBOOK_SIGN_IN_METHOD="facebook.com";_o.PROVIDER_ID="facebook.com";class wo extends pd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Cl._fromParams({providerId:wo.PROVIDER_ID,signInMethod:wo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return wo.credentialFromTaggedObject(e)}static credentialFromError(e){return wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return wo.credential(n,i)}catch{return null}}}wo.GOOGLE_SIGN_IN_METHOD="google.com";wo.PROVIDER_ID="google.com";class Eo extends pd{constructor(){super("github.com")}static credential(e){return Cl._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Eo.credentialFromTaggedObject(e)}static credentialFromError(e){return Eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Eo.credential(e.oauthAccessToken)}catch{return null}}}Eo.GITHUB_SIGN_IN_METHOD="github.com";Eo.PROVIDER_ID="github.com";class To extends pd{constructor(){super("twitter.com")}static credential(e,n){return Cl._fromParams({providerId:To.PROVIDER_ID,signInMethod:To.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return To.credentialFromTaggedObject(e)}static credentialFromError(e){return To.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return To.credential(n,i)}catch{return null}}}To.TWITTER_SIGN_IN_METHOD="twitter.com";To.PROVIDER_ID="twitter.com";class Tc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const c=await ti._fromIdTokenResponse(e,i,o),h=N0(i);return new Tc({user:c,providerId:h,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=N0(i);return new Tc({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function N0(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class gf extends Wt{constructor(e,n,i,o){super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,gf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new gf(e,n,i,o)}}function qw(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?gf._fromErrorAndOperation(s,c,e,i):c})}async function T2(s,e,n=!1){const i=await td(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return Tc._forOperation(s,"link",i)}async function N2(s,e,n=!1){const{auth:i}=s;if(hs(i.app))return Promise.reject(Ro(i));const o="reauthenticate";try{const c=await td(s,qw(i,o,e,s),n);Oe(c.idToken,i,"internal-error");const h=ey(c.idToken);Oe(h,i,"internal-error");const{sub:g}=h;return Oe(s.uid===g,i,"user-mismatch"),Tc._forOperation(s,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&ri(i,"user-mismatch"),c}}async function Fw(s,e,n=!1){if(hs(s.app))return Promise.reject(Ro(s));const i="signIn",o=await qw(s,i,e),c=await Tc._fromIdTokenResponse(s,i,o);return n||await s._updateCurrentUser(c.user),c}async function S2(s,e){return Fw(Pc(s),e)}async function A2(s){const e=Pc(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function C2(s,e,n){return hs(s.app)?Promise.reject(Ro(s)):S2(St(s),Vc.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&A2(s),i})}function R2(s,e,n,i){return St(s).onIdTokenChanged(e,n,i)}function I2(s,e,n){return St(s).beforeAuthStateChanged(e,n)}function Hw(s,e,n,i){return St(s).onAuthStateChanged(e,n,i)}function j2(s){return St(s).signOut()}const yf="__sak";class $w{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(yf,"1"),this.storage.removeItem(yf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const D2=1e3,k2=10;class Qw extends $w{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Pw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,g,y)=>{this.notifyListeners(h,y)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!n&&this.localCache[i]===h||this.notifyListeners(i,h)},c=this.storage.getItem(i);JC()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,k2):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},D2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Qw.type="LOCAL";const O2=Qw;class Kw extends $w{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Kw.type="SESSION";const Yw=Kw;function G2(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Lf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new Lf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:c}=n.data,h=this.handlersMap[o];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const g=Array.from(h).map(async v=>v(n.origin,c)),y=await G2(g);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:y})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lf.receivers=[];function sy(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}class M2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,h;return new Promise((g,y)=>{const v=sy("",20);o.port1.start();const E=setTimeout(()=>{y(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(S){const I=S;if(I.data.eventId===v)switch(I.data.status){case"ack":clearTimeout(E),c=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(I.data.response);break;default:clearTimeout(E),clearTimeout(c),y(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function Vi(){return window}function P2(s){Vi().location.href=s}function Xw(){return typeof Vi().WorkerGlobalScope<"u"&&typeof Vi().importScripts=="function"}async function V2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function U2(){return navigator?.serviceWorker?.controller||null}function L2(){return Xw()?self:null}const Ww="firebaseLocalStorageDb",B2=1,bf="firebaseLocalStorage",Jw="fbase_key";class gd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bf(s,e){return s.transaction([bf],e?"readwrite":"readonly").objectStore(bf)}function z2(){const s=indexedDB.deleteDatabase(Ww);return new gd(s).toPromise()}function xg(){const s=indexedDB.open(Ww,B2);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(bf,{keyPath:Jw})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(bf)?e(i):(i.close(),await z2(),e(await xg()))})})}async function S0(s,e,n){const i=Bf(s,!0).put({[Jw]:e,value:n});return new gd(i).toPromise()}async function q2(s,e){const n=Bf(s,!1).get(e),i=await new gd(n).toPromise();return i===void 0?null:i.value}function A0(s,e){const n=Bf(s,!0).delete(e);return new gd(n).toPromise()}const F2=800,H2=3;class Zw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>H2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Xw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lf._getInstance(L2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await V2(),!this.activeServiceWorker)return;this.sender=new M2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||U2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xg();return await S0(e,yf,"1"),await A0(e,yf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>S0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>q2(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>A0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Bf(o,!1).getAll();return new gd(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),F2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Zw.type="LOCAL";const $2=Zw;new md(3e4,6e4);function Q2(s,e){return e?_a(e):(Oe(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class iy extends ny{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _c(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _c(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _c(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function K2(s){return Fw(s.auth,new iy(s),s.bypassAuthState)}function Y2(s){const{auth:e,user:n}=s;return Oe(n,e,"internal-error"),N2(n,new iy(s),s.bypassAuthState)}async function X2(s){const{auth:e,user:n}=s;return Oe(n,e,"internal-error"),T2(n,new iy(s),s.bypassAuthState)}class eE{constructor(e,n,i,o,c=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:c,error:h,type:g}=e;if(h){this.reject(h);return}const y={auth:this.auth,requestUri:n,sessionId:i,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(y))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return K2;case"linkViaPopup":case"linkViaRedirect":return X2;case"reauthViaPopup":case"reauthViaRedirect":return Y2;default:ri(this.auth,"internal-error")}}resolve(e){Aa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Aa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const W2=new md(2e3,1e4);class bc extends eE{constructor(e,n,i,o,c){super(e,n,o,c),this.provider=i,this.authWindow=null,this.pollId=null,bc.currentPopupAction&&bc.currentPopupAction.cancel(),bc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){Aa(this.filter.length===1,"Popup operations only handle one event");const e=sy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,W2.get())};e()}}bc.currentPopupAction=null;const J2="pendingRedirect",Zh=new Map;class Z2 extends eE{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Zh.get(this.auth._key());if(!e){try{const i=await eR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Zh.set(this.auth._key(),e)}return this.bypassAuthState||Zh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eR(s,e){const n=rR(e),i=nR(s);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function tR(s,e){Zh.set(s._key(),e)}function nR(s){return _a(s._redirectPersistence)}function rR(s){return Jh(J2,s.config.apiKey,s.name)}async function sR(s,e,n=!1){if(hs(s.app))return Promise.reject(Ro(s));const i=Pc(s),o=Q2(i,e),h=await new Z2(i,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}const iR=600*1e3;class aR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!tE(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Pi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iR&&this.cachedEventUids.clear(),this.cachedEventUids.has(C0(e))}saveEventToCache(e){this.cachedEventUids.add(C0(e)),this.lastProcessedEventTime=Date.now()}}function C0(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function tE({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function oR(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tE(s);default:return!1}}async function lR(s,e={}){return zo(s,"GET","/v1/projects",e)}const cR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uR=/^https?/;async function dR(s){if(s.config.emulator)return;const{authorizedDomains:e}=await lR(s);for(const n of e)try{if(hR(n))return}catch{}ri(s,"unauthorized-domain")}function hR(s){const e=bg(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===i}if(!uR.test(n))return!1;if(cR.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}const fR=new md(3e4,6e4);function R0(){const s=Vi().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function mR(s){return new Promise((e,n)=>{function i(){R0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{R0(),n(Pi(s,"network-request-failed"))},timeout:fR.get()})}if(Vi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Vi().gapi?.load)i();else{const o=o2("iframefcb");return Vi()[o]=()=>{gapi.load?i():n(Pi(s,"network-request-failed"))},Uw(`${a2()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw ef=null,e})}let ef=null;function pR(s){return ef=ef||mR(s),ef}const gR=new md(5e3,15e3),yR="__/auth/iframe",bR="emulator/auth/iframe",vR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _R(s){const e=s.config;Oe(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Zg(e,bR):`https://${s.config.authDomain}/${yR}`,i={apiKey:e.apiKey,appName:s.name,v:Dl},o=xR.get(s.config.apiHost);o&&(i.eid=o);const c=s._getFrameworks();return c.length&&(i.fw=c.join(",")),`${n}?${hd(i).slice(1)}`}async function wR(s){const e=await pR(s),n=Vi().gapi;return Oe(n,s,"internal-error"),e.open({where:document.body,url:_R(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vR,dontclear:!0},i=>new Promise(async(o,c)=>{await i.restyle({setHideOnLeave:!1});const h=Pi(s,"network-request-failed"),g=Vi().setTimeout(()=>{c(h)},gR.get());function y(){Vi().clearTimeout(g),o(i)}i.ping(y).then(y,()=>{c(h)})}))}const ER={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TR=500,NR=600,SR="_blank",AR="http://localhost";class I0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CR(s,e,n,i=TR,o=NR){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let g="";const y={...ER,width:i.toString(),height:o.toString(),top:c,left:h},v=nr().toLowerCase();n&&(g=Dw(v)?SR:n),Iw(v)&&(e=e||AR,y.scrollbars="yes");const E=Object.entries(y).reduce((I,[q,W])=>`${I}${q}=${W},`,"");if(WC(v)&&g!=="_self")return RR(e||"",g),new I0(null);const S=window.open(e||"",g,E);Oe(S,s,"popup-blocked");try{S.focus()}catch{}return new I0(S)}function RR(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const IR="__/auth/handler",jR="emulator/auth/handler",DR=encodeURIComponent("fac");async function j0(s,e,n,i,o,c){Oe(s.config.authDomain,s,"auth-domain-config-required"),Oe(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:Dl,eventId:o};if(e instanceof zw){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",x1(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,S]of Object.entries({}))h[E]=S}if(e instanceof pd){const E=e.getScopes().filter(S=>S!=="");E.length>0&&(h.scopes=E.join(","))}s.tenantId&&(h.tid=s.tenantId);const g=h;for(const E of Object.keys(g))g[E]===void 0&&delete g[E];const y=await s._getAppCheckToken(),v=y?`#${DR}=${encodeURIComponent(y)}`:"";return`${kR(s)}?${hd(g).slice(1)}${v}`}function kR({config:s}){return s.emulator?Zg(s,jR):`https://${s.authDomain}/${IR}`}const eg="webStorageSupport";class OR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yw,this._completeRedirectFn=sR,this._overrideRedirectResult=tR}async _openPopup(e,n,i,o){Aa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await j0(e,n,i,bg(),o);return CR(e,c,sy())}async _openRedirect(e,n,i,o){await this._originValidation(e);const c=await j0(e,n,i,bg(),o);return P2(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Aa(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await wR(e),i=new aR(e);return n.register("authEvent",o=>(Oe(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(eg,{type:eg},o=>{const c=o?.[0]?.[eg];c!==void 0&&n(!!c),ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=dR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Pw()||jw()||ty()}}const GR=OR;var D0="@firebase/auth",k0="1.11.1";class MR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function PR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VR(s){ko(new Na("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:h,authDomain:g}=i.options;Oe(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const y={apiKey:h,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vw(s)},v=new r2(i,o,c,y);return f2(v,n),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ko(new Na("auth-internal",e=>{const n=Pc(e.getProvider("auth").getImmediate());return(i=>new MR(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ds(D0,k0,PR(s)),Ds(D0,k0,"esm2020")}const UR=300,LR=mw("authIdTokenMaxAge")||UR;let O0=null;const BR=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>LR)return;const o=n?.token;O0!==o&&(O0=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function zR(s=Pf()){const e=fd(s,"auth");if(e.isInitialized())return e.getImmediate();const n=h2(s,{popupRedirectResolver:GR,persistence:[$2,O2,Yw]}),i=mw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const h=BR(c.toString());I2(n,h,()=>h(n.currentUser)),R2(n,g=>h(g))}}const o=hw("auth");return o&&m2(n,`http://${o}`),n}function qR(){return document.getElementsByTagName("head")?.[0]??document}s2({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const c=Pi("internal-error");c.customData=o,n(c)},i.type="text/javascript",i.charset="UTF-8",qR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VR("Browser");var FR="firebase",HR="12.6.0";Ds(FR,HR,"app");var G0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Io,nE;(function(){var s;function e(O,D){function k(){}k.prototype=D.prototype,O.F=D.prototype,O.prototype=new k,O.prototype.constructor=O,O.D=function(z,P,F){for(var G=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)G[Fe-2]=arguments[Fe];return D.prototype[P].apply(z,G)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,D,k){k||(k=0);const z=Array(16);if(typeof D=="string")for(var P=0;P<16;++P)z[P]=D.charCodeAt(k++)|D.charCodeAt(k++)<<8|D.charCodeAt(k++)<<16|D.charCodeAt(k++)<<24;else for(P=0;P<16;++P)z[P]=D[k++]|D[k++]<<8|D[k++]<<16|D[k++]<<24;D=O.g[0],k=O.g[1],P=O.g[2];let F=O.g[3],G;G=D+(F^k&(P^F))+z[0]+3614090360&4294967295,D=k+(G<<7&4294967295|G>>>25),G=F+(P^D&(k^P))+z[1]+3905402710&4294967295,F=D+(G<<12&4294967295|G>>>20),G=P+(k^F&(D^k))+z[2]+606105819&4294967295,P=F+(G<<17&4294967295|G>>>15),G=k+(D^P&(F^D))+z[3]+3250441966&4294967295,k=P+(G<<22&4294967295|G>>>10),G=D+(F^k&(P^F))+z[4]+4118548399&4294967295,D=k+(G<<7&4294967295|G>>>25),G=F+(P^D&(k^P))+z[5]+1200080426&4294967295,F=D+(G<<12&4294967295|G>>>20),G=P+(k^F&(D^k))+z[6]+2821735955&4294967295,P=F+(G<<17&4294967295|G>>>15),G=k+(D^P&(F^D))+z[7]+4249261313&4294967295,k=P+(G<<22&4294967295|G>>>10),G=D+(F^k&(P^F))+z[8]+1770035416&4294967295,D=k+(G<<7&4294967295|G>>>25),G=F+(P^D&(k^P))+z[9]+2336552879&4294967295,F=D+(G<<12&4294967295|G>>>20),G=P+(k^F&(D^k))+z[10]+4294925233&4294967295,P=F+(G<<17&4294967295|G>>>15),G=k+(D^P&(F^D))+z[11]+2304563134&4294967295,k=P+(G<<22&4294967295|G>>>10),G=D+(F^k&(P^F))+z[12]+1804603682&4294967295,D=k+(G<<7&4294967295|G>>>25),G=F+(P^D&(k^P))+z[13]+4254626195&4294967295,F=D+(G<<12&4294967295|G>>>20),G=P+(k^F&(D^k))+z[14]+2792965006&4294967295,P=F+(G<<17&4294967295|G>>>15),G=k+(D^P&(F^D))+z[15]+1236535329&4294967295,k=P+(G<<22&4294967295|G>>>10),G=D+(P^F&(k^P))+z[1]+4129170786&4294967295,D=k+(G<<5&4294967295|G>>>27),G=F+(k^P&(D^k))+z[6]+3225465664&4294967295,F=D+(G<<9&4294967295|G>>>23),G=P+(D^k&(F^D))+z[11]+643717713&4294967295,P=F+(G<<14&4294967295|G>>>18),G=k+(F^D&(P^F))+z[0]+3921069994&4294967295,k=P+(G<<20&4294967295|G>>>12),G=D+(P^F&(k^P))+z[5]+3593408605&4294967295,D=k+(G<<5&4294967295|G>>>27),G=F+(k^P&(D^k))+z[10]+38016083&4294967295,F=D+(G<<9&4294967295|G>>>23),G=P+(D^k&(F^D))+z[15]+3634488961&4294967295,P=F+(G<<14&4294967295|G>>>18),G=k+(F^D&(P^F))+z[4]+3889429448&4294967295,k=P+(G<<20&4294967295|G>>>12),G=D+(P^F&(k^P))+z[9]+568446438&4294967295,D=k+(G<<5&4294967295|G>>>27),G=F+(k^P&(D^k))+z[14]+3275163606&4294967295,F=D+(G<<9&4294967295|G>>>23),G=P+(D^k&(F^D))+z[3]+4107603335&4294967295,P=F+(G<<14&4294967295|G>>>18),G=k+(F^D&(P^F))+z[8]+1163531501&4294967295,k=P+(G<<20&4294967295|G>>>12),G=D+(P^F&(k^P))+z[13]+2850285829&4294967295,D=k+(G<<5&4294967295|G>>>27),G=F+(k^P&(D^k))+z[2]+4243563512&4294967295,F=D+(G<<9&4294967295|G>>>23),G=P+(D^k&(F^D))+z[7]+1735328473&4294967295,P=F+(G<<14&4294967295|G>>>18),G=k+(F^D&(P^F))+z[12]+2368359562&4294967295,k=P+(G<<20&4294967295|G>>>12),G=D+(k^P^F)+z[5]+4294588738&4294967295,D=k+(G<<4&4294967295|G>>>28),G=F+(D^k^P)+z[8]+2272392833&4294967295,F=D+(G<<11&4294967295|G>>>21),G=P+(F^D^k)+z[11]+1839030562&4294967295,P=F+(G<<16&4294967295|G>>>16),G=k+(P^F^D)+z[14]+4259657740&4294967295,k=P+(G<<23&4294967295|G>>>9),G=D+(k^P^F)+z[1]+2763975236&4294967295,D=k+(G<<4&4294967295|G>>>28),G=F+(D^k^P)+z[4]+1272893353&4294967295,F=D+(G<<11&4294967295|G>>>21),G=P+(F^D^k)+z[7]+4139469664&4294967295,P=F+(G<<16&4294967295|G>>>16),G=k+(P^F^D)+z[10]+3200236656&4294967295,k=P+(G<<23&4294967295|G>>>9),G=D+(k^P^F)+z[13]+681279174&4294967295,D=k+(G<<4&4294967295|G>>>28),G=F+(D^k^P)+z[0]+3936430074&4294967295,F=D+(G<<11&4294967295|G>>>21),G=P+(F^D^k)+z[3]+3572445317&4294967295,P=F+(G<<16&4294967295|G>>>16),G=k+(P^F^D)+z[6]+76029189&4294967295,k=P+(G<<23&4294967295|G>>>9),G=D+(k^P^F)+z[9]+3654602809&4294967295,D=k+(G<<4&4294967295|G>>>28),G=F+(D^k^P)+z[12]+3873151461&4294967295,F=D+(G<<11&4294967295|G>>>21),G=P+(F^D^k)+z[15]+530742520&4294967295,P=F+(G<<16&4294967295|G>>>16),G=k+(P^F^D)+z[2]+3299628645&4294967295,k=P+(G<<23&4294967295|G>>>9),G=D+(P^(k|~F))+z[0]+4096336452&4294967295,D=k+(G<<6&4294967295|G>>>26),G=F+(k^(D|~P))+z[7]+1126891415&4294967295,F=D+(G<<10&4294967295|G>>>22),G=P+(D^(F|~k))+z[14]+2878612391&4294967295,P=F+(G<<15&4294967295|G>>>17),G=k+(F^(P|~D))+z[5]+4237533241&4294967295,k=P+(G<<21&4294967295|G>>>11),G=D+(P^(k|~F))+z[12]+1700485571&4294967295,D=k+(G<<6&4294967295|G>>>26),G=F+(k^(D|~P))+z[3]+2399980690&4294967295,F=D+(G<<10&4294967295|G>>>22),G=P+(D^(F|~k))+z[10]+4293915773&4294967295,P=F+(G<<15&4294967295|G>>>17),G=k+(F^(P|~D))+z[1]+2240044497&4294967295,k=P+(G<<21&4294967295|G>>>11),G=D+(P^(k|~F))+z[8]+1873313359&4294967295,D=k+(G<<6&4294967295|G>>>26),G=F+(k^(D|~P))+z[15]+4264355552&4294967295,F=D+(G<<10&4294967295|G>>>22),G=P+(D^(F|~k))+z[6]+2734768916&4294967295,P=F+(G<<15&4294967295|G>>>17),G=k+(F^(P|~D))+z[13]+1309151649&4294967295,k=P+(G<<21&4294967295|G>>>11),G=D+(P^(k|~F))+z[4]+4149444226&4294967295,D=k+(G<<6&4294967295|G>>>26),G=F+(k^(D|~P))+z[11]+3174756917&4294967295,F=D+(G<<10&4294967295|G>>>22),G=P+(D^(F|~k))+z[2]+718787259&4294967295,P=F+(G<<15&4294967295|G>>>17),G=k+(F^(P|~D))+z[9]+3951481745&4294967295,O.g[0]=O.g[0]+D&4294967295,O.g[1]=O.g[1]+(P+(G<<21&4294967295|G>>>11))&4294967295,O.g[2]=O.g[2]+P&4294967295,O.g[3]=O.g[3]+F&4294967295}i.prototype.v=function(O,D){D===void 0&&(D=O.length);const k=D-this.blockSize,z=this.C;let P=this.h,F=0;for(;F<D;){if(P==0)for(;F<=k;)o(this,O,F),F+=this.blockSize;if(typeof O=="string"){for(;F<D;)if(z[P++]=O.charCodeAt(F++),P==this.blockSize){o(this,z),P=0;break}}else for(;F<D;)if(z[P++]=O[F++],P==this.blockSize){o(this,z),P=0;break}}this.h=P,this.o+=D},i.prototype.A=function(){var O=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);O[0]=128;for(var D=1;D<O.length-8;++D)O[D]=0;D=this.o*8;for(var k=O.length-8;k<O.length;++k)O[k]=D&255,D/=256;for(this.v(O),O=Array(16),D=0,k=0;k<4;++k)for(let z=0;z<32;z+=8)O[D++]=this.g[k]>>>z&255;return O};function c(O,D){var k=g;return Object.prototype.hasOwnProperty.call(k,O)?k[O]:k[O]=D(O)}function h(O,D){this.h=D;const k=[];let z=!0;for(let P=O.length-1;P>=0;P--){const F=O[P]|0;z&&F==D||(k[P]=F,z=!1)}this.g=k}var g={};function y(O){return-128<=O&&O<128?c(O,function(D){return new h([D|0],D<0?-1:0)}):new h([O|0],O<0?-1:0)}function v(O){if(isNaN(O)||!isFinite(O))return S;if(O<0)return Y(v(-O));const D=[];let k=1;for(let z=0;O>=k;z++)D[z]=O/k|0,k*=4294967296;return new h(D,0)}function E(O,D){if(O.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(O.charAt(0)=="-")return Y(E(O.substring(1),D));if(O.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=v(Math.pow(D,8));let z=S;for(let F=0;F<O.length;F+=8){var P=Math.min(8,O.length-F);const G=parseInt(O.substring(F,F+P),D);P<8?(P=v(Math.pow(D,P)),z=z.j(P).add(v(G))):(z=z.j(k),z=z.add(v(G)))}return z}var S=y(0),I=y(1),q=y(16777216);s=h.prototype,s.m=function(){if(te(this))return-Y(this).m();let O=0,D=1;for(let k=0;k<this.g.length;k++){const z=this.i(k);O+=(z>=0?z:4294967296+z)*D,D*=4294967296}return O},s.toString=function(O){if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(W(this))return"0";if(te(this))return"-"+Y(this).toString(O);const D=v(Math.pow(O,6));var k=this;let z="";for(;;){const P=_e(k,D).g;k=ue(k,P.j(D));let F=((k.g.length>0?k.g[0]:k.h)>>>0).toString(O);if(k=P,W(k))return F+z;for(;F.length<6;)F="0"+F;z=F+z}},s.i=function(O){return O<0?0:O<this.g.length?this.g[O]:this.h};function W(O){if(O.h!=0)return!1;for(let D=0;D<O.g.length;D++)if(O.g[D]!=0)return!1;return!0}function te(O){return O.h==-1}s.l=function(O){return O=ue(this,O),te(O)?-1:W(O)?0:1};function Y(O){const D=O.g.length,k=[];for(let z=0;z<D;z++)k[z]=~O.g[z];return new h(k,~O.h).add(I)}s.abs=function(){return te(this)?Y(this):this},s.add=function(O){const D=Math.max(this.g.length,O.g.length),k=[];let z=0;for(let P=0;P<=D;P++){let F=z+(this.i(P)&65535)+(O.i(P)&65535),G=(F>>>16)+(this.i(P)>>>16)+(O.i(P)>>>16);z=G>>>16,F&=65535,G&=65535,k[P]=G<<16|F}return new h(k,k[k.length-1]&-2147483648?-1:0)};function ue(O,D){return O.add(Y(D))}s.j=function(O){if(W(this)||W(O))return S;if(te(this))return te(O)?Y(this).j(Y(O)):Y(Y(this).j(O));if(te(O))return Y(this.j(Y(O)));if(this.l(q)<0&&O.l(q)<0)return v(this.m()*O.m());const D=this.g.length+O.g.length,k=[];for(var z=0;z<2*D;z++)k[z]=0;for(z=0;z<this.g.length;z++)for(let P=0;P<O.g.length;P++){const F=this.i(z)>>>16,G=this.i(z)&65535,Fe=O.i(P)>>>16,Mt=O.i(P)&65535;k[2*z+2*P]+=G*Mt,fe(k,2*z+2*P),k[2*z+2*P+1]+=F*Mt,fe(k,2*z+2*P+1),k[2*z+2*P+1]+=G*Fe,fe(k,2*z+2*P+1),k[2*z+2*P+2]+=F*Fe,fe(k,2*z+2*P+2)}for(O=0;O<D;O++)k[O]=k[2*O+1]<<16|k[2*O];for(O=D;O<2*D;O++)k[O]=0;return new h(k,0)};function fe(O,D){for(;(O[D]&65535)!=O[D];)O[D+1]+=O[D]>>>16,O[D]&=65535,D++}function oe(O,D){this.g=O,this.h=D}function _e(O,D){if(W(D))throw Error("division by zero");if(W(O))return new oe(S,S);if(te(O))return D=_e(Y(O),D),new oe(Y(D.g),Y(D.h));if(te(D))return D=_e(O,Y(D)),new oe(Y(D.g),D.h);if(O.g.length>30){if(te(O)||te(D))throw Error("slowDivide_ only works with positive integers.");for(var k=I,z=D;z.l(O)<=0;)k=ke(k),z=ke(z);var P=Me(k,1),F=Me(z,1);for(z=Me(z,2),k=Me(k,2);!W(z);){var G=F.add(z);G.l(O)<=0&&(P=P.add(k),F=G),z=Me(z,1),k=Me(k,1)}return D=ue(O,P.j(D)),new oe(P,D)}for(P=S;O.l(D)>=0;){for(k=Math.max(1,Math.floor(O.m()/D.m())),z=Math.ceil(Math.log(k)/Math.LN2),z=z<=48?1:Math.pow(2,z-48),F=v(k),G=F.j(D);te(G)||G.l(O)>0;)k-=z,F=v(k),G=F.j(D);W(F)&&(F=I),P=P.add(F),O=ue(O,G)}return new oe(P,O)}s.B=function(O){return _e(this,O).h},s.and=function(O){const D=Math.max(this.g.length,O.g.length),k=[];for(let z=0;z<D;z++)k[z]=this.i(z)&O.i(z);return new h(k,this.h&O.h)},s.or=function(O){const D=Math.max(this.g.length,O.g.length),k=[];for(let z=0;z<D;z++)k[z]=this.i(z)|O.i(z);return new h(k,this.h|O.h)},s.xor=function(O){const D=Math.max(this.g.length,O.g.length),k=[];for(let z=0;z<D;z++)k[z]=this.i(z)^O.i(z);return new h(k,this.h^O.h)};function ke(O){const D=O.g.length+1,k=[];for(let z=0;z<D;z++)k[z]=O.i(z)<<1|O.i(z-1)>>>31;return new h(k,O.h)}function Me(O,D){const k=D>>5;D%=32;const z=O.g.length-k,P=[];for(let F=0;F<z;F++)P[F]=D>0?O.i(F+k)>>>D|O.i(F+k+1)<<32-D:O.i(F+k);return new h(P,O.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,nE=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=E,Io=h}).apply(typeof G0<"u"?G0:typeof self<"u"?self:typeof window<"u"?window:{});var Oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var rE,Bu,sE,tf,_g,iE,aE,oE;(function(){var s,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oh=="object"&&Oh];for(var b=0;b<d.length;++b){var w=d[b];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function o(d,b){if(b)e:{var w=i;d=d.split(".");for(var C=0;C<d.length-1;C++){var $=d[C];if(!($ in w))break e;w=w[$]}d=d[d.length-1],C=w[d],b=b(C),b!=C&&b!=null&&e(w,d,{configurable:!0,writable:!0,value:b})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(b){var w=[],C;for(C in b)Object.prototype.hasOwnProperty.call(b,C)&&w.push([C,b[C]]);return w}});var c=c||{},h=this||self;function g(d){var b=typeof d;return b=="object"&&d!=null||b=="function"}function y(d,b,w){return d.call.apply(d.bind,arguments)}function v(d,b,w){return v=y,v.apply(null,arguments)}function E(d,b){var w=Array.prototype.slice.call(arguments,1);return function(){var C=w.slice();return C.push.apply(C,arguments),d.apply(this,C)}}function S(d,b){function w(){}w.prototype=b.prototype,d.Z=b.prototype,d.prototype=new w,d.prototype.constructor=d,d.Ob=function(C,$,J){for(var me=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)me[Ve-2]=arguments[Ve];return b.prototype[$].apply(C,me)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function q(d){const b=d.length;if(b>0){const w=Array(b);for(let C=0;C<b;C++)w[C]=d[C];return w}return[]}function W(d,b){for(let C=1;C<arguments.length;C++){const $=arguments[C];var w=typeof $;if(w=w!="object"?w:$?Array.isArray($)?"array":w:"null",w=="array"||w=="object"&&typeof $.length=="number"){w=d.length||0;const J=$.length||0;d.length=w+J;for(let me=0;me<J;me++)d[w+me]=$[me]}else d.push($)}}class te{constructor(b,w){this.i=b,this.j=w,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function Y(d){h.setTimeout(()=>{throw d},0)}function ue(){var d=O;let b=null;return d.g&&(b=d.g,d.g=d.g.next,d.g||(d.h=null),b.next=null),b}class fe{constructor(){this.h=this.g=null}add(b,w){const C=oe.get();C.set(b,w),this.h?this.h.next=C:this.g=C,this.h=C}}var oe=new te(()=>new _e,d=>d.reset());class _e{constructor(){this.next=this.g=this.h=null}set(b,w){this.h=b,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ke,Me=!1,O=new fe,D=()=>{const d=Promise.resolve(void 0);ke=()=>{d.then(k)}};function k(){for(var d;d=ue();){try{d.h.call(d.g)}catch(w){Y(w)}var b=oe;b.j(d),b.h<100&&(b.h++,d.next=b.g,b.g=d)}Me=!1}function z(){this.u=this.u,this.C=this.C}z.prototype.u=!1,z.prototype.dispose=function(){this.u||(this.u=!0,this.N())},z.prototype[Symbol.dispose]=function(){this.dispose()},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(d,b){this.type=d,this.g=this.target=b,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,b=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const w=()=>{};h.addEventListener("test",w,b),h.removeEventListener("test",w,b)}catch{}return d})();function G(d){return/^[\s\xa0]*$/.test(d)}function Fe(d,b){P.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,b)}S(Fe,P),Fe.prototype.init=function(d,b){const w=this.type=d.type,C=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=b,b=d.relatedTarget,b||(w=="mouseover"?b=d.fromElement:w=="mouseout"&&(b=d.toElement)),this.relatedTarget=b,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Fe.Z.h.call(this)},Fe.prototype.h=function(){Fe.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Mt="closure_listenable_"+(Math.random()*1e6|0),ee=0;function ge(d,b,w,C,$){this.listener=d,this.proxy=null,this.src=b,this.type=w,this.capture=!!C,this.ha=$,this.key=++ee,this.da=this.fa=!1}function Ne(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Xe(d,b,w){for(const C in d)b.call(w,d[C],C,d)}function at(d,b){for(const w in d)b.call(void 0,d[w],w,d)}function U(d){const b={};for(const w in d)b[w]=d[w];return b}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(d,b){let w,C;for(let $=1;$<arguments.length;$++){C=arguments[$];for(w in C)d[w]=C[w];for(let J=0;J<B.length;J++)w=B[J],Object.prototype.hasOwnProperty.call(C,w)&&(d[w]=C[w])}}function he(d){this.src=d,this.g={},this.h=0}he.prototype.add=function(d,b,w,C,$){const J=d.toString();d=this.g[J],d||(d=this.g[J]=[],this.h++);const me=ye(d,b,C,$);return me>-1?(b=d[me],w||(b.fa=!1)):(b=new ge(b,this.src,J,!!C,$),b.fa=w,d.push(b)),b};function ve(d,b){const w=b.type;if(w in d.g){var C=d.g[w],$=Array.prototype.indexOf.call(C,b,void 0),J;(J=$>=0)&&Array.prototype.splice.call(C,$,1),J&&(Ne(b),d.g[w].length==0&&(delete d.g[w],d.h--))}}function ye(d,b,w,C){for(let $=0;$<d.length;++$){const J=d[$];if(!J.da&&J.listener==b&&J.capture==!!w&&J.ha==C)return $}return-1}var Se="closure_lm_"+(Math.random()*1e6|0),Le={};function Ie(d,b,w,C,$){if(Array.isArray(b)){for(let J=0;J<b.length;J++)Ie(d,b[J],w,C,$);return null}return w=ps(w),d&&d[Mt]?d.J(b,w,g(C)?!!C.capture:!1,$):Be(d,b,w,!1,C,$)}function Be(d,b,w,C,$,J){if(!b)throw Error("Invalid event type");const me=g($)?!!$.capture:!!$;let Ve=qn(d);if(Ve||(d[Se]=Ve=new he(d)),w=Ve.add(b,w,C,me,J),w.proxy)return w;if(C=At(),w.proxy=C,C.src=d,C.listener=w,d.addEventListener)F||($=me),$===void 0&&($=!1),d.addEventListener(b.toString(),C,$);else if(d.attachEvent)d.attachEvent(_n(b.toString()),C);else if(d.addListener&&d.removeListener)d.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return w}function At(){function d(w){return b.call(d.src,d.listener,w)}const b=Ia;return d}function Yr(d,b,w,C,$){if(Array.isArray(b))for(var J=0;J<b.length;J++)Yr(d,b[J],w,C,$);else C=g(C)?!!C.capture:!!C,w=ps(w),d&&d[Mt]?(d=d.i,J=String(b).toString(),J in d.g&&(b=d.g[J],w=ye(b,w,C,$),w>-1&&(Ne(b[w]),Array.prototype.splice.call(b,w,1),b.length==0&&(delete d.g[J],d.h--)))):d&&(d=qn(d))&&(b=d.g[b.toString()],d=-1,b&&(d=ye(b,w,C,$)),(w=d>-1?b[d]:null)&&yr(w))}function yr(d){if(typeof d!="number"&&d&&!d.da){var b=d.src;if(b&&b[Mt])ve(b.i,d);else{var w=d.type,C=d.proxy;b.removeEventListener?b.removeEventListener(w,C,d.capture):b.detachEvent?b.detachEvent(_n(w),C):b.addListener&&b.removeListener&&b.removeListener(C),(w=qn(b))?(ve(w,d),w.h==0&&(w.src=null,b[Se]=null)):Ne(d)}}}function _n(d){return d in Le?Le[d]:Le[d]="on"+d}function Ia(d,b){if(d.da)d=!0;else{b=new Fe(b,this);const w=d.listener,C=d.ha||d.src;d.fa&&yr(d),d=w.call(C,b)}return d}function qn(d){return d=d[Se],d instanceof he?d:null}var ja="__closure_events_fn_"+(Math.random()*1e9>>>0);function ps(d){return typeof d=="function"?d:(d[ja]||(d[ja]=function(b){return d.handleEvent(b)}),d[ja])}function $t(){z.call(this),this.i=new he(this),this.M=this,this.G=null}S($t,z),$t.prototype[Mt]=!0,$t.prototype.removeEventListener=function(d,b,w,C){Yr(this,d,b,w,C)};function jt(d,b){var w,C=d.G;if(C)for(w=[];C;C=C.G)w.push(C);if(d=d.M,C=b.type||b,typeof b=="string")b=new P(b,d);else if(b instanceof P)b.target=b.target||d;else{var $=b;b=new P(C,d),le(b,$)}$=!0;let J,me;if(w)for(me=w.length-1;me>=0;me--)J=b.g=w[me],$=Os(J,C,!0,b)&&$;if(J=b.g=d,$=Os(J,C,!0,b)&&$,$=Os(J,C,!1,b)&&$,w)for(me=0;me<w.length;me++)J=b.g=w[me],$=Os(J,C,!1,b)&&$}$t.prototype.N=function(){if($t.Z.N.call(this),this.i){var d=this.i;for(const b in d.g){const w=d.g[b];for(let C=0;C<w.length;C++)Ne(w[C]);delete d.g[b],d.h--}}this.G=null},$t.prototype.J=function(d,b,w,C){return this.i.add(String(d),b,!1,w,C)},$t.prototype.K=function(d,b,w,C){return this.i.add(String(d),b,!0,w,C)};function Os(d,b,w,C){if(b=d.i.g[String(b)],!b)return!0;b=b.concat();let $=!0;for(let J=0;J<b.length;++J){const me=b[J];if(me&&!me.da&&me.capture==w){const Ve=me.listener,qt=me.ha||me.src;me.fa&&ve(d.i,me),$=Ve.call(qt,C)!==!1&&$}}return $&&!C.defaultPrevented}function vt(d,b){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=v(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:h.setTimeout(d,b||0)}function wn(d){d.g=vt(()=>{d.g=null,d.i&&(d.i=!1,wn(d))},d.l);const b=d.h;d.h=null,d.m.apply(null,b)}class Pe extends z{constructor(b,w){super(),this.m=b,this.l=w,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:wn(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xr(d){z.call(this),this.h=d,this.g={}}S(Xr,z);var Da=[];function Wr(d){Xe(d.g,function(b,w){this.g.hasOwnProperty(w)&&yr(b)},d),d.g={}}Xr.prototype.N=function(){Xr.Z.N.call(this),Wr(this)},Xr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=h.JSON.stringify,Rn=h.JSON.parse,ct=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function rr(){}function $o(){}var wt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Lt(){P.call(this,"d")}S(Lt,P);function En(){P.call(this,"c")}S(En,P);var lt={},Qo=null;function Fn(){return Qo=Qo||new $t}lt.Ia="serverreachability";function Ko(d){P.call(this,lt.Ia,d)}S(Ko,P);function br(d){const b=Fn();jt(b,new Ko(b))}lt.STAT_EVENT="statevent";function Gs(d,b){P.call(this,lt.STAT_EVENT,d),this.stat=b}S(Gs,P);function Qt(d){const b=Fn();jt(b,new Gs(b,d))}lt.Ja="timingevent";function Kt(d,b){P.call(this,lt.Ja,d),this.size=b}S(Kt,P);function Jr(d,b){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},b)}function In(){this.g=!0}In.prototype.ua=function(){this.g=!1};function ai(d,b,w,C,$,J){d.info(function(){if(d.g)if(J){var me="",Ve=J.split("&");for(let He=0;He<Ve.length;He++){var qt=Ve[He].split("=");if(qt.length>1){const Ct=qt[0];qt=qt[1];const Nn=Ct.split("_");me=Nn.length>=2&&Nn[1]=="type"?me+(Ct+"="+qt+"&"):me+(Ct+"=redacted&")}}}else me=null;else me=J;return"XMLHTTP REQ ("+C+") [attempt "+$+"]: "+b+`
`+w+`
`+me})}function $i(d,b,w,C,$,J,me){d.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+$+"]: "+b+`
`+w+`
`+J+" "+me})}function gt(d,b,w,C){d.info(function(){return"XMLHTTP TEXT ("+b+"): "+Yo(d,w)+(C?" "+C:"")})}function oi(d,b){d.info(function(){return"TIMEOUT: "+b})}In.prototype.info=function(){};function Yo(d,b){if(!d.g)return b;if(!b)return null;try{const J=JSON.parse(b);if(J){for(d=0;d<J.length;d++)if(Array.isArray(J[d])){var w=J[d];if(!(w.length<2)){var C=w[1];if(Array.isArray(C)&&!(C.length<1)){var $=C[0];if($!="noop"&&$!="stop"&&$!="close")for(let me=1;me<C.length;me++)C[me]=""}}}}return de(J)}catch{return b}}var Qi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Hn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ka;function Ms(){}S(Ms,rr),Ms.prototype.g=function(){return new XMLHttpRequest},ka=new Ms;function Ps(d){return encodeURIComponent(String(d))}function Vs(d){var b=1;d=d.split(":");const w=[];for(;b>0&&d.length;)w.push(d.shift()),b--;return d.length&&w.push(d.join(":")),w}function vr(d,b,w,C){this.j=d,this.i=b,this.l=w,this.S=C||1,this.V=new Xr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xr}function xr(){this.i=null,this.g="",this.h=!1}var Bt={},on={};function Zr(d,b,w){d.M=1,d.A=Us(Dt(b)),d.u=w,d.R=!0,Ki(d,null)}function Ki(d,b){d.F=Date.now(),es(d),d.B=Dt(d.A);var w=d.B,C=d.S;Array.isArray(C)||(C=[String(C)]),bs(w.i,"t",C),d.C=0,w=d.j.L,d.h=new xr,d.g=za(d.j,w?b:null,!d.u),d.P>0&&(d.O=new Pe(v(d.Y,d,d.g),d.P)),b=d.V,w=d.g,C=d.ba;var $="readystatechange";Array.isArray($)||($&&(Da[0]=$.toString()),$=Da);for(let J=0;J<$.length;J++){const me=Ie(w,$[J],C||b.handleEvent,!1,b.h||b);if(!me)break;b.g[me.key]=me}b=d.J?U(d.J):{},d.u?(d.v||(d.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,b)):(d.v="GET",d.g.ea(d.B,d.v,null,b)),br(),ai(d.i,d.v,d.B,d.l,d.S,d.u)}vr.prototype.ba=function(d){d=d.target;const b=this.O;b&&Qn(d)==3?b.j():this.Y(d)},vr.prototype.Y=function(d){try{if(d==this.g)e:{const Ve=Qn(this.g),qt=this.g.ya(),He=this.g.ca();if(!(Ve<3)&&(Ve!=3||this.g&&(this.h.h||this.g.la()||Tn(this.g)))){this.K||Ve!=4||qt==7||(qt==8||He<=0?br(3):br(2)),_r(this);var b=this.g.ca();this.X=b;var w=gs(this);if(this.o=b==200,$i(this.i,this.v,this.B,this.l,this.S,Ve,b),this.o){if(this.U&&!this.L){t:{if(this.g){var C,$=this.g;if((C=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(C)){var J=C;break t}}J=null}if(d=J)gt(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,sr(this,d);else{this.o=!1,this.m=3,Qt(12),Zt(this),kn(this);break e}}if(this.R){d=!0;let Ct;for(;!this.K&&this.C<w.length;)if(Ct=Oa(this,w),Ct==on){Ve==4&&(this.m=4,Qt(14),d=!1),gt(this.i,this.l,null,"[Incomplete Response]");break}else if(Ct==Bt){this.m=4,Qt(15),gt(this.i,this.l,w,"[Invalid Chunk]"),d=!1;break}else gt(this.i,this.l,Ct,null),sr(this,Ct);if(Yi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||w.length!=0||this.h.h||(this.m=1,Qt(16),d=!1),this.o=this.o&&d,!d)gt(this.i,this.l,w,"[Invalid Chunked Response]"),Zt(this),kn(this);else if(w.length>0&&!this.W){this.W=!0;var me=this.j;me.g==this&&me.aa&&!me.P&&(me.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),La(me),me.P=!0,Qt(11))}}else gt(this.i,this.l,w,null),sr(this,w);Ve==4&&Zt(this),this.o&&!this.K&&(Ve==4?yi(this.j,this):(this.o=!1,es(this)))}else Cr(this.g),b==400&&w.indexOf("Unknown SID")>0?(this.m=3,Qt(12)):(this.m=0,Qt(13)),Zt(this),kn(this)}}}catch{}finally{}};function gs(d){if(!Yi(d))return d.g.la();const b=Tn(d.g);if(b==="")return"";let w="";const C=b.length,$=Qn(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Zt(d),kn(d),"";d.h.i=new h.TextDecoder}for(let J=0;J<C;J++)d.h.h=!0,w+=d.h.i.decode(b[J],{stream:!($&&J==C-1)});return b.length=0,d.h.g+=w,d.C=0,d.h.g}function Yi(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Oa(d,b){var w=d.C,C=b.indexOf(`
`,w);return C==-1?on:(w=Number(b.substring(w,C)),isNaN(w)?Bt:(C+=1,C+w>b.length?on:(b=b.slice(C,C+w),d.C=C+w,b)))}vr.prototype.cancel=function(){this.K=!0,Zt(this)};function es(d){d.T=Date.now()+d.H,Xi(d,d.H)}function Xi(d,b){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Jr(v(d.aa,d),b)}function _r(d){d.D&&(h.clearTimeout(d.D),d.D=null)}vr.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(oi(this.i,this.B),this.M!=2&&(br(),Qt(17)),Zt(this),this.m=2,kn(this)):Xi(this,this.T-d)};function kn(d){d.j.I==0||d.K||yi(d.j,d)}function Zt(d){_r(d);var b=d.O;b&&typeof b.dispose=="function"&&b.dispose(),d.O=null,Wr(d.V),d.g&&(b=d.g,d.g=null,b.abort(),b.dispose())}function sr(d,b){try{var w=d.j;if(w.I!=0&&(w.g==d||Er(w.h,d))){if(!d.L&&Er(w.h,d)&&w.I==3){try{var C=w.Ba.g.parse(b)}catch{C=null}if(Array.isArray(C)&&C.length==3){var $=C;if($[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<d.F)na(w),Ir(w);else break e;gi(w),Qt(18)}}else w.xa=$[1],0<w.xa-w.K&&$[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Jr(v(w.Va,w),6e3));wr(w.h)<=1&&w.ta&&(w.ta=void 0)}else Kn(w,11)}else if((d.L||w.g==d)&&na(w),!G(b))for($=w.Ba.g.parse(b),b=0;b<$.length;b++){let He=$[b];const Ct=He[0];if(!(Ct<=w.K))if(w.K=Ct,He=He[1],w.I==2)if(He[0]=="c"){w.M=He[1],w.ba=He[2];const Nn=He[3];Nn!=null&&(w.ka=Nn,w.j.info("VER="+w.ka));const is=He[4];is!=null&&(w.za=is,w.j.info("SVER="+w.za));const Dr=He[5];Dr!=null&&typeof Dr=="number"&&Dr>0&&(C=1.5*Dr,w.O=C,w.j.info("backChannelRequestTimeoutMs_="+C)),C=w;const or=d.g;if(or){const Mn=or.g?or.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mn){var J=C.h;J.g||Mn.indexOf("spdy")==-1&&Mn.indexOf("quic")==-1&&Mn.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Wi(J,J.h),J.h=null))}if(C.G){const vi=or.g?or.g.getResponseHeader("X-HTTP-Session-Id"):null;vi&&(C.wa=vi,mt(C.J,C.G,vi))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-d.F,w.j.info("Handshake RTT: "+w.T+"ms")),C=w;var me=d;if(C.na=_s(C,C.L?C.ba:null,C.W),me.L){Ji(C.h,me);var Ve=me,qt=C.O;qt&&(Ve.H=qt),Ve.D&&(_r(Ve),es(Ve)),C.g=me}else el(C);w.i.length>0&&ss(w)}else He[0]!="stop"&&He[0]!="close"||Kn(w,7);else w.I==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?Kn(w,7):Rr(w):He[0]!="noop"&&w.l&&w.l.qa(He),w.A=0)}}br(4)}catch{}}var Yt=class{constructor(d,b){this.g=d,this.map=b}};function li(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ci(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function wr(d){return d.h?1:d.g?d.g.size:0}function Er(d,b){return d.h?d.h==b:d.g?d.g.has(b):!1}function Wi(d,b){d.g?d.g.add(b):d.h=b}function Ji(d,b){d.h&&d.h==b?d.h=null:d.g&&d.g.has(b)&&d.g.delete(b)}li.prototype.cancel=function(){if(this.i=Zi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Zi(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let b=d.i;for(const w of d.g.values())b=b.concat(w.G);return b}return q(d.i)}var Ga=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ui(d,b){if(d){d=d.split("&");for(let w=0;w<d.length;w++){const C=d[w].indexOf("=");let $,J=null;C>=0?($=d[w].substring(0,C),J=d[w].substring(C+1)):$=d[w],b($,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function $e(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;d instanceof $e?(this.l=d.l,Xt(this,d.j),this.o=d.o,this.g=d.g,We(this,d.u),this.h=d.h,di(this,Jo(d.i)),this.m=d.m):d&&(b=String(d).match(Ga))?(this.l=!1,Xt(this,b[1]||"",!0),this.o=ys(b[2]||""),this.g=ys(b[3]||"",!0),We(this,b[4]),this.h=ys(b[5]||"",!0),di(this,b[6]||"",!0),this.m=ys(b[7]||"")):(this.l=!1,this.i=new Ls(null,this.l))}$e.prototype.toString=function(){const d=[];var b=this.j;b&&d.push(hi(b,Tr,!0),":");var w=this.g;return(w||b=="file")&&(d.push("//"),(b=this.o)&&d.push(hi(b,Tr,!0),"@"),d.push(Ps(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&d.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&d.push("/"),d.push(hi(w,w.charAt(0)=="/"?Ma:Xo,!0))),(w=this.i.toString())&&d.push("?",w),(w=this.m)&&d.push("#",hi(w,Wo)),d.join("")},$e.prototype.resolve=function(d){const b=Dt(this);let w=!!d.j;w?Xt(b,d.j):w=!!d.o,w?b.o=d.o:w=!!d.g,w?b.g=d.g:w=d.u!=null;var C=d.h;if(w)We(b,d.u);else if(w=!!d.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var $=b.h.lastIndexOf("/");$!=-1&&(C=b.h.slice(0,$+1)+C)}if($=C,$==".."||$==".")C="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){C=$.lastIndexOf("/",0)==0,$=$.split("/");const J=[];for(let me=0;me<$.length;){const Ve=$[me++];Ve=="."?C&&me==$.length&&J.push(""):Ve==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),C&&me==$.length&&J.push("")):(J.push(Ve),C=!0)}C=J.join("/")}else C=$}return w?b.h=C:w=d.i.toString()!=="",w?di(b,Jo(d.i)):w=!!d.m,w&&(b.m=d.m),b};function Dt(d){return new $e(d)}function Xt(d,b,w){d.j=w?ys(b,!0):b,d.j&&(d.j=d.j.replace(/:$/,""))}function We(d,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);d.u=b}else d.u=null}function di(d,b,w){b instanceof Ls?(d.i=b,en(d.i,d.l)):(w||(b=hi(b,kt)),d.i=new Ls(b,d.l))}function mt(d,b,w){d.i.set(b,w)}function Us(d){return mt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function ys(d,b){return d?b?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function hi(d,b,w){return typeof d=="string"?(d=encodeURI(d).replace(b,On),w&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function On(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Tr=/[#\/\?@]/g,Xo=/[#\?:]/g,Ma=/[#\?]/g,kt=/[#\?@]/g,Wo=/#/g;function Ls(d,b){this.h=this.g=null,this.i=d||null,this.j=!!b}function Gn(d){d.g||(d.g=new Map,d.h=0,d.i&&ui(d.i,function(b,w){d.add(decodeURIComponent(b.replace(/\+/g," ")),w)}))}s=Ls.prototype,s.add=function(d,b){Gn(this),this.i=null,d=zs(this,d);let w=this.g.get(d);return w||this.g.set(d,w=[]),w.push(b),this.h+=1,this};function Bs(d,b){Gn(d),b=zs(d,b),d.g.has(b)&&(d.i=null,d.h-=d.g.get(b).length,d.g.delete(b))}function ir(d,b){return Gn(d),b=zs(d,b),d.g.has(b)}s.forEach=function(d,b){Gn(this),this.g.forEach(function(w,C){w.forEach(function($){d.call(b,$,C,this)},this)},this)};function ea(d,b){Gn(d);let w=[];if(typeof b=="string")ir(d,b)&&(w=w.concat(d.g.get(zs(d,b))));else for(d=Array.from(d.g.values()),b=0;b<d.length;b++)w=w.concat(d[b]);return w}s.set=function(d,b){return Gn(this),this.i=null,d=zs(this,d),ir(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[b]),this.h+=1,this},s.get=function(d,b){return d?(d=ea(this,d),d.length>0?String(d[0]):b):b};function bs(d,b,w){Bs(d,b),w.length>0&&(d.i=null,d.g.set(zs(d,b),q(w)),d.h+=w.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],b=Array.from(this.g.keys());for(let C=0;C<b.length;C++){var w=b[C];const $=Ps(w);w=ea(this,w);for(let J=0;J<w.length;J++){let me=$;w[J]!==""&&(me+="="+Ps(w[J])),d.push(me)}}return this.i=d.join("&")};function Jo(d){const b=new Ls;return b.i=d.i,d.g&&(b.g=new Map(d.g),b.h=d.h),b}function zs(d,b){return b=String(b),d.j&&(b=b.toLowerCase()),b}function en(d,b){b&&!d.j&&(Gn(d),d.i=null,d.g.forEach(function(w,C){const $=C.toLowerCase();C!=$&&(Bs(this,C),bs(this,$,w))},d)),d.j=b}function Nr(d,b){const w=new In;if(h.Image){const C=new Image;C.onload=E(ar,w,"TestLoadImage: loaded",!0,b,C),C.onerror=E(ar,w,"TestLoadImage: error",!1,b,C),C.onabort=E(ar,w,"TestLoadImage: abort",!1,b,C),C.ontimeout=E(ar,w,"TestLoadImage: timeout",!1,b,C),h.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=d}else b(!1)}function Sr(d,b){const w=new In,C=new AbortController,$=setTimeout(()=>{C.abort(),ar(w,"TestPingServer: timeout",!1,b)},1e4);fetch(d,{signal:C.signal}).then(J=>{clearTimeout($),J.ok?ar(w,"TestPingServer: ok",!0,b):ar(w,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout($),ar(w,"TestPingServer: error",!1,b)})}function ar(d,b,w,C,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),C(w)}catch{}}function qs(){this.g=new ct}function $n(d){this.i=d.Sb||null,this.h=d.ab||!1}S($n,rr),$n.prototype.g=function(){return new Pt(this.i,this.h)};function Pt(d,b){$t.call(this),this.H=d,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(Pt,$t),s=Pt.prototype,s.open=function(d,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=b,this.readyState=1,Ar(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(b.body=d),(this.H||h).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vs(this)),this.readyState=0},s.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Ar(this)),this.g&&(this.readyState=3,Ar(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;fi(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function fi(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}s.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var b=d.value?d.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!d.done}))&&(this.response=this.responseText+=b)}d.done?vs(this):Ar(this),this.readyState==3&&fi(this)}},s.Oa=function(d){this.g&&(this.response=this.responseText=d,vs(this))},s.Na=function(d){this.g&&(this.response=d,vs(this))},s.ga=function(){this.g&&vs(this)};function vs(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Ar(d)}s.setRequestHeader=function(d,b){this.A.append(d,b)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],b=this.h.entries();for(var w=b.next();!w.done;)w=w.value,d.push(w[0]+": "+w[1]),w=b.next();return d.join(`\r
`)};function Ar(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Pt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function tn(d){let b="";return Xe(d,function(w,C){b+=C,b+=":",b+=w,b+=`\r
`}),b}function ts(d,b,w){e:{for(C in w){var C=!1;break e}C=!0}C||(w=tn(w),typeof d=="string"?w!=null&&Ps(w):mt(d,b,w))}function ut(d){$t.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(ut,$t);var ns=/^https?$/i,Pa=["POST","PUT"];s=ut.prototype,s.Fa=function(d){this.H=d},s.ea=function(d,b,w,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);b=b?b.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ka.g(),this.g.onreadystatechange=I(v(this.Ca,this));try{this.B=!0,this.g.open(b,String(d),!0),this.B=!1}catch(J){mi(this,J);return}if(d=w||"",w=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var $ in C)w.set($,C[$]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const J of C.keys())w.set(J,C.get(J));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(w.keys()).find(J=>J.toLowerCase()=="content-type"),$=h.FormData&&d instanceof h.FormData,!(Array.prototype.indexOf.call(Pa,b,void 0)>=0)||C||$||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,me]of w)this.g.setRequestHeader(J,me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(J){mi(this,J)}};function mi(d,b){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=b,d.o=5,Va(d),zt(d)}function Va(d){d.A||(d.A=!0,jt(d,"complete"),jt(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,jt(this,"complete"),jt(this,"abort"),zt(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zt(this,!0)),ut.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Fs(this):this.Xa())},s.Xa=function(){Fs(this)};function Fs(d){if(d.h&&typeof c<"u"){if(d.v&&Qn(d)==4)setTimeout(d.Ca.bind(d),0);else if(jt(d,"readystatechange"),Qn(d)==4){d.h=!1;try{const J=d.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var w;if(!(w=b)){var C;if(C=J===0){let me=String(d.D).match(Ga)[1]||null;!me&&h.self&&h.self.location&&(me=h.self.location.protocol.slice(0,-1)),C=!ns.test(me?me.toLowerCase():"")}w=C}if(w)jt(d,"complete"),jt(d,"success");else{d.o=6;try{var $=Qn(d)>2?d.g.statusText:""}catch{$=""}d.l=$+" ["+d.ca()+"]",Va(d)}}finally{zt(d)}}}}function zt(d,b){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const w=d.g;d.g=null,b||jt(d,"ready");try{w.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Qn(d){return d.g?d.g.readyState:0}s.ca=function(){try{return Qn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(d){if(this.g){var b=this.g.responseText;return d&&b.indexOf(d)==0&&(b=b.substring(d.length)),Rn(b)}};function Tn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Cr(d){const b={};d=(d.g&&Qn(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<d.length;C++){if(G(d[C]))continue;var w=Vs(d[C]);const $=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const J=b[$]||[];b[$]=J,J.push(w)}at(b,function(C){return C.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xs(d,b,w){return w&&w.internalChannelParams&&w.internalChannelParams[d]||b}function rs(d){this.za=0,this.i=[],this.j=new In,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xs("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xs("baseRetryDelayMs",5e3,d),this.Za=xs("retryDelaySeedMs",1e4,d),this.Ta=xs("forwardChannelMaxRetries",2,d),this.va=xs("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new li(d&&d.concurrentRequestLimit),this.Ba=new qs,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=rs.prototype,s.ka=8,s.I=1,s.connect=function(d,b,w,C){Qt(0),this.W=d,this.H=b||{},w&&C!==void 0&&(this.H.OSID=w,this.H.OAID=C),this.F=this.X,this.J=_s(this,null,this.W),ss(this)};function Rr(d){if(ta(d),d.I==3){var b=d.V++,w=Dt(d.J);if(mt(w,"SID",d.M),mt(w,"RID",b),mt(w,"TYPE","terminate"),pi(d,w),b=new vr(d,d.j,b),b.M=2,b.A=Us(Dt(w)),w=!1,h.navigator&&h.navigator.sendBeacon)try{w=h.navigator.sendBeacon(b.A.toString(),"")}catch{}!w&&h.Image&&(new Image().src=b.A,w=!0),w||(b.g=za(b.j,null),b.g.ea(b.A)),b.F=Date.now(),es(b)}Ba(d)}function Ir(d){d.g&&(La(d),d.g.cancel(),d.g=null)}function ta(d){Ir(d),d.v&&(h.clearTimeout(d.v),d.v=null),na(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&h.clearTimeout(d.m),d.m=null)}function ss(d){if(!ci(d.h)&&!d.m){d.m=!0;var b=d.Ea;ke||D(),Me||(ke(),Me=!0),O.add(b,d),d.D=0}}function je(d,b){return wr(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=b.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Jr(v(d.Ea,d,b),ra(d,d.D)),d.D++,!0)}s.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const $=new vr(this,this.j,d);let J=this.o;if(this.U&&(J?(J=U(J),le(J,this.U)):J=this.U),this.u!==null||this.R||($.J=J,J=null),this.S)e:{for(var b=0,w=0;w<this.i.length;w++){t:{var C=this.i[w];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(b+=C,b>4096){b=w;break e}if(b===4096||w===this.i.length-1){b=w+1;break e}}b=1e3}else b=1e3;b=Zo(this,$,b),w=Dt(this.J),mt(w,"RID",d),mt(w,"CVER",22),this.G&&mt(w,"X-HTTP-Session-Id",this.G),pi(this,w),J&&(this.R?b="headers="+Ps(tn(J))+"&"+b:this.u&&ts(w,this.u,J)),Wi(this.h,$),this.Ra&&mt(w,"TYPE","init"),this.S?(mt(w,"$req",b),mt(w,"SID","null"),$.U=!0,Zr($,w,null)):Zr($,w,b),this.I=2}}else this.I==3&&(d?Ua(this,d):this.i.length==0||ci(this.h)||Ua(this))};function Ua(d,b){var w;b?w=b.l:w=d.V++;const C=Dt(d.J);mt(C,"SID",d.M),mt(C,"RID",w),mt(C,"AID",d.K),pi(d,C),d.u&&d.o&&ts(C,d.u,d.o),w=new vr(d,d.j,w,d.D+1),d.u===null&&(w.J=d.o),b&&(d.i=b.G.concat(d.i)),b=Zo(d,w,1e3),w.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Wi(d.h,w),Zr(w,C,b)}function pi(d,b){d.H&&Xe(d.H,function(w,C){mt(b,C,w)}),d.l&&Xe({},function(w,C){mt(b,C,w)})}function Zo(d,b,w){w=Math.min(d.i.length,w);const C=d.l?v(d.l.Ka,d.l,d):null;e:{var $=d.i;let Ve=-1;for(;;){const qt=["count="+w];Ve==-1?w>0?(Ve=$[0].g,qt.push("ofs="+Ve)):Ve=0:qt.push("ofs="+Ve);let He=!0;for(let Ct=0;Ct<w;Ct++){var J=$[Ct].g;const Nn=$[Ct].map;if(J-=Ve,J<0)Ve=Math.max(0,$[Ct].g-100),He=!1;else try{J="req"+J+"_"||"";try{var me=Nn instanceof Map?Nn:Object.entries(Nn);for(const[is,Dr]of me){let or=Dr;g(Dr)&&(or=de(Dr)),qt.push(J+is+"="+encodeURIComponent(or))}}catch(is){throw qt.push(J+"type="+encodeURIComponent("_badmap")),is}}catch{C&&C(Nn)}}if(He){me=qt.join("&");break e}}me=void 0}return d=d.i.splice(0,w),b.G=d,me}function el(d){if(!d.g&&!d.v){d.Y=1;var b=d.Da;ke||D(),Me||(ke(),Me=!0),O.add(b,d),d.A=0}}function gi(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Jr(v(d.Da,d),ra(d,d.A)),d.A++,!0)}s.Da=function(){if(this.v=null,tl(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Jr(v(this.Wa,this),d)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Qt(10),Ir(this),tl(this))};function La(d){d.B!=null&&(h.clearTimeout(d.B),d.B=null)}function tl(d){d.g=new vr(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var b=Dt(d.na);mt(b,"RID","rpc"),mt(b,"SID",d.M),mt(b,"AID",d.K),mt(b,"CI",d.F?"0":"1"),!d.F&&d.ia&&mt(b,"TO",d.ia),mt(b,"TYPE","xmlhttp"),pi(d,b),d.u&&d.o&&ts(b,d.u,d.o),d.O&&(d.g.H=d.O);var w=d.g;d=d.ba,w.M=1,w.A=Us(Dt(b)),w.u=null,w.R=!0,Ki(w,d)}s.Va=function(){this.C!=null&&(this.C=null,Ir(this),gi(this),Qt(19))};function na(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function yi(d,b){var w=null;if(d.g==b){na(d),La(d),d.g=null;var C=2}else if(Er(d.h,b))w=b.G,Ji(d.h,b),C=1;else return;if(d.I!=0){if(b.o)if(C==1){w=b.u?b.u.length:0,b=Date.now()-b.F;var $=d.D;C=Fn(),jt(C,new Kt(C,w)),ss(d)}else el(d);else if($=b.m,$==3||$==0&&b.X>0||!(C==1&&je(d,b)||C==2&&gi(d)))switch(w&&w.length>0&&(b=d.h,b.i=b.i.concat(w)),$){case 1:Kn(d,5);break;case 4:Kn(d,10);break;case 3:Kn(d,6);break;default:Kn(d,2)}}}function ra(d,b){let w=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(w*=2),w*b}function Kn(d,b){if(d.j.info("Error code "+b),b==2){var w=v(d.bb,d),C=d.Ua;const $=!C;C=new $e(C||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Xt(C,"https"),Us(C),$?Nr(C.toString(),w):Sr(C.toString(),w)}else Qt(2);d.I=0,d.l&&d.l.pa(b),Ba(d),ta(d)}s.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Qt(2)):(this.j.info("Failed to ping google.com"),Qt(1))};function Ba(d){if(d.I=0,d.ja=[],d.l){const b=Zi(d.h);(b.length!=0||d.i.length!=0)&&(W(d.ja,b),W(d.ja,d.i),d.h.i.length=0,q(d.i),d.i.length=0),d.l.oa()}}function _s(d,b,w){var C=w instanceof $e?Dt(w):new $e(w);if(C.g!="")b&&(C.g=b+"."+C.g),We(C,C.u);else{var $=h.location;C=$.protocol,b=b?b+"."+$.hostname:$.hostname,$=+$.port;const J=new $e(null);C&&Xt(J,C),b&&(J.g=b),$&&We(J,$),w&&(J.h=w),C=J}return w=d.G,b=d.wa,w&&b&&mt(C,w,b),mt(C,"VER",d.ka),pi(d,C),C}function za(d,b,w){if(b&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=d.Aa&&!d.ma?new ut(new $n({ab:w})):new ut(d.ma),b.Fa(d.L),b}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function bi(){}s=bi.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function ws(){}ws.prototype.g=function(d,b){return new dt(d,b)};function dt(d,b){$t.call(this),this.g=new rs(b),this.l=d,this.h=b&&b.messageUrlParams||null,d=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(d?d["X-WebChannel-Content-Type"]=b.messageContentType:d={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(d?d["X-WebChannel-Client-Profile"]=b.sa:d={"X-WebChannel-Client-Profile":b.sa}),this.g.U=d,(d=b&&b.Qb)&&!G(d)&&(this.g.u=d),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!G(b)&&(this.g.G=b,d=this.h,d!==null&&b in d&&(d=this.h,b in d&&delete d[b])),this.j=new jr(this)}S(dt,$t),dt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},dt.prototype.close=function(){Rr(this.g)},dt.prototype.o=function(d){var b=this.g;if(typeof d=="string"){var w={};w.__data__=d,d=w}else this.v&&(w={},w.__data__=de(d),d=w);b.i.push(new Yt(b.Ya++,d)),b.I==3&&ss(b)},dt.prototype.N=function(){this.g.l=null,delete this.j,Rr(this.g),delete this.g,dt.Z.N.call(this)};function Hs(d){Lt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var b=d.__sm__;if(b){e:{for(const w in b){d=w;break e}d=void 0}(this.i=d)&&(d=this.i,b=b!==null&&d in b?b[d]:void 0),this.data=b}else this.data=d}S(Hs,Lt);function Pl(){En.call(this),this.status=1}S(Pl,En);function jr(d){this.g=d}S(jr,bi),jr.prototype.ra=function(){jt(this.g,"a")},jr.prototype.qa=function(d){jt(this.g,new Hs(d))},jr.prototype.pa=function(d){jt(this.g,new Pl)},jr.prototype.oa=function(){jt(this.g,"b")},ws.prototype.createWebChannel=ws.prototype.g,dt.prototype.send=dt.prototype.o,dt.prototype.open=dt.prototype.m,dt.prototype.close=dt.prototype.close,oE=function(){return new ws},aE=function(){return Fn()},iE=lt,_g={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qi.NO_ERROR=0,Qi.TIMEOUT=8,Qi.HTTP_ERROR=6,tf=Qi,Hn.COMPLETE="complete",sE=Hn,$o.EventType=wt,wt.OPEN="a",wt.CLOSE="b",wt.ERROR="c",wt.MESSAGE="d",$t.prototype.listen=$t.prototype.J,Bu=$o,ut.prototype.listenOnce=ut.prototype.K,ut.prototype.getLastError=ut.prototype.Ha,ut.prototype.getLastErrorCode=ut.prototype.ya,ut.prototype.getStatus=ut.prototype.ca,ut.prototype.getResponseJson=ut.prototype.La,ut.prototype.getResponseText=ut.prototype.la,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Fa,rE=ut}).apply(typeof Oh<"u"?Oh:typeof self<"u"?self:typeof window<"u"?window:{});const M0="@firebase/firestore",P0="4.9.2";class er{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}er.UNAUTHENTICATED=new er(null),er.GOOGLE_CREDENTIALS=new er("google-credentials-uid"),er.FIRST_PARTY=new er("first-party-uid"),er.MOCK_USER=new er("mock-user");let Uc="12.3.0";const Rl=new Xg("@firebase/firestore");function fc(){return Rl.logLevel}function xe(s,...e){if(Rl.logLevel<=rt.DEBUG){const n=e.map(ay);Rl.debug(`Firestore (${Uc}): ${s}`,...n)}}function Ca(s,...e){if(Rl.logLevel<=rt.ERROR){const n=e.map(ay);Rl.error(`Firestore (${Uc}): ${s}`,...n)}}function Nc(s,...e){if(Rl.logLevel<=rt.WARN){const n=e.map(ay);Rl.warn(`Firestore (${Uc}): ${s}`,...n)}}function ay(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function Ge(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,lE(s,i,n)}function lE(s,e,n){let i=`FIRESTORE (${Uc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ca(i),new Error(i)}function bt(s,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,s||lE(e,o,i)}function qe(s,e){return s}const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Wt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class jo{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class cE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $R{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(er.UNAUTHENTICATED)))}shutdown(){}}class QR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class KR{constructor(e){this.t=e,this.currentUser=er.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){bt(this.o===void 0,42304);let i=this.i;const o=y=>this.i!==i?(i=this.i,n(y)):Promise.resolve();let c=new jo;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new jo,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const y=c;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},g=y=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((y=>g(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new jo)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(bt(typeof i.accessToken=="string",31837,{l:i}),new cE(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bt(e===null||typeof e=="string",2055,{h:e}),new er(e)}}class YR{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=er.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class XR{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new YR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(er.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class V0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){bt(this.o===void 0,3512);const i=c=>{c.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.m;return this.m=c.token,xe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const o=c=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new V0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(bt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new V0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function JR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}class oy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=JR(40);for(let c=0;c<o.length;++c)i.length<20&&o[c]<n&&(i+=e.charAt(o[c]%62))}return i}}function st(s,e){return s<e?-1:s>e?1:0}function wg(s,e){const n=Math.min(s.length,e.length);for(let i=0;i<n;i++){const o=s.charAt(i),c=e.charAt(i);if(o!==c)return tg(o)===tg(c)?st(o,c):tg(o)?1:-1}return st(s.length,e.length)}const ZR=55296,eI=57343;function tg(s){const e=s.charCodeAt(0);return e>=ZR&&e<=eI}function Sc(s,e,n){return s.length===e.length&&s.every(((i,o)=>n(i,e[o])))}const U0="__name__";class Gi{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ge(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Ge(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Gi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gi?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const c=Gi.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return st(e.length,n.length)}static compareSegments(e,n){const i=Gi.isNumericId(e),o=Gi.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?Gi.extractNumericId(e).compare(Gi.extractNumericId(n)):wg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Io.fromString(e.substring(4,e.length-2))}}class Gt extends Gi{construct(e,n,i){return new Gt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new be(se.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((o=>o.length>0)))}return new Gt(n)}static emptyPath(){return new Gt([])}}const tI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bn extends Gi{construct(e,n,i){return new Bn(e,n,i)}static isValidIdentifier(e){return tI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===U0}static keyField(){return new Bn([U0])}static fromServerFormat(e){const n=[];let i="",o=0;const c=()=>{if(i.length===0)throw new be(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let h=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new be(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new be(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=y,o+=2}else g==="`"?(h=!h,o++):g!=="."||h?(i+=g,o++):(c(),o++)}if(c(),h)throw new be(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bn(n)}static emptyPath(){return new Bn([])}}class Re{constructor(e){this.path=e}static fromPath(e){return new Re(Gt.fromString(e))}static fromName(e){return new Re(Gt.fromString(e).popFirst(5))}static empty(){return new Re(Gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Gt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new Gt(e.slice()))}}function uE(s,e,n){if(!n)throw new be(se.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function nI(s,e,n,i){if(e===!0&&i===!0)throw new be(se.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function L0(s){if(!Re.isDocumentKey(s))throw new be(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function B0(s){if(Re.isDocumentKey(s))throw new be(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function dE(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function zf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ge(12329,{type:typeof s})}function ni(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new be(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zf(s);throw new be(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function xn(s,e){const n={typeString:s};return e&&(n.value=e),n}function yd(s,e){if(!dE(s))throw new be(se.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const o=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const h=s[i];if(o&&typeof h!==o){n=`JSON field '${i}' must be a ${o}.`;break}if(c!==void 0&&h!==c.value){n=`Expected '${i}' field to equal '${c.value}'`;break}}if(n)throw new be(se.INVALID_ARGUMENT,n);return!0}const z0=-62135596800,q0=1e6;class Ut{static now(){return Ut.fromMillis(Date.now())}static fromDate(e){return Ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*q0);return new Ut(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new be(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new be(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<z0)throw new be(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/q0}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yd(e,Ut._jsonSchema))return new Ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-z0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ut._jsonSchemaVersion="firestore/timestamp/1.0",Ut._jsonSchema={type:xn("string",Ut._jsonSchemaVersion),seconds:xn("number"),nanoseconds:xn("number")};class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new Ut(0,0))}static max(){return new Ue(new Ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const rd=-1;function rI(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=Ue.fromTimestamp(i===1e9?new Ut(n+1,0):new Ut(n,i));return new Oo(o,Re.empty(),e)}function sI(s){return new Oo(s.readTime,s.key,rd)}class Oo{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Oo(Ue.min(),Re.empty(),rd)}static max(){return new Oo(Ue.max(),Re.empty(),rd)}}function iI(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Re.comparator(s.documentKey,e.documentKey),n!==0?n:st(s.largestBatchId,e.largestBatchId))}const aI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Lc(s){if(s.code!==se.FAILED_PRECONDITION||s.message!==aI)throw s;xe("LocalStore","Unexpectedly lost primary lease")}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ce(((i,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(i,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ce?n:ce.resolve(n)}catch(n){return ce.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ce.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ce.reject(n)}static resolve(e){return new ce(((n,i)=>{n(e)}))}static reject(e){return new ce(((n,i)=>{i(e)}))}static waitFor(e){return new ce(((n,i)=>{let o=0,c=0,h=!1;e.forEach((g=>{++o,g.next((()=>{++c,h&&c===o&&n()}),(y=>i(y)))})),h=!0,c===o&&n()}))}static or(e){let n=ce.resolve(!1);for(const i of e)n=n.next((o=>o?ce.resolve(o):i()));return n}static forEach(e,n){const i=[];return e.forEach(((o,c)=>{i.push(n.call(this,o,c))})),this.waitFor(i)}static mapArray(e,n){return new ce(((i,o)=>{const c=e.length,h=new Array(c);let g=0;for(let y=0;y<c;y++){const v=y;n(e[v]).next((E=>{h[v]=E,++g,g===c&&i(h)}),(E=>o(E)))}}))}static doWhile(e,n){return new ce(((i,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):i()};c()}))}}function lI(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Bc(s){return s.name==="IndexedDbTransactionError"}class qf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}qf.ce=-1;const ly=-1;function Ff(s){return s==null}function vf(s){return s===0&&1/s==-1/0}function cI(s){return typeof s=="number"&&Number.isInteger(s)&&!vf(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const hE="";function uI(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=F0(e)),e=dI(s.get(n),e);return F0(e)}function dI(s,e){let n=e;const i=s.length;for(let o=0;o<i;o++){const c=s.charAt(o);switch(c){case"\0":n+="";break;case hE:n+="";break;default:n+=c}}return n}function F0(s){return s+hE+""}function H0(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function qo(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function fE(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Jt{constructor(e,n){this.comparator=e,this.root=n||Ln.EMPTY}insert(e,n){return new Jt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ln.BLACK,null,null))}remove(e){return new Jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ln.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gh(this.root,e,this.comparator,!0)}}class Gh{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?i(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ln{constructor(e,n,i,o,c){this.key=e,this.value=n,this.color=i??Ln.RED,this.left=o??Ln.EMPTY,this.right=c??Ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,c){return new Ln(e??this.key,n??this.value,i??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,i),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Ln.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ge(27949);return e+(this.isRed()?0:1)}}Ln.EMPTY=null,Ln.RED=!0,Ln.BLACK=!1;Ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Ge(57766)}get value(){throw Ge(16141)}get color(){throw Ge(16727)}get left(){throw Ge(29726)}get right(){throw Ge(36894)}copy(e,n,i,o,c){return this}insert(e,n,i){return new Ln(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Cn{constructor(e){this.comparator=e,this.data=new Jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $0(this.data.getIterator())}getIteratorFrom(e){return new $0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Cn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=i.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Cn(this.comparator);return n.data=e,n}}class $0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class fs{constructor(e){this.fields=e,e.sort(Bn.comparator)}static empty(){return new fs([])}unionWith(e){let n=new Cn(Bn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new fs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Sc(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}class mE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class zn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new mE("Invalid base64 string: "+c):c}})(e);return new zn(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let h=0;h<o.length;++h)c+=String.fromCharCode(o[h]);return c})(e);return new zn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zn.EMPTY_BYTE_STRING=new zn("");const hI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Go(s){if(bt(!!s,39018),typeof s=="string"){let e=0;const n=hI.exec(s);if(bt(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:un(s.seconds),nanos:un(s.nanos)}}function un(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Mo(s){return typeof s=="string"?zn.fromBase64String(s):zn.fromUint8Array(s)}const pE="server_timestamp",gE="__type__",yE="__previous_value__",bE="__local_write_time__";function cy(s){return(s?.mapValue?.fields||{})[gE]?.stringValue===pE}function Hf(s){const e=s.mapValue.fields[yE];return cy(e)?Hf(e):e}function sd(s){const e=Go(s.mapValue.fields[bE].timestampValue);return new Ut(e.seconds,e.nanos)}class fI{constructor(e,n,i,o,c,h,g,y,v,E){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=v,this.isUsingEmulator=E}}const xf="(default)";class id{constructor(e,n){this.projectId=e,this.database=n||xf}static empty(){return new id("","")}get isDefaultDatabase(){return this.database===xf}isEqual(e){return e instanceof id&&e.projectId===this.projectId&&e.database===this.database}}const vE="__type__",mI="__max__",Mh={mapValue:{}},xE="__vector__",_f="value";function Po(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?cy(s)?4:gI(s)?9007199254740991:pI(s)?10:11:Ge(28295,{value:s})}function qi(s,e){if(s===e)return!0;const n=Po(s);if(n!==Po(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return sd(s).isEqual(sd(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const h=Go(o.timestampValue),g=Go(c.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,c){return Mo(o.bytesValue).isEqual(Mo(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,c){return un(o.geoPointValue.latitude)===un(c.geoPointValue.latitude)&&un(o.geoPointValue.longitude)===un(c.geoPointValue.longitude)})(s,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return un(o.integerValue)===un(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const h=un(o.doubleValue),g=un(c.doubleValue);return h===g?vf(h)===vf(g):isNaN(h)&&isNaN(g)}return!1})(s,e);case 9:return Sc(s.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return(function(o,c){const h=o.mapValue.fields||{},g=c.mapValue.fields||{};if(H0(h)!==H0(g))return!1;for(const y in h)if(h.hasOwnProperty(y)&&(g[y]===void 0||!qi(h[y],g[y])))return!1;return!0})(s,e);default:return Ge(52216,{left:s})}}function ad(s,e){return(s.values||[]).find((n=>qi(n,e)))!==void 0}function Ac(s,e){if(s===e)return 0;const n=Po(s),i=Po(e);if(n!==i)return st(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return st(s.booleanValue,e.booleanValue);case 2:return(function(c,h){const g=un(c.integerValue||c.doubleValue),y=un(h.integerValue||h.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1})(s,e);case 3:return Q0(s.timestampValue,e.timestampValue);case 4:return Q0(sd(s),sd(e));case 5:return wg(s.stringValue,e.stringValue);case 6:return(function(c,h){const g=Mo(c),y=Mo(h);return g.compareTo(y)})(s.bytesValue,e.bytesValue);case 7:return(function(c,h){const g=c.split("/"),y=h.split("/");for(let v=0;v<g.length&&v<y.length;v++){const E=st(g[v],y[v]);if(E!==0)return E}return st(g.length,y.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,h){const g=st(un(c.latitude),un(h.latitude));return g!==0?g:st(un(c.longitude),un(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return K0(s.arrayValue,e.arrayValue);case 10:return(function(c,h){const g=c.fields||{},y=h.fields||{},v=g[_f]?.arrayValue,E=y[_f]?.arrayValue,S=st(v?.values?.length||0,E?.values?.length||0);return S!==0?S:K0(v,E)})(s.mapValue,e.mapValue);case 11:return(function(c,h){if(c===Mh.mapValue&&h===Mh.mapValue)return 0;if(c===Mh.mapValue)return 1;if(h===Mh.mapValue)return-1;const g=c.fields||{},y=Object.keys(g),v=h.fields||{},E=Object.keys(v);y.sort(),E.sort();for(let S=0;S<y.length&&S<E.length;++S){const I=wg(y[S],E[S]);if(I!==0)return I;const q=Ac(g[y[S]],v[E[S]]);if(q!==0)return q}return st(y.length,E.length)})(s.mapValue,e.mapValue);default:throw Ge(23264,{he:n})}}function Q0(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return st(s,e);const n=Go(s),i=Go(e),o=st(n.seconds,i.seconds);return o!==0?o:st(n.nanos,i.nanos)}function K0(s,e){const n=s.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const c=Ac(n[o],i[o]);if(c)return c}return st(n.length,i.length)}function Cc(s){return Eg(s)}function Eg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=Go(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Mo(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Re.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",o=!0;for(const c of n.values||[])o?o=!1:i+=",",i+=Eg(c);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const h of i)c?c=!1:o+=",",o+=`${h}:${Eg(n.fields[h])}`;return o+"}"})(s.mapValue):Ge(61005,{value:s})}function nf(s){switch(Po(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hf(s);return e?16+nf(e):16;case 5:return 2*s.stringValue.length;case 6:return Mo(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,c)=>o+nf(c)),0)})(s.arrayValue);case 10:case 11:return(function(i){let o=0;return qo(i.fields,((c,h)=>{o+=c.length+nf(h)})),o})(s.mapValue);default:throw Ge(13486,{value:s})}}function Y0(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Tg(s){return!!s&&"integerValue"in s}function uy(s){return!!s&&"arrayValue"in s}function X0(s){return!!s&&"nullValue"in s}function W0(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function rf(s){return!!s&&"mapValue"in s}function pI(s){return(s?.mapValue?.fields||{})[vE]?.stringValue===xE}function Ku(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return qo(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=Ku(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ku(s.arrayValue.values[n]);return e}return{...s}}function gI(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===mI}class $r{constructor(e){this.value=e}static empty(){return new $r({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!rf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ku(n)}setAll(e){let n=Bn.emptyPath(),i={},o=[];e.forEach(((h,g)=>{if(!n.isImmediateParentOf(g)){const y=this.getFieldsMap(n);this.applyChanges(y,i,o),i={},o=[],n=g.popLast()}h?i[g.lastSegment()]=Ku(h):o.push(g.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,i,o)}delete(e){const n=this.field(e.popLast());rf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];rf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){qo(n,((o,c)=>e[o]=c));for(const o of i)delete e[o]}clone(){return new $r(Ku(this.value))}}function _E(s){const e=[];return qo(s.fields,((n,i)=>{const o=new Bn([n]);if(rf(i)){const c=_E(i.mapValue).fields;if(c.length===0)e.push(o);else for(const h of c)e.push(o.child(h))}else e.push(o)})),new fs(e)}class tr{constructor(e,n,i,o,c,h,g){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=c,this.data=h,this.documentState=g}static newInvalidDocument(e){return new tr(e,0,Ue.min(),Ue.min(),Ue.min(),$r.empty(),0)}static newFoundDocument(e,n,i,o){return new tr(e,1,n,Ue.min(),i,o,0)}static newNoDocument(e,n){return new tr(e,2,n,Ue.min(),Ue.min(),$r.empty(),0)}static newUnknownDocument(e,n){return new tr(e,3,n,Ue.min(),Ue.min(),$r.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class wf{constructor(e,n){this.position=e,this.inclusive=n}}function J0(s,e,n){let i=0;for(let o=0;o<s.position.length;o++){const c=e[o],h=s.position[o];if(c.field.isKeyField()?i=Re.comparator(Re.fromName(h.referenceValue),n.key):i=Ac(h,n.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function Z0(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!qi(s.position[n],e.position[n]))return!1;return!0}class od{constructor(e,n="asc"){this.field=e,this.dir=n}}function yI(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class wE{}class vn extends wE{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new vI(e,n,i):n==="array-contains"?new wI(e,i):n==="in"?new EI(e,i):n==="not-in"?new TI(e,i):n==="array-contains-any"?new NI(e,i):new vn(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new xI(e,i):new _I(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ac(n,this.value)):n!==null&&Po(this.value)===Po(n)&&this.matchesComparison(Ac(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class si extends wE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new si(e,n)}matches(e){return EE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function EE(s){return s.op==="and"}function TE(s){return bI(s)&&EE(s)}function bI(s){for(const e of s.filters)if(e instanceof si)return!1;return!0}function Ng(s){if(s instanceof vn)return s.field.canonicalString()+s.op.toString()+Cc(s.value);if(TE(s))return s.filters.map((e=>Ng(e))).join(",");{const e=s.filters.map((n=>Ng(n))).join(",");return`${s.op}(${e})`}}function NE(s,e){return s instanceof vn?(function(i,o){return o instanceof vn&&i.op===o.op&&i.field.isEqual(o.field)&&qi(i.value,o.value)})(s,e):s instanceof si?(function(i,o){return o instanceof si&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((c,h,g)=>c&&NE(h,o.filters[g])),!0):!1})(s,e):void Ge(19439)}function SE(s){return s instanceof vn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Cc(n.value)}`})(s):s instanceof si?(function(n){return n.op.toString()+" {"+n.getFilters().map(SE).join(" ,")+"}"})(s):"Filter"}class vI extends vn{constructor(e,n,i){super(e,n,i),this.key=Re.fromName(i.referenceValue)}matches(e){const n=Re.comparator(e.key,this.key);return this.matchesComparison(n)}}class xI extends vn{constructor(e,n){super(e,"in",n),this.keys=AE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class _I extends vn{constructor(e,n){super(e,"not-in",n),this.keys=AE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function AE(s,e){return(e.arrayValue?.values||[]).map((n=>Re.fromName(n.referenceValue)))}class wI extends vn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return uy(n)&&ad(n.arrayValue,this.value)}}class EI extends vn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ad(this.value.arrayValue,n)}}class TI extends vn{constructor(e,n){super(e,"not-in",n)}matches(e){if(ad(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ad(this.value.arrayValue,n)}}class NI extends vn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!uy(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>ad(this.value.arrayValue,i)))}}class SI{constructor(e,n=null,i=[],o=[],c=null,h=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=c,this.startAt=h,this.endAt=g,this.Te=null}}function e_(s,e=null,n=[],i=[],o=null,c=null,h=null){return new SI(s,e,n,i,o,c,h)}function dy(s){const e=qe(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Ng(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),Ff(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Cc(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Cc(i))).join(",")),e.Te=n}return e.Te}function hy(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!yI(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!NE(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Z0(s.startAt,e.startAt)&&Z0(s.endAt,e.endAt)}function Sg(s){return Re.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class zc{constructor(e,n=null,i=[],o=[],c=null,h="F",g=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=c,this.limitType=h,this.startAt=g,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function AI(s,e,n,i,o,c,h,g){return new zc(s,e,n,i,o,c,h,g)}function $f(s){return new zc(s)}function t_(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function CE(s){return s.collectionGroup!==null}function Yu(s){const e=qe(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let g=new Cn(Bn.comparator);return h.filters.forEach((y=>{y.getFlattenedFilters().forEach((v=>{v.isInequality()&&(g=g.add(v.field))}))})),g})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new od(c,i))})),n.has(Bn.keyField().canonicalString())||e.Ie.push(new od(Bn.keyField(),i))}return e.Ie}function Ui(s){const e=qe(s);return e.Ee||(e.Ee=CI(e,Yu(s))),e.Ee}function CI(s,e){if(s.limitType==="F")return e_(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new od(o.field,c)}));const n=s.endAt?new wf(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new wf(s.startAt.position,s.startAt.inclusive):null;return e_(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function Ag(s,e){const n=s.filters.concat([e]);return new zc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Ef(s,e,n){return new zc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Qf(s,e){return hy(Ui(s),Ui(e))&&s.limitType===e.limitType}function RE(s){return`${dy(Ui(s))}|lt:${s.limitType}`}function mc(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((o=>SE(o))).join(", ")}]`),Ff(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((o=>Cc(o))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((o=>Cc(o))).join(",")),`Target(${i})`})(Ui(s))}; limitType=${s.limitType})`}function Kf(s,e){return e.isFoundDocument()&&(function(i,o){const c=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):Re.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(s,e)&&(function(i,o){for(const c of Yu(i))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(i,o){for(const c of i.filters)if(!c.matches(o))return!1;return!0})(s,e)&&(function(i,o){return!(i.startAt&&!(function(h,g,y){const v=J0(h,g,y);return h.inclusive?v<=0:v<0})(i.startAt,Yu(i),o)||i.endAt&&!(function(h,g,y){const v=J0(h,g,y);return h.inclusive?v>=0:v>0})(i.endAt,Yu(i),o))})(s,e)}function RI(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function IE(s){return(e,n)=>{let i=!1;for(const o of Yu(s)){const c=II(o,e,n);if(c!==0)return c;i=i||o.field.isKeyField()}return 0}}function II(s,e,n){const i=s.field.isKeyField()?Re.comparator(e.key,n.key):(function(c,h,g){const y=h.data.field(c),v=g.data.field(c);return y!==null&&v!==null?Ac(y,v):Ge(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Ge(19790,{direction:s.dir})}}class Ol{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,c]of i)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){qo(this.inner,((n,i)=>{for(const[o,c]of i)e(o,c)}))}isEmpty(){return fE(this.inner)}size(){return this.innerSize}}const jI=new Jt(Re.comparator);function Ra(){return jI}const jE=new Jt(Re.comparator);function zu(...s){let e=jE;for(const n of s)e=e.insert(n.key,n);return e}function DE(s){let e=jE;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function Nl(){return Xu()}function kE(){return Xu()}function Xu(){return new Ol((s=>s.toString()),((s,e)=>s.isEqual(e)))}const DI=new Jt(Re.comparator),kI=new Cn(Re.comparator);function it(...s){let e=kI;for(const n of s)e=e.add(n);return e}const OI=new Cn(st);function GI(){return OI}function fy(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vf(e)?"-0":e}}function OE(s){return{integerValue:""+s}}function MI(s,e){return cI(e)?OE(e):fy(s,e)}class Yf{constructor(){this._=void 0}}function PI(s,e,n){return s instanceof ld?(function(o,c){const h={fields:{[gE]:{stringValue:pE},[bE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&cy(c)&&(c=Hf(c)),c&&(h.fields[yE]=c),{mapValue:h}})(n,e):s instanceof Rc?ME(s,e):s instanceof Ic?PE(s,e):(function(o,c){const h=GE(o,c),g=n_(h)+n_(o.Ae);return Tg(h)&&Tg(o.Ae)?OE(g):fy(o.serializer,g)})(s,e)}function VI(s,e,n){return s instanceof Rc?ME(s,e):s instanceof Ic?PE(s,e):n}function GE(s,e){return s instanceof Tf?(function(i){return Tg(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class ld extends Yf{}class Rc extends Yf{constructor(e){super(),this.elements=e}}function ME(s,e){const n=VE(e);for(const i of s.elements)n.some((o=>qi(o,i)))||n.push(i);return{arrayValue:{values:n}}}class Ic extends Yf{constructor(e){super(),this.elements=e}}function PE(s,e){let n=VE(e);for(const i of s.elements)n=n.filter((o=>!qi(o,i)));return{arrayValue:{values:n}}}class Tf extends Yf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function n_(s){return un(s.integerValue||s.doubleValue)}function VE(s){return uy(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class my{constructor(e,n){this.field=e,this.transform=n}}function UI(s,e){return s.field.isEqual(e.field)&&(function(i,o){return i instanceof Rc&&o instanceof Rc||i instanceof Ic&&o instanceof Ic?Sc(i.elements,o.elements,qi):i instanceof Tf&&o instanceof Tf?qi(i.Ae,o.Ae):i instanceof ld&&o instanceof ld})(s.transform,e.transform)}class LI{constructor(e,n){this.version=e,this.transformResults=n}}class Kr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Kr}static exists(e){return new Kr(void 0,e)}static updateTime(e){return new Kr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sf(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Xf{}function UE(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Wf(s.key,Kr.none()):new bd(s.key,s.data,Kr.none());{const n=s.data,i=$r.empty();let o=new Cn(Bn.comparator);for(let c of e.fields)if(!o.has(c)){let h=n.field(c);h===null&&c.length>1&&(c=c.popLast(),h=n.field(c)),h===null?i.delete(c):i.set(c,h),o=o.add(c)}return new Fo(s.key,i,new fs(o.toArray()),Kr.none())}}function BI(s,e,n){s instanceof bd?(function(o,c,h){const g=o.value.clone(),y=s_(o.fieldTransforms,c,h.transformResults);g.setAll(y),c.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,n):s instanceof Fo?(function(o,c,h){if(!sf(o.precondition,c))return void c.convertToUnknownDocument(h.version);const g=s_(o.fieldTransforms,c,h.transformResults),y=c.data;y.setAll(LE(o)),y.setAll(g),c.convertToFoundDocument(h.version,y).setHasCommittedMutations()})(s,e,n):(function(o,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function Wu(s,e,n,i){return s instanceof bd?(function(c,h,g,y){if(!sf(c.precondition,h))return g;const v=c.value.clone(),E=i_(c.fieldTransforms,y,h);return v.setAll(E),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(s,e,n,i):s instanceof Fo?(function(c,h,g,y){if(!sf(c.precondition,h))return g;const v=i_(c.fieldTransforms,y,h),E=h.data;return E.setAll(LE(c)),E.setAll(v),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((S=>S.field)))})(s,e,n,i):(function(c,h,g){return sf(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):g})(s,e,n)}function zI(s,e){let n=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),c=GE(i.transform,o||null);c!=null&&(n===null&&(n=$r.empty()),n.set(i.field,c))}return n||null}function r_(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Sc(i,o,((c,h)=>UI(c,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class bd extends Xf{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Fo extends Xf{constructor(e,n,i,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function LE(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function s_(s,e,n){const i=new Map;bt(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const c=s[o],h=c.transform,g=e.data.field(c.field);i.set(c.field,VI(h,g,n[o]))}return i}function i_(s,e,n){const i=new Map;for(const o of s){const c=o.transform,h=n.data.field(o.field);i.set(o.field,PI(c,h,e))}return i}class Wf extends Xf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qI extends Xf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class FI{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&BI(c,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Wu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Wu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=kE();return this.mutations.forEach((o=>{const c=e.get(o.key),h=c.overlayedDocument;let g=this.applyToLocalView(h,c.mutatedFields);g=n.has(o.key)?null:g;const y=UE(h,g);y!==null&&i.set(o.key,y),h.isValidDocument()||h.convertToNoDocument(Ue.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),it())}isEqual(e){return this.batchId===e.batchId&&Sc(this.mutations,e.mutations,((n,i)=>r_(n,i)))&&Sc(this.baseMutations,e.baseMutations,((n,i)=>r_(n,i)))}}class py{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){bt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return DI})();const c=e.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,i[h].version);return new py(e,n,i,o)}}class HI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class $I{constructor(e,n){this.count=e,this.unchangedNames=n}}var bn,ot;function QI(s){switch(s){case se.OK:return Ge(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return Ge(15467,{code:s})}}function BE(s){if(s===void 0)return Ca("GRPC error has no .code"),se.UNKNOWN;switch(s){case bn.OK:return se.OK;case bn.CANCELLED:return se.CANCELLED;case bn.UNKNOWN:return se.UNKNOWN;case bn.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case bn.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case bn.INTERNAL:return se.INTERNAL;case bn.UNAVAILABLE:return se.UNAVAILABLE;case bn.UNAUTHENTICATED:return se.UNAUTHENTICATED;case bn.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case bn.NOT_FOUND:return se.NOT_FOUND;case bn.ALREADY_EXISTS:return se.ALREADY_EXISTS;case bn.PERMISSION_DENIED:return se.PERMISSION_DENIED;case bn.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case bn.ABORTED:return se.ABORTED;case bn.OUT_OF_RANGE:return se.OUT_OF_RANGE;case bn.UNIMPLEMENTED:return se.UNIMPLEMENTED;case bn.DATA_LOSS:return se.DATA_LOSS;default:return Ge(39323,{code:s})}}(ot=bn||(bn={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";function KI(){return new TextEncoder}const YI=new Io([4294967295,4294967295],0);function a_(s){const e=KI().encode(s),n=new nE;return n.update(e),new Uint8Array(n.digest())}function o_(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Io([n,i],0),new Io([o,c],0)]}class gy{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new qu(`Invalid padding: ${n}`);if(i<0)throw new qu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new qu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new qu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Io.fromNumber(this.ge)}ye(e,n,i){let o=e.add(n.multiply(Io.fromNumber(i)));return o.compare(YI)===1&&(o=new Io([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=a_(e),[i,o]=o_(n);for(let c=0;c<this.hashCount;c++){const h=this.ye(i,o,c);if(!this.we(h))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new gy(c,o,n);return i.forEach((g=>h.insert(g))),h}insert(e){if(this.ge===0)return;const n=a_(e),[i,o]=o_(n);for(let c=0;c<this.hashCount;c++){const h=this.ye(i,o,c);this.Se(h)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class qu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Jf{constructor(e,n,i,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,vd.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Jf(Ue.min(),o,new Jt(st),Ra(),it())}}class vd{constructor(e,n,i,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new vd(i,n,it(),it(),it())}}class af{constructor(e,n,i,o){this.be=e,this.removedTargetIds=n,this.key=i,this.De=o}}class zE{constructor(e,n){this.targetId=e,this.Ce=n}}class qE{constructor(e,n,i=zn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class l_{constructor(){this.ve=0,this.Fe=c_(),this.Me=zn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=it(),n=it(),i=it();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:Ge(38017,{changeType:c})}})),new vd(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=c_()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,bt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class XI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ra(),this.Je=Ph(),this.He=Ph(),this.Ye=new Jt(st)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Ge(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,i=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(Sg(c))if(i===0){const h=new Re(c.path);this.et(n,h,tr.newNoDocument(h,Ue.min()))}else bt(i===1,20013,{expectedCount:i});else{const h=this._t(n);if(h!==i){const g=this.ut(e),y=g?this.ct(g,e,h):1;if(y!==0){this.it(n);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,v)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:c=0}=n;let h,g;try{h=Mo(i).toUint8Array()}catch(y){if(y instanceof mE)return Nc("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new gy(h,o,c)}catch(y){return Nc(y instanceof qu?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return g.ge===0?null:g}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let o=0;return i.forEach((c=>{const h=this.Ge.ht(),g=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,h)=>{const g=this.ot(h);if(g){if(c.current&&Sg(g.target)){const y=new Re(g.target.path);this.It(y).has(h)||this.Et(h,y)||this.et(h,y,tr.newNoDocument(y,e))}c.Be&&(n.set(h,c.ke()),c.qe())}}));let i=it();this.He.forEach(((c,h)=>{let g=!0;h.forEachWhile((y=>{const v=this.ot(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(i=i.add(c))})),this.je.forEach(((c,h)=>h.setReadTime(e)));const o=new Jf(e,n,this.Ye,this.je,i);return this.je=Ra(),this.Je=Ph(),this.He=Ph(),this.Ye=new Jt(st),o}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new l_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Cn(st),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Cn(st),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||xe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new l_),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ph(){return new Jt(Re.comparator)}function c_(){return new Jt(Re.comparator)}const WI={asc:"ASCENDING",desc:"DESCENDING"},JI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZI={and:"AND",or:"OR"};class ej{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Cg(s,e){return s.useProto3Json||Ff(e)?e:{value:e}}function Nf(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FE(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function tj(s,e){return Nf(s,e.toTimestamp())}function Li(s){return bt(!!s,49232),Ue.fromTimestamp((function(n){const i=Go(n);return new Ut(i.seconds,i.nanos)})(s))}function yy(s,e){return Rg(s,e).canonicalString()}function Rg(s,e){const n=(function(o){return new Gt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function HE(s){const e=Gt.fromString(s);return bt(XE(e),10190,{key:e.toString()}),e}function Ig(s,e){return yy(s.databaseId,e.path)}function ng(s,e){const n=HE(e);if(n.get(1)!==s.databaseId.projectId)throw new be(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new be(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Re(QE(n))}function $E(s,e){return yy(s.databaseId,e)}function nj(s){const e=HE(s);return e.length===4?Gt.emptyPath():QE(e)}function jg(s){return new Gt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function QE(s){return bt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function u_(s,e,n){return{name:Ig(s,e),fields:n.value.mapValue.fields}}function rj(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ge(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(v,E){return v.useProto3Json?(bt(E===void 0||typeof E=="string",58123),zn.fromBase64String(E||"")):(bt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),zn.fromUint8Array(E||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&(function(v){const E=v.code===void 0?se.UNKNOWN:BE(v.code);return new be(E,v.message||"")})(h);n=new qE(i,o,c,g||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=ng(s,i.document.name),c=Li(i.document.updateTime),h=i.document.createTime?Li(i.document.createTime):Ue.min(),g=new $r({mapValue:{fields:i.document.fields}}),y=tr.newFoundDocument(o,c,h,g),v=i.targetIds||[],E=i.removedTargetIds||[];n=new af(v,E,y.key,y)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=ng(s,i.document),c=i.readTime?Li(i.readTime):Ue.min(),h=tr.newNoDocument(o,c),g=i.removedTargetIds||[];n=new af([],g,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=ng(s,i.document),c=i.removedTargetIds||[];n=new af([],c,o,null)}else{if(!("filter"in e))return Ge(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:c}=i,h=new $I(o,c),g=i.targetId;n=new zE(g,h)}}return n}function sj(s,e){let n;if(e instanceof bd)n={update:u_(s,e.key,e.value)};else if(e instanceof Wf)n={delete:Ig(s,e.key)};else if(e instanceof Fo)n={update:u_(s,e.key,e.data),updateMask:fj(e.fieldMask)};else{if(!(e instanceof qI))return Ge(16599,{Vt:e.type});n={verify:Ig(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(c,h){const g=h.transform;if(g instanceof ld)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Rc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Ic)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Tf)return{fieldPath:h.field.canonicalString(),increment:g.Ae};throw Ge(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:tj(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ge(27497)})(s,e.precondition)),n}function ij(s,e){return s&&s.length>0?(bt(e!==void 0,14353),s.map((n=>(function(o,c){let h=o.updateTime?Li(o.updateTime):Li(c);return h.isEqual(Ue.min())&&(h=Li(c)),new LI(h,o.transformResults||[])})(n,e)))):[]}function aj(s,e){return{documents:[$E(s,e.path)]}}function oj(s,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=$E(s,o);const c=(function(v){if(v.length!==0)return YE(si.create(v,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const h=(function(v){if(v.length!==0)return v.map((E=>(function(I){return{field:pc(I.field),direction:uj(I.dir)}})(E)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const g=Cg(s,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:n,parent:o}}function lj(s){let e=nj(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){bt(i===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let c=[];n.where&&(c=(function(S){const I=KE(S);return I instanceof si&&TE(I)?I.getFilters():[I]})(n.where));let h=[];n.orderBy&&(h=(function(S){return S.map((I=>(function(W){return new od(gc(W.field),(function(Y){switch(Y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(I)))})(n.orderBy));let g=null;n.limit&&(g=(function(S){let I;return I=typeof S=="object"?S.value:S,Ff(I)?null:I})(n.limit));let y=null;n.startAt&&(y=(function(S){const I=!!S.before,q=S.values||[];return new wf(q,I)})(n.startAt));let v=null;return n.endAt&&(v=(function(S){const I=!S.before,q=S.values||[];return new wf(q,I)})(n.endAt)),AI(e,o,h,c,g,"F",y,v)}function cj(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ge(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function KE(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=gc(n.unaryFilter.field);return vn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=gc(n.unaryFilter.field);return vn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=gc(n.unaryFilter.field);return vn.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=gc(n.unaryFilter.field);return vn.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ge(61313);default:return Ge(60726)}})(s):s.fieldFilter!==void 0?(function(n){return vn.create(gc(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ge(58110);default:return Ge(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return si.create(n.compositeFilter.filters.map((i=>KE(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ge(1026)}})(n.compositeFilter.op))})(s):Ge(30097,{filter:s})}function uj(s){return WI[s]}function dj(s){return JI[s]}function hj(s){return ZI[s]}function pc(s){return{fieldPath:s.canonicalString()}}function gc(s){return Bn.fromServerFormat(s.fieldPath)}function YE(s){return s instanceof vn?(function(n){if(n.op==="=="){if(W0(n.value))return{unaryFilter:{field:pc(n.field),op:"IS_NAN"}};if(X0(n.value))return{unaryFilter:{field:pc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(W0(n.value))return{unaryFilter:{field:pc(n.field),op:"IS_NOT_NAN"}};if(X0(n.value))return{unaryFilter:{field:pc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pc(n.field),op:dj(n.op),value:n.value}}})(s):s instanceof si?(function(n){const i=n.getFilters().map((o=>YE(o)));return i.length===1?i[0]:{compositeFilter:{op:hj(n.op),filters:i}}})(s):Ge(54877,{filter:s})}function fj(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function XE(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class So{constructor(e,n,i,o,c=Ue.min(),h=Ue.min(),g=zn.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(e){return new So(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class mj{constructor(e){this.yt=e}}function pj(s){const e=lj({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Ef(e,e.limit,"L"):e}class gj{constructor(){this.Cn=new yj}addToCollectionParentIndex(e,n){return this.Cn.add(n),ce.resolve()}getCollectionParents(e,n){return ce.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ce.resolve()}deleteFieldIndex(e,n){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,n){return ce.resolve()}getDocumentsMatchingTarget(e,n){return ce.resolve(null)}getIndexType(e,n){return ce.resolve(0)}getFieldIndexes(e,n){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,n){return ce.resolve(Oo.min())}getMinOffsetFromCollectionGroup(e,n){return ce.resolve(Oo.min())}updateCollectionGroup(e,n,i){return ce.resolve()}updateIndexEntries(e,n){return ce.resolve()}}class yj{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new Cn(Gt.comparator),c=!o.has(i);return this.index[n]=o.add(i),c}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Cn(Gt.comparator)).toArray()}}const d_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WE=41943040;class Hr{static withCacheSize(e){return new Hr(e,Hr.DEFAULT_COLLECTION_PERCENTILE,Hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}Hr.DEFAULT_COLLECTION_PERCENTILE=10,Hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hr.DEFAULT=new Hr(WE,Hr.DEFAULT_COLLECTION_PERCENTILE,Hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hr.DISABLED=new Hr(-1,0,0);class jc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new jc(0)}static cr(){return new jc(-1)}}const h_="LruGarbageCollector",bj=1048576;function f_([s,e],[n,i]){const o=st(s,n);return o===0?st(e,i):o}class vj{constructor(e){this.Ir=e,this.buffer=new Cn(f_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();f_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class xj{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){xe(h_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Bc(n)?xe(h_,"Ignoring IndexedDB error during garbage collection: ",n):await Lc(n)}await this.Vr(3e5)}))}}class _j{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return ce.resolve(qf.ce);const i=new vj(n);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(d_)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),d_):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,o,c,h,g,y,v;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,h=Date.now(),this.nthSequenceNumber(e,o)))).next((S=>(i=S,g=Date.now(),this.removeTargets(e,i,n)))).next((S=>(c=S,y=Date.now(),this.removeOrphanedDocuments(e,i)))).next((S=>(v=Date.now(),fc()<=rt.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(g-h)+`ms
	Removed ${c} targets in `+(y-g)+`ms
	Removed ${S} documents in `+(v-y)+`ms
Total Duration: ${v-E}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:S}))))}}function wj(s,e){return new _j(s,e)}class Ej{constructor(){this.changes=new Ol((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ce.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Tj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Nj{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(i!==null&&Wu(i.mutation,o,fs.empty(),Ut.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,it()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=it()){const o=Nl();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,i).next((c=>{let h=zu();return c.forEach(((g,y)=>{h=h.insert(g,y.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const i=Nl();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,it())))}populateOverlays(e,n,i){const o=[];return i.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((h,g)=>{n.set(h,g)}))}))}computeViews(e,n,i,o){let c=Ra();const h=Xu(),g=(function(){return Xu()})();return n.forEach(((y,v)=>{const E=i.get(v.key);o.has(v.key)&&(E===void 0||E.mutation instanceof Fo)?c=c.insert(v.key,v):E!==void 0?(h.set(v.key,E.mutation.getFieldMask()),Wu(E.mutation,v,E.mutation.getFieldMask(),Ut.now())):h.set(v.key,fs.empty())})),this.recalculateAndSaveOverlays(e,c).next((y=>(y.forEach(((v,E)=>h.set(v,E))),n.forEach(((v,E)=>g.set(v,new Tj(E,h.get(v)??null)))),g)))}recalculateAndSaveOverlays(e,n){const i=Xu();let o=new Jt(((h,g)=>h-g)),c=it();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const g of h)g.keys().forEach((y=>{const v=n.get(y);if(v===null)return;let E=i.get(y)||fs.empty();E=g.applyToLocalView(v,E),i.set(y,E);const S=(o.get(g.batchId)||it()).add(y);o=o.insert(g.batchId,S)}))})).next((()=>{const h=[],g=o.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),v=y.key,E=y.value,S=kE();E.forEach((I=>{if(!c.has(I)){const q=UE(n.get(I),i.get(I));q!==null&&S.set(I,q),c=c.add(I)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,S))}return ce.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,o){return(function(h){return Re.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):CE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next((c=>{const h=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-c.size):ce.resolve(Nl());let g=rd,y=c;return h.next((v=>ce.forEach(v,((E,S)=>(g<S.largestBatchId&&(g=S.largestBatchId),c.get(E)?ce.resolve():this.remoteDocumentCache.getEntry(e,E).next((I=>{y=y.insert(E,I)}))))).next((()=>this.populateOverlays(e,v,c))).next((()=>this.computeViews(e,y,v,it()))).next((E=>({batchId:g,changes:DE(E)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Re(n)).next((i=>{let o=zu();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const c=n.collectionGroup;let h=zu();return this.indexManager.getCollectionParents(e,c).next((g=>ce.forEach(g,(y=>{const v=(function(S,I){return new zc(I,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(n,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next((E=>{E.forEach(((S,I)=>{h=h.insert(S,I)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,i,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,c,o)))).next((h=>{c.forEach(((y,v)=>{const E=v.getKey();h.get(E)===null&&(h=h.insert(E,tr.newInvalidDocument(E)))}));let g=zu();return h.forEach(((y,v)=>{const E=c.get(y);E!==void 0&&Wu(E.mutation,v,fs.empty(),Ut.now()),Kf(n,v)&&(g=g.insert(y,v))})),g}))}}class Sj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ce.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Li(o.createTime)}})(n)),ce.resolve()}getNamedQuery(e,n){return ce.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:pj(o.bundledQuery),readTime:Li(o.readTime)}})(n)),ce.resolve()}}class Aj{constructor(){this.overlays=new Jt(Re.comparator),this.qr=new Map}getOverlay(e,n){return ce.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Nl();return ce.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&i.set(o,c)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((o,c)=>{this.St(e,n,c)})),ce.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(i)),ce.resolve()}getOverlaysForCollection(e,n,i){const o=Nl(),c=n.length+1,h=new Re(n.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const y=g.getNext().value,v=y.getKey();if(!n.isPrefixOf(v.path))break;v.path.length===c&&y.largestBatchId>i&&o.set(y.getKey(),y)}return ce.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let c=new Jt(((v,E)=>v-E));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===n&&v.largestBatchId>i){let E=c.get(v.largestBatchId);E===null&&(E=Nl(),c=c.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const g=Nl(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((v,E)=>g.set(v,E))),!(g.size()>=o)););return ce.resolve(g)}St(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new HI(n,i));let c=this.qr.get(n);c===void 0&&(c=it(),this.qr.set(n,c)),this.qr.set(n,c.add(i.key))}}class Cj{constructor(){this.sessionToken=zn.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ce.resolve()}}class by{constructor(){this.Qr=new Cn(Dn.$r),this.Ur=new Cn(Dn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Dn(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new Dn(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new Re(new Gt([])),i=new Dn(n,e),o=new Dn(n,e+1),c=[];return this.Ur.forEachInRange([i,o],(h=>{this.Gr(h),c.push(h.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Re(new Gt([])),i=new Dn(n,e),o=new Dn(n,e+1);let c=it();return this.Ur.forEachInRange([i,o],(h=>{c=c.add(h.key)})),c}containsKey(e){const n=new Dn(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Dn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Re.comparator(e.key,n.key)||st(e.Yr,n.Yr)}static Kr(e,n){return st(e.Yr,n.Yr)||Re.comparator(e.key,n.key)}}class Rj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Cn(Dn.$r)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new FI(c,n,i,o);this.mutationQueue.push(h);for(const g of o)this.Zr=this.Zr.add(new Dn(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ce.resolve(h)}lookupMutationBatch(e,n){return ce.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.ei(i),c=o<0?0:o;return ce.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?ly:this.tr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Dn(n,0),o=new Dn(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([i,o],(h=>{const g=this.Xr(h.Yr);c.push(g)})),ce.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Cn(st);return n.forEach((o=>{const c=new Dn(o,0),h=new Dn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,h],(g=>{i=i.add(g.Yr)}))})),ce.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let c=i;Re.isDocumentKey(c)||(c=c.child(""));const h=new Dn(new Re(c),0);let g=new Cn(st);return this.Zr.forEachWhile((y=>{const v=y.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(g=g.add(y.Yr)),!0)}),h),ce.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){bt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ce.forEach(n.mutations,(o=>{const c=new Dn(o.key,n.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new Dn(n,0),o=this.Zr.firstAfterOrEqual(i);return ce.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Ij{constructor(e){this.ri=e,this.docs=(function(){return new Jt(Re.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),c=o?o.size:0,h=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ce.resolve(i?i.document.mutableCopy():tr.newInvalidDocument(n))}getEntries(e,n){let i=Ra();return n.forEach((o=>{const c=this.docs.get(o);i=i.insert(o,c?c.document.mutableCopy():tr.newInvalidDocument(o))})),ce.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let c=Ra();const h=n.path,g=new Re(h.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:v,value:{document:E}}=y.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||iI(sI(E),i)<=0||(o.has(E.key)||Kf(n,E))&&(c=c.insert(E.key,E.mutableCopy()))}return ce.resolve(c)}getAllFromCollectionGroup(e,n,i,o){Ge(9500)}ii(e,n){return ce.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new jj(this)}getSize(e){return ce.resolve(this.size)}}class jj extends Ej{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),ce.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class Dj{constructor(e){this.persistence=e,this.si=new Ol((n=>dy(n)),hy),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.oi=0,this._i=new by,this.targetCount=0,this.ai=jc.ur()}forEachTarget(e,n){return this.si.forEach(((i,o)=>n(o))),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),ce.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new jc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ce.resolve()}updateTargetData(e,n){return this.Pr(n),ce.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,n,i){let o=0;const c=[];return this.si.forEach(((h,g)=>{g.sequenceNumber<=n&&i.get(g.targetId)===null&&(this.si.delete(h),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),ce.waitFor(c).next((()=>o))}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return ce.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),ce.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((h=>{c.push(o.markPotentiallyOrphaned(e,h))})),ce.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ce.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return ce.resolve(i)}containsKey(e,n){return ce.resolve(this._i.containsKey(n))}}class JE{constructor(e,n){this.ui={},this.overlays={},this.ci=new qf(0),this.li=!1,this.li=!0,this.hi=new Cj,this.referenceDelegate=e(this),this.Pi=new Dj(this),this.indexManager=new gj,this.remoteDocumentCache=(function(o){return new Ij(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new mj(n),this.Ii=new Sj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Aj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new Rj(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){xe("MemoryPersistence","Starting transaction:",e);const o=new kj(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return ce.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class kj extends oI{constructor(e){super(),this.currentSequenceNumber=e}}class vy{constructor(e){this.persistence=e,this.Ri=new by,this.Vi=null}static mi(e){return new vy(e)}get fi(){if(this.Vi)return this.Vi;throw Ge(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),ce.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),ce.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ce.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.fi,(i=>{const o=Re.fromPath(i);return this.gi(e,o).next((c=>{c||n.removeEntry(o,Ue.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ce.or([()=>ce.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Sf{constructor(e,n){this.persistence=e,this.pi=new Ol((i=>uI(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=wj(this,n)}static mi(e,n){return new Sf(e,n)}Ei(){}di(e){return ce.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((o=>i+o))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return ce.forEach(this.pi,((i,o)=>this.br(e,i,o).next((c=>c?ce.resolve():n(o)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,n).next((g=>{g||(i++,c.removeEntry(h,Ue.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ce.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),ce.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),ce.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ce.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=nf(e.data.value)),n}br(e,n,i){return ce.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ce.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class xy{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=o}static As(e,n){let i=it(),o=it();for(const c of n.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new xy(e,n.fromCache,i,o)}}class Oj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Gj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return m1()?8:lI(nr())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,o){const c={result:null};return this.ys(e,n).next((h=>{c.result=h})).next((()=>{if(!c.result)return this.ws(e,n,o,i).next((h=>{c.result=h}))})).next((()=>{if(c.result)return;const h=new Oj;return this.Ss(e,n,h).next((g=>{if(c.result=g,this.Vs)return this.bs(e,n,h,g.size)}))})).next((()=>c.result))}bs(e,n,i,o){return i.documentReadCount<this.fs?(fc()<=rt.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",mc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ce.resolve()):(fc()<=rt.DEBUG&&xe("QueryEngine","Query:",mc(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(fc()<=rt.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",mc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ui(n))):ce.resolve())}ys(e,n){if(t_(n))return ce.resolve(null);let i=Ui(n);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Ef(n,null,"F"),i=Ui(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const h=it(...c);return this.ps.getDocuments(e,h).next((g=>this.indexManager.getMinOffset(e,i).next((y=>{const v=this.Ds(n,g);return this.Cs(n,v,h,y.readTime)?this.ys(e,Ef(n,null,"F")):this.vs(e,v,n,y)}))))})))))}ws(e,n,i,o){return t_(n)||o.isEqual(Ue.min())?ce.resolve(null):this.ps.getDocuments(e,i).next((c=>{const h=this.Ds(n,c);return this.Cs(n,h,i,o)?ce.resolve(null):(fc()<=rt.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),mc(n)),this.vs(e,h,n,rI(o,rd)).next((g=>g)))}))}Ds(e,n){let i=new Cn(IE(e));return n.forEach(((o,c)=>{Kf(e,c)&&(i=i.add(c))})),i}Cs(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,i){return fc()<=rt.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",mc(n)),this.ps.getDocumentsMatchingQuery(e,n,Oo.min(),i)}vs(e,n,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((c=>(n.forEach((h=>{c=c.insert(h.key,h)})),c)))}}const _y="LocalStore",Mj=3e8;class Pj{constructor(e,n,i,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new Jt(st),this.xs=new Ol((c=>dy(c)),hy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Nj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Vj(s,e,n,i){return new Pj(s,e,n,i)}async function ZE(s,e){const n=qe(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((c=>{const h=[],g=[];let y=it();for(const v of o){h.push(v.batchId);for(const E of v.mutations)y=y.add(E.key)}for(const v of c){g.push(v.batchId);for(const E of v.mutations)y=y.add(E.key)}return n.localDocuments.getDocuments(i,y).next((v=>({Ls:v,removedBatchIds:h,addedBatchIds:g})))}))}))}function Uj(s,e){const n=qe(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,y,v,E){const S=v.batch,I=S.keys();let q=ce.resolve();return I.forEach((W=>{q=q.next((()=>E.getEntry(y,W))).next((te=>{const Y=v.docVersions.get(W);bt(Y!==null,48541),te.version.compareTo(Y)<0&&(S.applyToRemoteDocument(te,v),te.isValidDocument()&&(te.setReadTime(v.commitVersion),E.addEntry(te)))}))})),q.next((()=>g.mutationQueue.removeMutationBatch(y,S)))})(n,i,e,c).next((()=>c.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(g){let y=it();for(let v=0;v<g.mutationResults.length;++v)g.mutationResults[v].transformResults.length>0&&(y=y.add(g.batch.mutations[v].key));return y})(e)))).next((()=>n.localDocuments.getDocuments(i,o)))}))}function eT(s){const e=qe(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Lj(s,e){const n=qe(s),i=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];e.targetChanges.forEach(((E,S)=>{const I=o.get(S);if(!I)return;g.push(n.Pi.removeMatchingKeys(c,E.removedDocuments,S).next((()=>n.Pi.addMatchingKeys(c,E.addedDocuments,S))));let q=I.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(S)!==null?q=q.withResumeToken(zn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):E.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(E.resumeToken,i)),o=o.insert(S,q),(function(te,Y,ue){return te.resumeToken.approximateByteSize()===0||Y.snapshotVersion.toMicroseconds()-te.snapshotVersion.toMicroseconds()>=Mj?!0:ue.addedDocuments.size+ue.modifiedDocuments.size+ue.removedDocuments.size>0})(I,q,E)&&g.push(n.Pi.updateTargetData(c,q))}));let y=Ra(),v=it();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,E))})),g.push(Bj(c,h,e.documentUpdates).next((E=>{y=E.ks,v=E.qs}))),!i.isEqual(Ue.min())){const E=n.Pi.getLastRemoteSnapshotVersion(c).next((S=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,i)));g.push(E)}return ce.waitFor(g).next((()=>h.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,y,v))).next((()=>y))})).then((c=>(n.Ms=o,c)))}function Bj(s,e,n){let i=it(),o=it();return n.forEach((c=>i=i.add(c))),e.getEntries(s,i).next((c=>{let h=Ra();return n.forEach(((g,y)=>{const v=c.get(g);y.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(g)),y.isNoDocument()&&y.version.isEqual(Ue.min())?(e.removeEntry(g,y.readTime),h=h.insert(g,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),h=h.insert(g,y)):xe(_y,"Ignoring outdated watch update for ",g,". Current version:",v.version," Watch version:",y.version)})),{ks:h,qs:o}}))}function zj(s,e){const n=qe(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=ly),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function qj(s,e){const n=qe(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return n.Pi.getTargetData(i,e).next((c=>c?(o=c,ce.resolve(o)):n.Pi.allocateTargetId(i).next((h=>(o=new So(e,h,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=n.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function Dg(s,e,n){const i=qe(s),o=i.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",c,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Bc(h))throw h;xe(_y,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function m_(s,e,n){const i=qe(s);let o=Ue.min(),c=it();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(y,v,E){const S=qe(y),I=S.xs.get(E);return I!==void 0?ce.resolve(S.Ms.get(I)):S.Pi.getTargetData(v,E)})(i,h,Ui(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(h,g.targetId).next((y=>{c=y}))})).next((()=>i.Fs.getDocumentsMatchingQuery(h,e,n?o:Ue.min(),n?c:it()))).next((g=>(Fj(i,RI(e),g),{documents:g,Qs:c})))))}function Fj(s,e,n){let i=s.Os.get(e)||Ue.min();n.forEach(((o,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),s.Os.set(e,i)}class p_{constructor(){this.activeTargetIds=GI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Hj{constructor(){this.Mo=new p_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new p_,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class $j{Oo(e){}shutdown(){}}const g_="ConnectivityMonitor";class y_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){xe(g_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){xe(g_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Vh=null;function kg(){return Vh===null?Vh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Vh++,"0x"+Vh.toString(16)}const rg="RestConnection",Qj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Kj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===xf?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,n,i,o,c){const h=kg(),g=this.zo(e,n.toUriEncodedString());xe(rg,`Sending RPC '${e}' ${h}:`,g,i);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,c);const{host:v}=new URL(g),E=Hi(v);return this.Jo(e,g,y,i,E).then((S=>(xe(rg,`Received RPC '${e}' ${h}: `,S),S)),(S=>{throw Nc(rg,`RPC '${e}' ${h} failed with error: `,S,"url: ",g,"request:",i),S}))}Ho(e,n,i,o,c,h){return this.Go(e,n,i,o,c)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Uc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),i&&i.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const i=Qj[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}class Yj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Wn="WebChannelConnection";class Xj extends Kj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,o,c){const h=kg();return new Promise(((g,y)=>{const v=new rE;v.setWithCredentials(!0),v.listenOnce(sE.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case tf.NO_ERROR:const S=v.getResponseJson();xe(Wn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(S)),g(S);break;case tf.TIMEOUT:xe(Wn,`RPC '${e}' ${h} timed out`),y(new be(se.DEADLINE_EXCEEDED,"Request time out"));break;case tf.HTTP_ERROR:const I=v.getStatus();if(xe(Wn,`RPC '${e}' ${h} failed with status:`,I,"response text:",v.getResponseText()),I>0){let q=v.getResponseJson();Array.isArray(q)&&(q=q[0]);const W=q?.error;if(W&&W.status&&W.message){const te=(function(ue){const fe=ue.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(fe)>=0?fe:se.UNKNOWN})(W.status);y(new be(te,W.message))}else y(new be(se.UNKNOWN,"Server responded with status "+v.getStatus()))}else y(new be(se.UNAVAILABLE,"Connection failed."));break;default:Ge(9055,{l_:e,streamId:h,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{xe(Wn,`RPC '${e}' ${h} completed.`)}}));const E=JSON.stringify(o);xe(Wn,`RPC '${e}' ${h} sending request:`,o),v.send(n,"POST",E,i,15)}))}T_(e,n,i){const o=kg(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=oE(),g=aE(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,i),y.encodeInitMessageHeaders=!0;const E=c.join("");xe(Wn,`Creating RPC '${e}' stream ${o}: ${E}`,y);const S=h.createWebChannel(E,y);this.I_(S);let I=!1,q=!1;const W=new Yj({Yo:Y=>{q?xe(Wn,`Not sending because RPC '${e}' stream ${o} is closed:`,Y):(I||(xe(Wn,`Opening RPC '${e}' stream ${o} transport.`),S.open(),I=!0),xe(Wn,`RPC '${e}' stream ${o} sending:`,Y),S.send(Y))},Zo:()=>S.close()}),te=(Y,ue,fe)=>{Y.listen(ue,(oe=>{try{fe(oe)}catch(_e){setTimeout((()=>{throw _e}),0)}}))};return te(S,Bu.EventType.OPEN,(()=>{q||(xe(Wn,`RPC '${e}' stream ${o} transport opened.`),W.o_())})),te(S,Bu.EventType.CLOSE,(()=>{q||(q=!0,xe(Wn,`RPC '${e}' stream ${o} transport closed`),W.a_(),this.E_(S))})),te(S,Bu.EventType.ERROR,(Y=>{q||(q=!0,Nc(Wn,`RPC '${e}' stream ${o} transport errored. Name:`,Y.name,"Message:",Y.message),W.a_(new be(se.UNAVAILABLE,"The operation could not be completed")))})),te(S,Bu.EventType.MESSAGE,(Y=>{if(!q){const ue=Y.data[0];bt(!!ue,16349);const fe=ue,oe=fe?.error||fe[0]?.error;if(oe){xe(Wn,`RPC '${e}' stream ${o} received error:`,oe);const _e=oe.status;let ke=(function(D){const k=bn[D];if(k!==void 0)return BE(k)})(_e),Me=oe.message;ke===void 0&&(ke=se.INTERNAL,Me="Unknown error status: "+_e+" with message "+oe.message),q=!0,W.a_(new be(ke,Me)),S.close()}else xe(Wn,`RPC '${e}' stream ${o} received:`,ue),W.u_(ue)}})),te(g,iE.STAT_EVENT,(Y=>{Y.stat===_g.PROXY?xe(Wn,`RPC '${e}' stream ${o} detected buffering proxy`):Y.stat===_g.NOPROXY&&xe(Wn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{W.__()}),0),W}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function sg(){return typeof document<"u"?document:null}function Zf(s){return new ej(s,!0)}class tT{constructor(e,n,i=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-i);o>0&&xe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const b_="PersistentStream";class nT{constructor(e,n,i,o,c,h,g,y){this.Mi=e,this.S_=i,this.b_=o,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new tT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===se.RESOURCE_EXHAUSTED?(Ca(n.toString()),Ca("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===n&&this.G_(i,o)}),(i=>{e((()=>{const o=new be(se.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return xe(b_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(xe(b_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Wj extends nT{constructor(e,n,i,o,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,h),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=rj(this.serializer,e),i=(function(c){if(!("targetChange"in c))return Ue.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?Ue.min():h.readTime?Li(h.readTime):Ue.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=jg(this.serializer),n.addTarget=(function(c,h){let g;const y=h.target;if(g=Sg(y)?{documents:aj(c,y)}:{query:oj(c,y).ft},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){g.resumeToken=FE(c,h.resumeToken);const v=Cg(c,h.expectedCount);v!==null&&(g.expectedCount=v)}else if(h.snapshotVersion.compareTo(Ue.min())>0){g.readTime=Nf(c,h.snapshotVersion.toTimestamp());const v=Cg(c,h.expectedCount);v!==null&&(g.expectedCount=v)}return g})(this.serializer,e);const i=cj(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=jg(this.serializer),n.removeTarget=e,this.q_(n)}}class Jj extends nT{constructor(e,n,i,o,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,h),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return bt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,bt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){bt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=ij(e.writeResults,e.commitTime),i=Li(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=jg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>sj(this.serializer,i)))};this.q_(n)}}class Zj{}class eD extends Zj{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new be(se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Go(e,Rg(n,i),o,c,h))).catch((c=>{throw c.name==="FirebaseError"?(c.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new be(se.UNKNOWN,c.toString())}))}Ho(e,n,i,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,g])=>this.connection.Ho(e,Rg(n,i),o,h,g,c))).catch((h=>{throw h.name==="FirebaseError"?(h.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new be(se.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class tD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ca(n),this.aa=!1):xe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Il="RemoteStore";class nD{constructor(e,n,i,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((h=>{i.enqueueAndForget((async()=>{Gl(this)&&(xe(Il,"Restarting streams for network reachability change."),await(async function(y){const v=qe(y);v.Ea.add(4),await xd(v),v.Ra.set("Unknown"),v.Ea.delete(4),await em(v)})(this))}))})),this.Ra=new tD(i,o)}}async function em(s){if(Gl(s))for(const e of s.da)await e(!0)}async function xd(s){for(const e of s.da)await e(!1)}function rT(s,e){const n=qe(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ny(n)?Ty(n):qc(n).O_()&&Ey(n,e))}function wy(s,e){const n=qe(s),i=qc(n);n.Ia.delete(e),i.O_()&&sT(n,e),n.Ia.size===0&&(i.O_()?i.L_():Gl(n)&&n.Ra.set("Unknown"))}function Ey(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qc(s).Y_(e)}function sT(s,e){s.Va.Ue(e),qc(s).Z_(e)}function Ty(s){s.Va=new XI({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),qc(s).start(),s.Ra.ua()}function Ny(s){return Gl(s)&&!qc(s).x_()&&s.Ia.size>0}function Gl(s){return qe(s).Ea.size===0}function iT(s){s.Va=void 0}async function rD(s){s.Ra.set("Online")}async function sD(s){s.Ia.forEach(((e,n)=>{Ey(s,e)}))}async function iD(s,e){iT(s),Ny(s)?(s.Ra.ha(e),Ty(s)):s.Ra.set("Unknown")}async function aD(s,e,n){if(s.Ra.set("Online"),e instanceof qE&&e.state===2&&e.cause)try{await(async function(o,c){const h=c.cause;for(const g of c.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,h),o.Ia.delete(g),o.Va.removeTarget(g))})(s,e)}catch(i){xe(Il,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Af(s,i)}else if(e instanceof af?s.Va.Ze(e):e instanceof zE?s.Va.st(e):s.Va.tt(e),!n.isEqual(Ue.min()))try{const i=await eT(s.localStore);n.compareTo(i)>=0&&await(function(c,h){const g=c.Va.Tt(h);return g.targetChanges.forEach(((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const E=c.Ia.get(v);E&&c.Ia.set(v,E.withResumeToken(y.resumeToken,h))}})),g.targetMismatches.forEach(((y,v)=>{const E=c.Ia.get(y);if(!E)return;c.Ia.set(y,E.withResumeToken(zn.EMPTY_BYTE_STRING,E.snapshotVersion)),sT(c,y);const S=new So(E.target,y,v,E.sequenceNumber);Ey(c,S)})),c.remoteSyncer.applyRemoteEvent(g)})(s,n)}catch(i){xe(Il,"Failed to raise snapshot:",i),await Af(s,i)}}async function Af(s,e,n){if(!Bc(e))throw e;s.Ea.add(1),await xd(s),s.Ra.set("Offline"),n||(n=()=>eT(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{xe(Il,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await em(s)}))}function aT(s,e){return e().catch((n=>Af(s,n,e)))}async function tm(s){const e=qe(s),n=Vo(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ly;for(;oD(e);)try{const o=await zj(e.localStore,i);if(o===null){e.Ta.length===0&&n.L_();break}i=o.batchId,lD(e,o)}catch(o){await Af(e,o)}oT(e)&&lT(e)}function oD(s){return Gl(s)&&s.Ta.length<10}function lD(s,e){s.Ta.push(e);const n=Vo(s);n.O_()&&n.X_&&n.ea(e.mutations)}function oT(s){return Gl(s)&&!Vo(s).x_()&&s.Ta.length>0}function lT(s){Vo(s).start()}async function cD(s){Vo(s).ra()}async function uD(s){const e=Vo(s);for(const n of s.Ta)e.ea(n.mutations)}async function dD(s,e,n){const i=s.Ta.shift(),o=py.from(i,e,n);await aT(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await tm(s)}async function hD(s,e){e&&Vo(s).X_&&await(async function(i,o){if((function(h){return QI(h)&&h!==se.ABORTED})(o.code)){const c=i.Ta.shift();Vo(i).B_(),await aT(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,o))),await tm(i)}})(s,e),oT(s)&&lT(s)}async function v_(s,e){const n=qe(s);n.asyncQueue.verifyOperationInProgress(),xe(Il,"RemoteStore received new credentials");const i=Gl(n);n.Ea.add(3),await xd(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await em(n)}async function fD(s,e){const n=qe(s);e?(n.Ea.delete(2),await em(n)):e||(n.Ea.add(2),await xd(n),n.Ra.set("Unknown"))}function qc(s){return s.ma||(s.ma=(function(n,i,o){const c=qe(n);return c.sa(),new Wj(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:rD.bind(null,s),t_:sD.bind(null,s),r_:iD.bind(null,s),H_:aD.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Ny(s)?Ty(s):s.Ra.set("Unknown")):(await s.ma.stop(),iT(s))}))),s.ma}function Vo(s){return s.fa||(s.fa=(function(n,i,o){const c=qe(n);return c.sa(),new Jj(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:cD.bind(null,s),r_:hD.bind(null,s),ta:uD.bind(null,s),na:dD.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await tm(s)):(await s.fa.stop(),s.Ta.length>0&&(xe(Il,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Sy{constructor(e,n,i,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=c,this.deferred=new jo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,c){const h=Date.now()+i,g=new Sy(e,n,h,o,c);return g.start(i),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ay(s,e){if(Ca("AsyncQueue",`${e}: ${s}`),Bc(s))return new be(se.UNAVAILABLE,`${e}: ${s}`);throw s}class wc{static emptySet(e){return new wc(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Re.comparator(n.key,i.key):(n,i)=>Re.comparator(n.key,i.key),this.keyedMap=zu(),this.sortedSet=new Jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=i.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new wc;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}class x_{constructor(){this.ga=new Jt(Re.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ge(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Dc{constructor(e,n,i,o,c,h,g,y,v){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,n,i,o,c){const h=[];return n.forEach((g=>{h.push({type:0,doc:g})})),new Dc(e,n,wc.emptySet(n),h,i,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}class mD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class pD{constructor(){this.queries=__(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const o=qe(n),c=o.queries;o.queries=__(),c.forEach(((h,g)=>{for(const y of g.Sa)y.onError(i)}))})(this,new be(se.ABORTED,"Firestore shutting down"))}}function __(){return new Ol((s=>RE(s)),Qf)}async function cT(s,e){const n=qe(s);let i=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(i=2):(c=new mD,i=e.Da()?0:1);try{switch(i){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const g=Ay(h,`Initialization of query '${mc(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&Cy(n)}async function uT(s,e){const n=qe(s),i=e.query;let o=3;const c=n.queries.get(i);if(c){const h=c.Sa.indexOf(e);h>=0&&(c.Sa.splice(h,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function gD(s,e){const n=qe(s);let i=!1;for(const o of e){const c=o.query,h=n.queries.get(c);if(h){for(const g of h.Sa)g.Fa(o)&&(i=!0);h.wa=o}}i&&Cy(n)}function yD(s,e,n){const i=qe(s),o=i.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);i.queries.delete(e)}function Cy(s){s.Ca.forEach((e=>{e.next()}))}var Og,w_;(w_=Og||(Og={})).Ma="default",w_.Cache="cache";class dT{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Dc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Dc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Og.Cache}}class hT{constructor(e){this.key=e}}class fT{constructor(e){this.key=e}}class bD{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=it(),this.mutatedKeys=it(),this.eu=IE(e),this.tu=new wc(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new x_,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,h=o,g=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,S)=>{const I=o.get(E),q=Kf(this.query,S)?S:null,W=!!I&&this.mutatedKeys.has(I.key),te=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let Y=!1;I&&q?I.data.isEqual(q.data)?W!==te&&(i.track({type:3,doc:q}),Y=!0):this.su(I,q)||(i.track({type:2,doc:q}),Y=!0,(y&&this.eu(q,y)>0||v&&this.eu(q,v)<0)&&(g=!0)):!I&&q?(i.track({type:0,doc:q}),Y=!0):I&&!q&&(i.track({type:1,doc:I}),Y=!0,(y||v)&&(g=!0)),Y&&(q?(h=h.add(q),c=te?c.add(E):c.delete(E)):(h=h.delete(E),c=c.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),c=c.delete(E.key),i.track({type:1,doc:E})}return{tu:h,iu:i,Cs:g,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((E,S)=>(function(q,W){const te=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ge(20277,{Rt:Y})}};return te(q)-te(W)})(E.type,S.type)||this.eu(E.doc,S.doc))),this.ou(i),o=o??!1;const g=n&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,v=y!==this.Za;return this.Za=y,h.length!==0||v?{snapshot:new Dc(this.query,e.tu,c,h,e.mutatedKeys,y===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new x_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=it(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new fT(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new hT(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=it();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Dc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ry="SyncEngine";class vD{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class xD{constructor(e){this.key=e,this.hu=!1}}class _D{constructor(e,n,i,o,c,h){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ol((g=>RE(g)),Qf),this.Iu=new Map,this.Eu=new Set,this.du=new Jt(Re.comparator),this.Au=new Map,this.Ru=new by,this.Vu={},this.mu=new Map,this.fu=jc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function wD(s,e,n=!0){const i=vT(s);let o;const c=i.Tu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await mT(i,e,n,!0),o}async function ED(s,e){const n=vT(s);await mT(n,e,!0,!1)}async function mT(s,e,n,i){const o=await qj(s.localStore,Ui(e)),c=o.targetId,h=s.sharedClientState.addLocalQueryTarget(c,n);let g;return i&&(g=await TD(s,e,c,h==="current",o.resumeToken)),s.isPrimaryClient&&n&&rT(s.remoteStore,o),g}async function TD(s,e,n,i,o){s.pu=(S,I,q)=>(async function(te,Y,ue,fe){let oe=Y.view.ru(ue);oe.Cs&&(oe=await m_(te.localStore,Y.query,!1).then((({documents:O})=>Y.view.ru(O,oe))));const _e=fe&&fe.targetChanges.get(Y.targetId),ke=fe&&fe.targetMismatches.get(Y.targetId)!=null,Me=Y.view.applyChanges(oe,te.isPrimaryClient,_e,ke);return T_(te,Y.targetId,Me.au),Me.snapshot})(s,S,I,q);const c=await m_(s.localStore,e,!0),h=new bD(e,c.Qs),g=h.ru(c.documents),y=vd.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",o),v=h.applyChanges(g,s.isPrimaryClient,y);T_(s,n,v.au);const E=new vD(e,n,h);return s.Tu.set(e,E),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),v.snapshot}async function ND(s,e,n){const i=qe(s),o=i.Tu.get(e),c=i.Iu.get(o.targetId);if(c.length>1)return i.Iu.set(o.targetId,c.filter((h=>!Qf(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Dg(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),n&&wy(i.remoteStore,o.targetId),Gg(i,o.targetId)})).catch(Lc)):(Gg(i,o.targetId),await Dg(i.localStore,o.targetId,!0))}async function SD(s,e){const n=qe(s),i=n.Tu.get(e),o=n.Iu.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),wy(n.remoteStore,i.targetId))}async function AD(s,e,n){const i=OD(s);try{const o=await(function(h,g){const y=qe(h),v=Ut.now(),E=g.reduce(((q,W)=>q.add(W.key)),it());let S,I;return y.persistence.runTransaction("Locally write mutations","readwrite",(q=>{let W=Ra(),te=it();return y.Ns.getEntries(q,E).next((Y=>{W=Y,W.forEach(((ue,fe)=>{fe.isValidDocument()||(te=te.add(ue))}))})).next((()=>y.localDocuments.getOverlayedDocuments(q,W))).next((Y=>{S=Y;const ue=[];for(const fe of g){const oe=zI(fe,S.get(fe.key).overlayedDocument);oe!=null&&ue.push(new Fo(fe.key,oe,_E(oe.value.mapValue),Kr.exists(!0)))}return y.mutationQueue.addMutationBatch(q,v,ue,g)})).next((Y=>{I=Y;const ue=Y.applyToLocalDocumentSet(S,te);return y.documentOverlayCache.saveOverlays(q,Y.batchId,ue)}))})).then((()=>({batchId:I.batchId,changes:DE(S)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,g,y){let v=h.Vu[h.currentUser.toKey()];v||(v=new Jt(st)),v=v.insert(g,y),h.Vu[h.currentUser.toKey()]=v})(i,o.batchId,n),await _d(i,o.changes),await tm(i.remoteStore)}catch(o){const c=Ay(o,"Failed to persist write");n.reject(c)}}async function pT(s,e){const n=qe(s);try{const i=await Lj(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const h=n.Au.get(c);h&&(bt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?bt(h.hu,14607):o.removedDocuments.size>0&&(bt(h.hu,42227),h.hu=!1))})),await _d(n,i,e)}catch(i){await Lc(i)}}function E_(s,e,n){const i=qe(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Tu.forEach(((c,h)=>{const g=h.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(h,g){const y=qe(h);y.onlineState=g;let v=!1;y.queries.forEach(((E,S)=>{for(const I of S.Sa)I.va(g)&&(v=!0)})),v&&Cy(y)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function CD(s,e,n){const i=qe(s);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Au.get(e),c=o&&o.key;if(c){let h=new Jt(Re.comparator);h=h.insert(c,tr.newNoDocument(c,Ue.min()));const g=it().add(c),y=new Jf(Ue.min(),new Map,new Jt(st),h,g);await pT(i,y),i.du=i.du.remove(c),i.Au.delete(e),Iy(i)}else await Dg(i.localStore,e,!1).then((()=>Gg(i,e,n))).catch(Lc)}async function RD(s,e){const n=qe(s),i=e.batch.batchId;try{const o=await Uj(n.localStore,e);yT(n,i,null),gT(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await _d(n,o)}catch(o){await Lc(o)}}async function ID(s,e,n){const i=qe(s);try{const o=await(function(h,g){const y=qe(h);return y.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let E;return y.mutationQueue.lookupMutationBatch(v,g).next((S=>(bt(S!==null,37113),E=S.keys(),y.mutationQueue.removeMutationBatch(v,S)))).next((()=>y.mutationQueue.performConsistencyCheck(v))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(v,E,g))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E))).next((()=>y.localDocuments.getDocuments(v,E)))}))})(i.localStore,e);yT(i,e,n),gT(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await _d(i,o)}catch(o){await Lc(o)}}function gT(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function yT(s,e,n){const i=qe(s);let o=i.Vu[i.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Gg(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),n&&s.Pu.yu(i,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((i=>{s.Ru.containsKey(i)||bT(s,i)}))}function bT(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(wy(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),Iy(s))}function T_(s,e,n){for(const i of n)i instanceof hT?(s.Ru.addReference(i.key,e),jD(s,i)):i instanceof fT?(xe(Ry,"Document no longer in limbo: "+i.key),s.Ru.removeReference(i.key,e),s.Ru.containsKey(i.key)||bT(s,i.key)):Ge(19791,{wu:i})}function jD(s,e){const n=e.key,i=n.path.canonicalString();s.du.get(n)||s.Eu.has(i)||(xe(Ry,"New document in limbo: "+n),s.Eu.add(i),Iy(s))}function Iy(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Re(Gt.fromString(e)),i=s.fu.next();s.Au.set(i,new xD(n)),s.du=s.du.insert(n,i),rT(s.remoteStore,new So(Ui($f(n.path)),i,"TargetPurposeLimboResolution",qf.ce))}}async function _d(s,e,n){const i=qe(s),o=[],c=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((g,y)=>{h.push(i.pu(y,e,n).then((v=>{if((v||n)&&i.isPrimaryClient){const E=v?!v.fromCache:n?.targetChanges.get(y.targetId)?.current;i.sharedClientState.updateQueryState(y.targetId,E?"current":"not-current")}if(v){o.push(v);const E=xy.As(y.targetId,v);c.push(E)}})))})),await Promise.all(h),i.Pu.H_(o),await(async function(y,v){const E=qe(y);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>ce.forEach(v,(I=>ce.forEach(I.Es,(q=>E.persistence.referenceDelegate.addReference(S,I.targetId,q))).next((()=>ce.forEach(I.ds,(q=>E.persistence.referenceDelegate.removeReference(S,I.targetId,q)))))))))}catch(S){if(!Bc(S))throw S;xe(_y,"Failed to update sequence numbers: "+S)}for(const S of v){const I=S.targetId;if(!S.fromCache){const q=E.Ms.get(I),W=q.snapshotVersion,te=q.withLastLimboFreeSnapshotVersion(W);E.Ms=E.Ms.insert(I,te)}}})(i.localStore,c))}async function DD(s,e){const n=qe(s);if(!n.currentUser.isEqual(e)){xe(Ry,"User change. New user:",e.toKey());const i=await ZE(n.localStore,e);n.currentUser=e,(function(c,h){c.mu.forEach((g=>{g.forEach((y=>{y.reject(new be(se.CANCELLED,h))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await _d(n,i.Ls)}}function kD(s,e){const n=qe(s),i=n.Au.get(e);if(i&&i.hu)return it().add(i.key);{let o=it();const c=n.Iu.get(e);if(!c)return o;for(const h of c){const g=n.Tu.get(h);o=o.unionWith(g.view.nu)}return o}}function vT(s){const e=qe(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=pT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CD.bind(null,e),e.Pu.H_=gD.bind(null,e.eventManager),e.Pu.yu=yD.bind(null,e.eventManager),e}function OD(s){const e=qe(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ID.bind(null,e),e}class Cf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Vj(this.persistence,new Gj,e.initialUser,this.serializer)}Cu(e){return new JE(vy.mi,this.serializer)}Du(e){return new Hj}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cf.provider={build:()=>new Cf};class GD extends Cf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){bt(this.persistence.referenceDelegate instanceof Sf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new xj(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Hr.withCacheSize(this.cacheSizeBytes):Hr.DEFAULT;return new JE((i=>Sf.mi(i,n)),this.serializer)}}class Mg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>E_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=DD.bind(null,this.syncEngine),await fD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new pD})()}createDatastore(e){const n=Zf(e.databaseInfo.databaseId),i=(function(c){return new Xj(c)})(e.databaseInfo);return(function(c,h,g,y){return new eD(c,h,g,y)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,o,c,h,g){return new nD(i,o,c,h,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>E_(this.syncEngine,n,0)),(function(){return y_.v()?new y_:new $j})())}createSyncEngine(e,n){return(function(o,c,h,g,y,v,E){const S=new _D(o,c,h,g,y,v);return E&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=qe(n);xe(Il,"RemoteStore shutting down."),i.Ea.add(5),await xd(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Mg.provider={build:()=>new Mg};class xT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ca("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Uo="FirestoreClient";class MD{constructor(e,n,i,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=er.UNAUTHENTICATED,this.clientId=oy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async h=>{xe(Uo,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(xe(Uo,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Ay(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function ig(s,e){s.asyncQueue.verifyOperationInProgress(),xe(Uo,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async o=>{i.isEqual(o)||(await ZE(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function N_(s,e){s.asyncQueue.verifyOperationInProgress();const n=await PD(s);xe(Uo,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>v_(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,o)=>v_(e.remoteStore,o))),s._onlineComponents=e}async function PD(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){xe(Uo,"Using user provided OfflineComponentProvider");try{await ig(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===se.FAILED_PRECONDITION||o.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Nc("Error using user provided cache. Falling back to memory cache: "+n),await ig(s,new Cf)}}else xe(Uo,"Using default OfflineComponentProvider"),await ig(s,new GD(void 0));return s._offlineComponents}async function _T(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(xe(Uo,"Using user provided OnlineComponentProvider"),await N_(s,s._uninitializedComponentsProvider._online)):(xe(Uo,"Using default OnlineComponentProvider"),await N_(s,new Mg))),s._onlineComponents}function VD(s){return _T(s).then((e=>e.syncEngine))}async function Pg(s){const e=await _T(s),n=e.eventManager;return n.onListen=wD.bind(null,e.syncEngine),n.onUnlisten=ND.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ED.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=SD.bind(null,e.syncEngine),n}function UD(s,e,n={}){const i=new jo;return s.asyncQueue.enqueueAndForget((async()=>(function(c,h,g,y,v){const E=new xT({next:I=>{E.Nu(),h.enqueueAndForget((()=>uT(c,S)));const q=I.docs.has(g);!q&&I.fromCache?v.reject(new be(se.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&I.fromCache&&y&&y.source==="server"?v.reject(new be(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(I)},error:I=>v.reject(I)}),S=new dT($f(g.path),E,{includeMetadataChanges:!0,qa:!0});return cT(c,S)})(await Pg(s),s.asyncQueue,e,n,i))),i.promise}function wT(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const S_=new Map;const ET="firestore.googleapis.com",A_=!0;class C_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new be(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ET,this.ssl=A_}else this.host=e.host,this.ssl=e.ssl??A_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=WE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bj)throw new be(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wT(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new be(se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new be(se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new be(se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nm{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new C_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new C_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new $R;switch(i.type){case"firstParty":return new XR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new be(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=S_.get(n);i&&(xe("ComponentProvider","Removing Datastore"),S_.delete(n),i.terminate())})(this),Promise.resolve()}}function LD(s,e,n,i={}){s=ni(s,nm);const o=Hi(e),c=s._getSettings(),h={...c,emulatorOptions:s._getEmulatorOptions()},g=`${e}:${n}`;o&&(Gf(`https://${g}`),Mf("Firestore",!0)),c.host!==ET&&c.host!==g&&Nc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:g,ssl:o,emulatorOptions:i};if(!Ta(y,h)&&(s._setSettings(y),i.mockUserToken)){let v,E;if(typeof i.mockUserToken=="string")v=i.mockUserToken,E=er.MOCK_USER;else{v=pw(i.mockUserToken,s._app?.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new be(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new er(S)}s._authCredentials=new QR(new cE(v,E))}}class Ho{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ho(this.firestore,e,this._query)}}class dn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Do(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dn(this.firestore,e,this._key)}toJSON(){return{type:dn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(yd(n,dn._jsonSchema))return new dn(e,i||null,new Re(Gt.fromString(n.referencePath)))}}dn._jsonSchemaVersion="firestore/documentReference/1.0",dn._jsonSchema={type:xn("string",dn._jsonSchemaVersion),referencePath:xn("string")};class Do extends Ho{constructor(e,n,i){super(e,n,$f(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dn(this.firestore,null,new Re(e))}withConverter(e){return new Do(this.firestore,e,this._path)}}function yt(s,e,...n){if(s=St(s),uE("collection","path",e),s instanceof nm){const i=Gt.fromString(e,...n);return B0(i),new Do(s,null,i)}{if(!(s instanceof dn||s instanceof Do))throw new be(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Gt.fromString(e,...n));return B0(i),new Do(s.firestore,null,i)}}function Ot(s,e,...n){if(s=St(s),arguments.length===1&&(e=oy.newId()),uE("doc","path",e),s instanceof nm){const i=Gt.fromString(e,...n);return L0(i),new dn(s,null,new Re(i))}{if(!(s instanceof dn||s instanceof Do))throw new be(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Gt.fromString(e,...n));return L0(i),new dn(s.firestore,s instanceof Do?s.converter:null,new Re(i))}}const R_="AsyncQueue";class I_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new tT(this,"async_queue_retry"),this._c=()=>{const i=sg();i&&xe(R_,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=sg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=sg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new jo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Bc(e))throw e;xe(R_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ca("INTERNAL UNHANDLED ERROR: ",j_(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Sy.createAndSchedule(this,e,n,i,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Ge(47125,{Pc:j_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function j_(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}function D_(s){return(function(n,i){if(typeof n!="object"||n===null)return!1;const o=n;for(const c of i)if(c in o&&typeof o[c]=="function")return!0;return!1})(s,["next","error","complete"])}class Lo extends nm{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new I_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new I_(e),this._firestoreClient=void 0,await e}}}function BD(s,e){const n=typeof s=="object"?s:Pf(),i=typeof s=="string"?s:xf,o=fd(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const c=Yg("firestore");c&&LD(o,...c)}return o}function rm(s){if(s._terminated)throw new be(se.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||zD(s),s._firestoreClient}function zD(s){const e=s._freezeSettings(),n=(function(o,c,h,g){return new fI(o,c,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,wT(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new MD(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(s._componentsProvider))}class js{constructor(e){this._byteString=e}static fromBase64String(e){try{return new js(zn.fromBase64String(e))}catch(n){throw new be(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new js(zn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:js._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yd(e,js._jsonSchema))return js.fromBase64String(e.bytes)}}js._jsonSchemaVersion="firestore/bytes/1.0",js._jsonSchema={type:xn("string",js._jsonSchemaVersion),bytes:xn("string")};class wd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new be(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Fc{constructor(e){this._methodName=e}}class Bi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new be(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new be(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bi._jsonSchemaVersion}}static fromJSON(e){if(yd(e,Bi._jsonSchema))return new Bi(e.latitude,e.longitude)}}Bi._jsonSchemaVersion="firestore/geoPoint/1.0",Bi._jsonSchema={type:xn("string",Bi._jsonSchemaVersion),latitude:xn("number"),longitude:xn("number")};class zi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:zi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yd(e,zi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new zi(e.vectorValues);throw new be(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}zi._jsonSchemaVersion="firestore/vectorValue/1.0",zi._jsonSchema={type:xn("string",zi._jsonSchemaVersion),vectorValues:xn("object")};const qD=/^__.*__$/;class FD{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Fo(e,this.data,this.fieldMask,n,this.fieldTransforms):new bd(e,this.data,n,this.fieldTransforms)}}class TT{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Fo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function NT(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ge(40011,{Ac:s})}}class sm{constructor(e,n,i,o,c,h){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new sm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Rf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(NT(this.Ac)&&qD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class HD{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Zf(e)}Cc(e,n,i,o=!1){return new sm({Ac:e,methodName:n,Dc:i,path:Bn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function im(s){const e=s._freezeSettings(),n=Zf(s._databaseId);return new HD(s._databaseId,!!e.ignoreUndefinedProperties,n)}function ST(s,e,n,i,o,c={}){const h=s.Cc(c.merge||c.mergeFields?2:0,e,n,o);Oy("Data must be an object, but it was:",h,i);const g=IT(i,h);let y,v;if(c.merge)y=new fs(h.fieldMask),v=h.fieldTransforms;else if(c.mergeFields){const E=[];for(const S of c.mergeFields){const I=Vg(e,S,n);if(!h.contains(I))throw new be(se.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);DT(E,I)||E.push(I)}y=new fs(E),v=h.fieldTransforms.filter((S=>y.covers(S.field)))}else y=null,v=h.fieldTransforms;return new FD(new $r(g),y,v)}class am extends Fc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof am}}function AT(s,e,n){return new sm({Ac:3,Dc:e.settings.Dc,methodName:s._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class jy extends Fc{_toFieldTransform(e){return new my(e.path,new ld)}isEqual(e){return e instanceof jy}}class Dy extends Fc{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=AT(this,e,!0),i=this.vc.map((c=>Ml(c,n))),o=new Rc(i);return new my(e.path,o)}isEqual(e){return e instanceof Dy&&Ta(this.vc,e.vc)}}class ky extends Fc{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=AT(this,e,!0),i=this.vc.map((c=>Ml(c,n))),o=new Ic(i);return new my(e.path,o)}isEqual(e){return e instanceof ky&&Ta(this.vc,e.vc)}}function CT(s,e,n,i){const o=s.Cc(1,e,n);Oy("Data must be an object, but it was:",o,i);const c=[],h=$r.empty();qo(i,((y,v)=>{const E=Gy(e,y,n);v=St(v);const S=o.yc(E);if(v instanceof am)c.push(E);else{const I=Ml(v,S);I!=null&&(c.push(E),h.set(E,I))}}));const g=new fs(c);return new TT(h,g,o.fieldTransforms)}function RT(s,e,n,i,o,c){const h=s.Cc(1,e,n),g=[Vg(e,i,n)],y=[o];if(c.length%2!=0)throw new be(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<c.length;I+=2)g.push(Vg(e,c[I])),y.push(c[I+1]);const v=[],E=$r.empty();for(let I=g.length-1;I>=0;--I)if(!DT(v,g[I])){const q=g[I];let W=y[I];W=St(W);const te=h.yc(q);if(W instanceof am)v.push(q);else{const Y=Ml(W,te);Y!=null&&(v.push(q),E.set(q,Y))}}const S=new fs(v);return new TT(E,S,h.fieldTransforms)}function $D(s,e,n,i=!1){return Ml(n,s.Cc(i?4:3,e))}function Ml(s,e){if(jT(s=St(s)))return Oy("Unsupported field value:",e,s),IT(s,e);if(s instanceof Fc)return(function(i,o){if(!NT(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const c=[];let h=0;for(const g of i){let y=Ml(g,o.wc(h));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),h++}return{arrayValue:{values:c}}})(s,e)}return(function(i,o){if((i=St(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return MI(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=Ut.fromDate(i);return{timestampValue:Nf(o.serializer,c)}}if(i instanceof Ut){const c=new Ut(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Nf(o.serializer,c)}}if(i instanceof Bi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof js)return{bytesValue:FE(o.serializer,i._byteString)};if(i instanceof dn){const c=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(c))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:yy(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof zi)return(function(h,g){return{mapValue:{fields:{[vE]:{stringValue:xE},[_f]:{arrayValue:{values:h.toArray().map((v=>{if(typeof v!="number")throw g.Sc("VectorValues must only contain numeric values.");return fy(g.serializer,v)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${zf(i)}`)})(s,e)}function IT(s,e){const n={};return fE(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qo(s,((i,o)=>{const c=Ml(o,e.mc(i));c!=null&&(n[i]=c)})),{mapValue:{fields:n}}}function jT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Ut||s instanceof Bi||s instanceof js||s instanceof dn||s instanceof Fc||s instanceof zi)}function Oy(s,e,n){if(!jT(n)||!dE(n)){const i=zf(n);throw i==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+i)}}function Vg(s,e,n){if((e=St(e))instanceof wd)return e._internalPath;if(typeof e=="string")return Gy(s,e);throw Rf("Field path arguments must be of type string or ",s,!1,void 0,n)}const QD=new RegExp("[~\\*/\\[\\]]");function Gy(s,e,n){if(e.search(QD)>=0)throw Rf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new wd(...e.split("."))._internalPath}catch{throw Rf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Rf(s,e,n,i,o){const c=i&&!i.isEmpty(),h=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(c||h)&&(y+=" (found",c&&(y+=` in field ${i}`),h&&(y+=` in document ${o}`),y+=")"),new be(se.INVALID_ARGUMENT,g+s+y)}function DT(s,e){return s.some((n=>n.isEqual(e)))}class kT{constructor(e,n,i,o,c){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(My("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class KD extends kT{data(){return super.data()}}function My(s,e){return typeof e=="string"?Gy(s,e):e instanceof wd?e._internalPath:e._delegate._internalPath}function YD(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new be(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Py{}class Vy extends Py{}function Jn(s,e,...n){let i=[];e instanceof Py&&i.push(e),i=i.concat(n),(function(c){const h=c.filter((y=>y instanceof Ly)).length,g=c.filter((y=>y instanceof Uy)).length;if(h>1||h>0&&g>0)throw new be(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)s=o._apply(s);return s}class Uy extends Vy{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Uy(e,n,i)}_apply(e){const n=this._parse(e);return OT(e._query,n),new Ho(e.firestore,e.converter,Ag(e._query,n))}_parse(e){const n=im(e.firestore);return(function(c,h,g,y,v,E,S){let I;if(v.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new be(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){O_(S,E);const W=[];for(const te of S)W.push(k_(y,c,te));I={arrayValue:{values:W}}}else I=k_(y,c,S)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||O_(S,E),I=$D(g,h,S,E==="in"||E==="not-in");return vn.create(v,E,I)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Ly extends Py{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ly(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:si.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let h=o;const g=c.getFlattenedFilters();for(const y of g)OT(h,y),h=Ag(h,y)})(e._query,n),new Ho(e.firestore,e.converter,Ag(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class By extends Vy{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new By(e,n)}_apply(e){const n=(function(o,c,h){if(o.startAt!==null)throw new be(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new be(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new od(c,h)})(e._query,this._field,this._direction);return new Ho(e.firestore,e.converter,(function(o,c){const h=o.explicitOrderBy.concat([c]);return new zc(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function gr(s,e="asc"){const n=e,i=My("orderBy",s);return By._create(i,n)}class zy extends Vy{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new zy(e,n,i)}_apply(e){return new Ho(e.firestore,e.converter,Ef(e._query,this._limit,this._limitType))}}function XD(s){return zy._create("limit",s,"F")}function k_(s,e,n){if(typeof(n=St(n))=="string"){if(n==="")throw new be(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!CE(e)&&n.indexOf("/")!==-1)throw new be(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Gt.fromString(n));if(!Re.isDocumentKey(i))throw new be(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Y0(s,new Re(i))}if(n instanceof dn)return Y0(s,n._key);throw new be(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zf(n)}.`)}function O_(s,e){if(!Array.isArray(s)||s.length===0)throw new be(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function OT(s,e){const n=(function(o,c){for(const h of o)for(const g of h.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new be(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class WD{convertValue(e,n="none"){switch(Po(e)){case 0:return null;case 1:return e.booleanValue;case 2:return un(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Mo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return qo(e,((o,c)=>{i[o]=this.convertValue(c,n)})),i}convertVectorValue(e){const n=e.fields?.[_f].arrayValue?.values?.map((i=>un(i.doubleValue)));return new zi(n)}convertGeoPoint(e){return new Bi(un(e.latitude),un(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Hf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(sd(e));default:return null}}convertTimestamp(e){const n=Go(e);return new Ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Gt.fromString(e);bt(XE(i),9688,{name:e});const o=new id(i.get(1),i.get(3)),c=new Re(i.popFirst(5));return o.isEqual(n)||Ca(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}function GT(s,e,n){let i;return i=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,i}class Fu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sl extends kT{constructor(e,n,i,o,c,h){super(e,n,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new of(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(My("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Sl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Sl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Sl._jsonSchema={type:xn("string",Sl._jsonSchemaVersion),bundleSource:xn("string","DocumentSnapshot"),bundleName:xn("string"),bundle:xn("string")};class of extends Sl{data(e={}){return super.data(e)}}class Ec{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Fu(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new of(this._firestore,this._userDataWriter,i.key,i,new Fu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new be(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((g=>{const y=new of(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Fu(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:y,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const y=new of(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Fu(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,E=-1;return g.type!==0&&(v=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),g.type!==1&&(h=h.add(g.doc),E=h.indexOf(g.doc.key)),{type:JD(g.type),doc:y,oldIndex:v,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ec._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=oy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function JD(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ge(61501,{type:s})}}function ZD(s){s=ni(s,dn);const e=ni(s.firestore,Lo);return UD(rm(e),s._key).then((n=>PT(e,s,n)))}Ec._jsonSchemaVersion="firestore/querySnapshot/1.0",Ec._jsonSchema={type:xn("string",Ec._jsonSchemaVersion),bundleSource:xn("string","QuerySnapshot"),bundleName:xn("string"),bundle:xn("string")};class MT extends WD{constructor(e){super(),this.firestore=e}convertBytes(e){return new js(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new dn(this.firestore,null,n)}}function Is(s,e,n,...i){s=ni(s,dn);const o=ni(s.firestore,Lo),c=im(o);let h;return h=typeof(e=St(e))=="string"||e instanceof wd?RT(c,"updateDoc",s._key,e,n,i):CT(c,"updateDoc",s._key,e),om(o,[h.toMutation(s._key,Kr.exists(!0))])}function _l(s){return om(ni(s.firestore,Lo),[new Wf(s._key,Kr.none())])}function Fr(s,e){const n=ni(s.firestore,Lo),i=Ot(s),o=GT(s.converter,e);return om(n,[ST(im(s.firestore),"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,Kr.exists(!1))]).then((()=>i))}function Zn(s,...e){s=St(s);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||D_(e[i])||(n=e[i++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(D_(e[i])){const y=e[i];e[i]=y.next?.bind(y),e[i+1]=y.error?.bind(y),e[i+2]=y.complete?.bind(y)}let c,h,g;if(s instanceof dn)h=ni(s.firestore,Lo),g=$f(s._key.path),c={next:y=>{e[i]&&e[i](PT(h,s,y))},error:e[i+1],complete:e[i+2]};else{const y=ni(s,Ho);h=ni(y.firestore,Lo),g=y._query;const v=new MT(h);c={next:E=>{e[i]&&e[i](new Ec(h,v,y,E))},error:e[i+1],complete:e[i+2]},YD(s._query)}return(function(v,E,S,I){const q=new xT(I),W=new dT(E,q,S);return v.asyncQueue.enqueueAndForget((async()=>cT(await Pg(v),W))),()=>{q.Nu(),v.asyncQueue.enqueueAndForget((async()=>uT(await Pg(v),W)))}})(rm(h),g,o,c)}function om(s,e){return(function(i,o){const c=new jo;return i.asyncQueue.enqueueAndForget((async()=>AD(await VD(i),o,c))),c.promise})(rm(s),e)}function PT(s,e,n){const i=n.docs.get(e._key),o=new MT(s);return new Sl(s,o,e._key,i,new Fu(n.hasPendingWrites,n.fromCache),e.converter)}class ek{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=im(e)}set(e,n,i){this._verifyNotCommitted();const o=ag(e,this._firestore),c=GT(o.converter,n,i),h=ST(this._dataReader,"WriteBatch.set",o._key,c,o.converter!==null,i);return this._mutations.push(h.toMutation(o._key,Kr.none())),this}update(e,n,i,...o){this._verifyNotCommitted();const c=ag(e,this._firestore);let h;return h=typeof(n=St(n))=="string"||n instanceof wd?RT(this._dataReader,"WriteBatch.update",c._key,n,i,o):CT(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(h.toMutation(c._key,Kr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=ag(e,this._firestore);return this._mutations=this._mutations.concat(new Wf(n._key,Kr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new be(se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ag(s,e){if((s=St(s)).firestore!==e)throw new be(se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function Oi(){return new jy("serverTimestamp")}function tk(...s){return new Dy("arrayUnion",s)}function nk(...s){return new ky("arrayRemove",s)}function G_(s){return rm(s=ni(s,Lo)),new ek(s,(e=>om(s,e)))}(function(e,n=!0){(function(o){Uc=o})(Dl),ko(new Na("firestore",((i,{instanceIdentifier:o,options:c})=>{const h=i.getProvider("app").getImmediate(),g=new Lo(new KR(i.getProvider("auth-internal")),new WR(h,i.getProvider("app-check-internal")),(function(v,E){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new be(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new id(v.options.projectId,E)})(h,o),h);return c={useFetchStreams:n,...c},g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),Ds(M0,P0,e),Ds(M0,P0,"esm2020")})();const VT="firebasestorage.googleapis.com",UT="storageBucket",rk=120*1e3,sk=600*1e3;class an extends Wt{constructor(e,n,i=0){super(og(e),`Firebase Storage: ${n} (${og(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,an.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return og(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var sn;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(sn||(sn={}));function og(s){return"storage/"+s}function qy(){const s="An unknown error occurred, please check the error payload for server response.";return new an(sn.UNKNOWN,s)}function ik(s){return new an(sn.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function ak(s){return new an(sn.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function ok(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new an(sn.UNAUTHENTICATED,s)}function lk(){return new an(sn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function ck(s){return new an(sn.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function uk(){return new an(sn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dk(){return new an(sn.CANCELED,"User canceled the upload/download.")}function hk(s){return new an(sn.INVALID_URL,"Invalid URL '"+s+"'.")}function fk(s){return new an(sn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function mk(){return new an(sn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+UT+"' property when initializing the app?")}function pk(){return new an(sn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function gk(){return new an(sn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function yk(s){return new an(sn.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ug(s){return new an(sn.INVALID_ARGUMENT,s)}function LT(){return new an(sn.APP_DELETED,"The Firebase app was deleted.")}function bk(s){return new an(sn.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ju(s,e){return new an(sn.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function Ou(s){throw new an(sn.INTERNAL_ERROR,"Internal error: "+s)}class ms{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=ms.makeFromUrl(e,n)}catch{return new ms(e,"")}if(i.path==="")return i;throw fk(e)}static makeFromUrl(e,n){let i=null;const o="([A-Za-z0-9.\\-_]+)";function c(_e){_e.path.charAt(_e.path.length-1)==="/"&&(_e.path_=_e.path_.slice(0,-1))}const h="(/(.*))?$",g=new RegExp("^gs://"+o+h,"i"),y={bucket:1,path:3};function v(_e){_e.path_=decodeURIComponent(_e.path)}const E="v[A-Za-z0-9_]+",S=n.replace(/[.]/g,"\\."),I="(/([^?#]*).*)?$",q=new RegExp(`^https?://${S}/${E}/b/${o}/o${I}`,"i"),W={bucket:1,path:3},te=n===VT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,Y="([^?#]*)",ue=new RegExp(`^https?://${te}/${o}/${Y}`,"i"),oe=[{regex:g,indices:y,postModify:c},{regex:q,indices:W,postModify:v},{regex:ue,indices:{bucket:1,path:2},postModify:v}];for(let _e=0;_e<oe.length;_e++){const ke=oe[_e],Me=ke.regex.exec(e);if(Me){const O=Me[ke.indices.bucket];let D=Me[ke.indices.path];D||(D=""),i=new ms(O,D),ke.postModify(i);break}}if(i==null)throw hk(e);return i}}class vk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function xk(s,e,n){let i=1,o=null,c=null,h=!1,g=0;function y(){return g===2}let v=!1;function E(...Y){v||(v=!0,e.apply(null,Y))}function S(Y){o=setTimeout(()=>{o=null,s(q,y())},Y)}function I(){c&&clearTimeout(c)}function q(Y,...ue){if(v){I();return}if(Y){I(),E.call(null,Y,...ue);return}if(y()||h){I(),E.call(null,Y,...ue);return}i<64&&(i*=2);let oe;g===1?(g=2,oe=0):oe=(i+Math.random())*1e3,S(oe)}let W=!1;function te(Y){W||(W=!0,I(),!v&&(o!==null?(Y||(g=2),clearTimeout(o),S(0)):Y||(g=1)))}return S(0),c=setTimeout(()=>{h=!0,te(!0)},n),te}function _k(s){s(!1)}function wk(s){return s!==void 0}function Ek(s){return typeof s=="object"&&!Array.isArray(s)}function Fy(s){return typeof s=="string"||s instanceof String}function M_(s){return Hy()&&s instanceof Blob}function Hy(){return typeof Blob<"u"}function P_(s,e,n,i){if(i<e)throw Ug(`Invalid value for '${s}'. Expected ${e} or greater.`);if(i>n)throw Ug(`Invalid value for '${s}'. Expected ${n} or less.`)}function $y(s,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${s}`}function BT(s){const e=encodeURIComponent;let n="?";for(const i in s)if(s.hasOwnProperty(i)){const o=e(i)+"="+e(s[i]);n=n+o+"&"}return n=n.slice(0,-1),n}var Al;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Al||(Al={}));function Tk(s,e){const n=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,c=e.indexOf(s)!==-1;return n||o||c}class Nk{constructor(e,n,i,o,c,h,g,y,v,E,S,I=!0,q=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=h,this.callback_=g,this.errorCallback_=y,this.timeout_=v,this.progressCallback_=E,this.connectionFactory_=S,this.retry=I,this.isUsingEmulator=q,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((W,te)=>{this.resolve_=W,this.reject_=te,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new Uh(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const h=g=>{const y=g.loaded,v=g.lengthComputable?g.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,v)};this.progressCallback_!==null&&c.addUploadProgressListener(h),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(h),this.pendingConnection_=null;const g=c.getErrorCode()===Al.NO_ERROR,y=c.getStatus();if(!g||Tk(y,this.additionalRetryCodes_)&&this.retry){const E=c.getErrorCode()===Al.ABORT;i(!1,new Uh(!1,null,E));return}const v=this.successCodes_.indexOf(y)!==-1;i(!0,new Uh(v,c))})},n=(i,o)=>{const c=this.resolve_,h=this.reject_,g=o.connection;if(o.wasSuccessCode)try{const y=this.callback_(g,g.getResponse());wk(y)?c(y):c()}catch(y){h(y)}else if(g!==null){const y=qy();y.serverResponse=g.getErrorText(),this.errorCallback_?h(this.errorCallback_(g,y)):h(y)}else if(o.canceled){const y=this.appDelete_?LT():dk();h(y)}else{const y=uk();h(y)}};this.canceled_?n(!1,new Uh(!1,null,!0)):this.backoffId_=xk(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_k(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Uh{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function Sk(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function Ak(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Ck(s,e){e&&(s["X-Firebase-GMPID"]=e)}function Rk(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function Ik(s,e,n,i,o,c,h=!0,g=!1){const y=BT(s.urlParams),v=s.url+y,E=Object.assign({},s.headers);return Ck(E,e),Sk(E,n),Ak(E,c),Rk(E,i),new Nk(v,s.method,E,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,h,g)}function jk(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Dk(...s){const e=jk();if(e!==void 0){const n=new e;for(let i=0;i<s.length;i++)n.append(s[i]);return n.getBlob()}else{if(Hy())return new Blob(s);throw new an(sn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function kk(s,e,n){return s.webkitSlice?s.webkitSlice(e,n):s.mozSlice?s.mozSlice(e,n):s.slice?s.slice(e,n):null}function Ok(s){if(typeof atob>"u")throw yk("base-64");return atob(s)}const Mi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class lg{constructor(e,n){this.data=e,this.contentType=n||null}}function Gk(s,e){switch(s){case Mi.RAW:return new lg(zT(e));case Mi.BASE64:case Mi.BASE64URL:return new lg(qT(s,e));case Mi.DATA_URL:return new lg(Pk(e),Vk(e))}throw qy()}function zT(s){const e=[];for(let n=0;n<s.length;n++){let i=s.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const c=i,h=s.charCodeAt(++n);i=65536|(c&1023)<<10|h&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function Mk(s){let e;try{e=decodeURIComponent(s)}catch{throw Ju(Mi.DATA_URL,"Malformed data URL.")}return zT(e)}function qT(s,e){switch(s){case Mi.BASE64:{const o=e.indexOf("-")!==-1,c=e.indexOf("_")!==-1;if(o||c)throw Ju(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Mi.BASE64URL:{const o=e.indexOf("+")!==-1,c=e.indexOf("/")!==-1;if(o||c)throw Ju(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Ok(e)}catch(o){throw o.message.includes("polyfill")?o:Ju(s,"Invalid character found")}const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}class FT{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ju(Mi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=Uk(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function Pk(s){const e=new FT(s);return e.base64?qT(Mi.BASE64,e.rest):Mk(e.rest)}function Vk(s){return new FT(s).contentType}function Uk(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class No{constructor(e,n){let i=0,o="";M_(e)?(this.data_=e,i=e.size,o=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,n){if(M_(this.data_)){const i=this.data_,o=kk(i,e,n);return o===null?null:new No(o)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new No(i,!0)}}static getBlob(...e){if(Hy()){const n=e.map(i=>i instanceof No?i.data_:i);return new No(Dk.apply(null,n))}else{const n=e.map(h=>Fy(h)?Gk(Mi.RAW,h).data:h.data_);let i=0;n.forEach(h=>{i+=h.byteLength});const o=new Uint8Array(i);let c=0;return n.forEach(h=>{for(let g=0;g<h.length;g++)o[c++]=h[g]}),new No(o,!0)}}uploadData(){return this.data_}}function HT(s){let e;try{e=JSON.parse(s)}catch{return null}return Ek(e)?e:null}function Lk(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function Bk(s,e){const n=e.split("/").filter(i=>i.length>0).join("/");return s.length===0?n:s+"/"+n}function $T(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function zk(s,e){return e}class pr{constructor(e,n,i,o){this.server=e,this.local=n||e,this.writable=!!i,this.xform=o||zk}}let Lh=null;function qk(s){return!Fy(s)||s.length<2?s:$T(s)}function QT(){if(Lh)return Lh;const s=[];s.push(new pr("bucket")),s.push(new pr("generation")),s.push(new pr("metageneration")),s.push(new pr("name","fullPath",!0));function e(c,h){return qk(h)}const n=new pr("name");n.xform=e,s.push(n);function i(c,h){return h!==void 0?Number(h):h}const o=new pr("size");return o.xform=i,s.push(o),s.push(new pr("timeCreated")),s.push(new pr("updated")),s.push(new pr("md5Hash",null,!0)),s.push(new pr("cacheControl",null,!0)),s.push(new pr("contentDisposition",null,!0)),s.push(new pr("contentEncoding",null,!0)),s.push(new pr("contentLanguage",null,!0)),s.push(new pr("contentType",null,!0)),s.push(new pr("metadata","customMetadata",!0)),Lh=s,Lh}function Fk(s,e){function n(){const i=s.bucket,o=s.fullPath,c=new ms(i,o);return e._makeStorageReference(c)}Object.defineProperty(s,"ref",{get:n})}function Hk(s,e,n){const i={};i.type="file";const o=n.length;for(let c=0;c<o;c++){const h=n[c];i[h.local]=h.xform(i,e[h.server])}return Fk(i,s),i}function KT(s,e,n){const i=HT(e);return i===null?null:Hk(s,i,n)}function $k(s,e,n,i){const o=HT(e);if(o===null||!Fy(o.downloadTokens))return null;const c=o.downloadTokens;if(c.length===0)return null;const h=encodeURIComponent;return c.split(",").map(v=>{const E=s.bucket,S=s.fullPath,I="/b/"+h(E)+"/o/"+h(S),q=$y(I,n,i),W=BT({alt:"media",token:v});return q+W})[0]}function Qk(s,e){const n={},i=e.length;for(let o=0;o<i;o++){const c=e[o];c.writable&&(n[c.server]=s[c.local])}return JSON.stringify(n)}class YT{constructor(e,n,i,o){this.url=e,this.method=n,this.handler=i,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function XT(s){if(!s)throw qy()}function Kk(s,e){function n(i,o){const c=KT(s,o,e);return XT(c!==null),c}return n}function Yk(s,e){function n(i,o){const c=KT(s,o,e);return XT(c!==null),$k(c,o,s.host,s._protocol)}return n}function WT(s){function e(n,i){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=lk():o=ok():n.getStatus()===402?o=ak(s.bucket):n.getStatus()===403?o=ck(s.path):o=i,o.status=n.getStatus(),o.serverResponse=i.serverResponse,o}return e}function Xk(s){const e=WT(s);function n(i,o){let c=e(i,o);return i.getStatus()===404&&(c=ik(s.path)),c.serverResponse=o.serverResponse,c}return n}function Wk(s,e,n){const i=e.fullServerUrl(),o=$y(i,s.host,s._protocol),c="GET",h=s.maxOperationRetryTime,g=new YT(o,c,Yk(s,n),h);return g.errorHandler=Xk(e),g}function Jk(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function Zk(s,e,n){const i=Object.assign({},n);return i.fullPath=s.path,i.size=e.size(),i.contentType||(i.contentType=Jk(null,e)),i}function e3(s,e,n,i,o){const c=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function g(){let oe="";for(let _e=0;_e<2;_e++)oe=oe+Math.random().toString().slice(2);return oe}const y=g();h["Content-Type"]="multipart/related; boundary="+y;const v=Zk(e,i,o),E=Qk(v,n),S="--"+y+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+E+`\r
--`+y+`\r
Content-Type: `+v.contentType+`\r
\r
`,I=`\r
--`+y+"--",q=No.getBlob(S,i,I);if(q===null)throw pk();const W={name:v.fullPath},te=$y(c,s.host,s._protocol),Y="POST",ue=s.maxUploadRetryTime,fe=new YT(te,Y,Kk(s,n),ue);return fe.urlParams=W,fe.headers=h,fe.body=q.uploadData(),fe.errorHandler=WT(e),fe}class t3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Al.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Al.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Al.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,o,c){if(this.sent_)throw Ou("cannot .send() more than once");if(Hi(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),c!==void 0)for(const h in c)c.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,c[h].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ou("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ou("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ou("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ou("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class n3 extends t3{initXhr(){this.xhr_.responseType="text"}}function JT(){return new n3}class jl{constructor(e,n){this._service=e,n instanceof ms?this._location=n:this._location=ms.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new jl(e,n)}get root(){const e=new ms(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $T(this._location.path)}get storage(){return this._service}get parent(){const e=Lk(this._location.path);if(e===null)return null;const n=new ms(this._location.bucket,e);return new jl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw bk(e)}}function r3(s,e,n){s._throwIfRoot("uploadBytes");const i=e3(s.storage,s._location,QT(),new No(e,!0),n);return s.storage.makeRequestWithTokens(i,JT).then(o=>({metadata:o,ref:s}))}function s3(s){s._throwIfRoot("getDownloadURL");const e=Wk(s.storage,s._location,QT());return s.storage.makeRequestWithTokens(e,JT).then(n=>{if(n===null)throw gk();return n})}function i3(s,e){const n=Bk(s._location.path,e),i=new ms(s._location.bucket,n);return new jl(s.storage,i)}function a3(s){return/^[A-Za-z]+:\/\//.test(s)}function o3(s,e){return new jl(s,e)}function ZT(s,e){if(s instanceof Qy){const n=s;if(n._bucket==null)throw mk();const i=new jl(n,n._bucket);return e!=null?ZT(i,e):i}else return e!==void 0?i3(s,e):s}function l3(s,e){if(e&&a3(e)){if(s instanceof Qy)return o3(s,e);throw Ug("To use ref(service, url), the first argument must be a Storage instance.")}else return ZT(s,e)}function V_(s,e){const n=e?.[UT];return n==null?null:ms.makeFromBucketSpec(n,s)}function c3(s,e,n,i={}){s.host=`${e}:${n}`;const o=Hi(e);o&&(Gf(`https://${s.host}/b`),Mf("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:c}=i;c&&(s._overrideAuthToken=typeof c=="string"?c:pw(c,s.app.options.projectId))}class Qy{constructor(e,n,i,o,c,h=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=h,this._bucket=null,this._host=VT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=rk,this._maxUploadRetryTime=sk,this._requests=new Set,o!=null?this._bucket=ms.makeFromBucketSpec(o,this._host):this._bucket=V_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ms.makeFromBucketSpec(this._url,e):this._bucket=V_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){P_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){P_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(hs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new jl(this,e)}_makeRequest(e,n,i,o,c=!0){if(this._deleted)return new vk(LT());{const h=Ik(e,this._appId,i,o,n,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,n){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,o).getPromise()}}const U_="@firebase/storage",L_="0.14.0";const eN="storage";function Bh(s,e,n){return s=St(s),r3(s,e,n)}function zh(s){return s=St(s),s3(s)}function qh(s,e){return s=St(s),l3(s,e)}function u3(s=Pf(),e){s=St(s);const i=fd(s,eN).getImmediate({identifier:e}),o=Yg("storage");return o&&d3(i,...o),i}function d3(s,e,n,i={}){c3(s,e,n,i)}function h3(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new Qy(n,i,o,e,Dl)}function f3(){ko(new Na(eN,h3,"PUBLIC").setMultipleInstances(!0)),Ds(U_,L_,""),Ds(U_,L_,"esm2020")}f3();const m3="type.googleapis.com/google.protobuf.Int64Value",p3="type.googleapis.com/google.protobuf.UInt64Value";function tN(s,e){const n={};for(const i in s)s.hasOwnProperty(i)&&(n[i]=e(s[i]));return n}function If(s){if(s==null)return null;if(s instanceof Number&&(s=s.valueOf()),typeof s=="number"&&isFinite(s)||s===!0||s===!1||Object.prototype.toString.call(s)==="[object String]")return s;if(s instanceof Date)return s.toISOString();if(Array.isArray(s))return s.map(e=>If(e));if(typeof s=="function"||typeof s=="object")return tN(s,e=>If(e));throw new Error("Data cannot be encoded in JSON: "+s)}function kc(s){if(s==null)return s;if(s["@type"])switch(s["@type"]){case m3:case p3:{const e=Number(s.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+s);return e}default:throw new Error("Data cannot be decoded from JSON: "+s)}return Array.isArray(s)?s.map(e=>kc(e)):typeof s=="function"||typeof s=="object"?tN(s,e=>kc(e)):s}const Ky="functions";const B_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qr extends Wt{constructor(e,n,i){super(`${Ky}/${e}`,n||""),this.details=i,Object.setPrototypeOf(this,Qr.prototype)}}function g3(s){if(s>=200&&s<300)return"ok";switch(s){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function jf(s,e){let n=g3(s),i=n,o;try{const c=e&&e.error;if(c){const h=c.status;if(typeof h=="string"){if(!B_[h])return new Qr("internal","internal");n=B_[h],i=h}const g=c.message;typeof g=="string"&&(i=g),o=c.details,o!==void 0&&(o=kc(o))}}catch{}return n==="ok"?null:new Qr(n,i,o)}class y3{constructor(e,n,i,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,hs(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||n.get().then(c=>this.auth=c,()=>{}),this.messaging||i.get().then(c=>this.messaging=c,()=>{}),this.appCheck||o?.get().then(c=>this.appCheck=c,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),i=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:o}}}const Lg="us-central1",b3=/^data: (.*?)(?:\n|$)/;function v3(s){let e=null;return{promise:new Promise((n,i)=>{e=setTimeout(()=>{i(new Qr("deadline-exceeded","deadline-exceeded"))},s)}),cancel:()=>{e&&clearTimeout(e)}}}class x3{constructor(e,n,i,o,c=Lg,h=(...g)=>fetch(...g)){this.app=e,this.fetchImpl=h,this.emulatorOrigin=null,this.contextProvider=new y3(e,n,i,o),this.cancelAllRequests=new Promise(g=>{this.deleteService=()=>Promise.resolve(g())});try{const g=new URL(c);this.customDomain=g.origin+(g.pathname==="/"?"":g.pathname),this.region=Lg}catch{this.customDomain=null,this.region=c}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function _3(s,e,n){const i=Hi(e);s.emulatorOrigin=`http${i?"s":""}://${e}:${n}`,i&&(Gf(s.emulatorOrigin+"/backends"),Mf("Functions",!0))}function w3(s,e,n){const i=o=>T3(s,e,o,{});return i.stream=(o,c)=>S3(s,e,o,c),i}function nN(s){return s.emulatorOrigin&&Hi(s.emulatorOrigin)?"include":void 0}async function E3(s,e,n,i,o){n["Content-Type"]="application/json";let c;try{c=await i(s,{method:"POST",body:JSON.stringify(e),headers:n,credentials:nN(o)})}catch{return{status:0,json:null}}let h=null;try{h=await c.json()}catch{}return{status:c.status,json:h}}async function rN(s,e){const n={},i=await s.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(n.Authorization="Bearer "+i.authToken),i.messagingToken&&(n["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=i.appCheckToken),n}function T3(s,e,n,i){const o=s._url(e);return N3(s,o,n,i)}async function N3(s,e,n,i){n=If(n);const o={data:n},c=await rN(s,i),h=i.timeout||7e4,g=v3(h),y=await Promise.race([E3(e,o,c,s.fetchImpl,s),g.promise,s.cancelAllRequests]);if(g.cancel(),!y)throw new Qr("cancelled","Firebase Functions instance was deleted.");const v=jf(y.status,y.json);if(v)throw v;if(!y.json)throw new Qr("internal","Response is not valid JSON object.");let E=y.json.data;if(typeof E>"u"&&(E=y.json.result),typeof E>"u")throw new Qr("internal","Response is missing data field.");return{data:kc(E)}}function S3(s,e,n,i){const o=s._url(e);return A3(s,o,n,i||{})}async function A3(s,e,n,i){n=If(n);const o={data:n},c=await rN(s,i);c["Content-Type"]="application/json",c.Accept="text/event-stream";let h;try{h=await s.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:c,signal:i?.signal,credentials:nN(s)})}catch(I){if(I instanceof Error&&I.name==="AbortError"){const W=new Qr("cancelled","Request was cancelled.");return{data:Promise.reject(W),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(W)}}}}}}const q=jf(0,null);return{data:Promise.reject(q),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(q)}}}}}}let g,y;const v=new Promise((I,q)=>{g=I,y=q});i?.signal?.addEventListener("abort",()=>{const I=new Qr("cancelled","Request was cancelled.");y(I)});const E=h.body.getReader(),S=C3(E,g,y,i?.signal);return{stream:{[Symbol.asyncIterator](){const I=S.getReader();return{async next(){const{value:q,done:W}=await I.read();return{value:q,done:W}},async return(){return await I.cancel(),{done:!0,value:void 0}}}}},data:v}}function C3(s,e,n,i){const o=(h,g)=>{const y=h.match(b3);if(!y)return;const v=y[1];try{const E=JSON.parse(v);if("result"in E){e(kc(E.result));return}if("message"in E){g.enqueue(kc(E.message));return}if("error"in E){const S=jf(0,E);g.error(S),n(S);return}}catch(E){if(E instanceof Qr){g.error(E),n(E);return}}},c=new TextDecoder;return new ReadableStream({start(h){let g="";return y();async function y(){if(i?.aborted){const v=new Qr("cancelled","Request was cancelled");return h.error(v),n(v),Promise.resolve()}try{const{value:v,done:E}=await s.read();if(E){g.trim()&&o(g.trim(),h),h.close();return}if(i?.aborted){const I=new Qr("cancelled","Request was cancelled");h.error(I),n(I),await s.cancel();return}g+=c.decode(v,{stream:!0});const S=g.split(`
`);g=S.pop()||"";for(const I of S)I.trim()&&o(I.trim(),h);return y()}catch(v){const E=v instanceof Qr?v:jf(0,null);h.error(E),n(E)}}},cancel(){return s.cancel()}})}const z_="@firebase/functions",q_="0.13.1";const R3="auth-internal",I3="app-check-internal",j3="messaging-internal";function D3(s){const e=(n,{instanceIdentifier:i})=>{const o=n.getProvider("app").getImmediate(),c=n.getProvider(R3),h=n.getProvider(j3),g=n.getProvider(I3);return new x3(o,c,h,g,i)};ko(new Na(Ky,e,"PUBLIC").setMultipleInstances(!0)),Ds(z_,q_,s),Ds(z_,q_,"esm2020")}function k3(s=Pf(),e=Lg){const i=fd(St(s),Ky).getImmediate({identifier:e}),o=Yg("functions");return o&&O3(i,...o),i}function O3(s,e,n){_3(St(s),e,n)}function Gu(s,e,n){return w3(St(s),e)}D3();const G3={apiKey:"AIzaSyCRRGBCSozYnhV372OW5Ry6FEfKw_rqNpE",authDomain:"thecrookedfence-7aea9.firebaseapp.com",projectId:"thecrookedfence-7aea9",storageBucket:"thecrookedfence-7aea9.firebasestorage.app",messagingSenderId:"777578540066",appId:"1:777578540066:web:e6dbcb6ccf397e11cc6e7b"},lm=bw(G3),Ae=BD(lm),lf=zR(lm),Mu=k3(lm,"us-central1"),Fh=u3(lm),Pu="uncategorized",cg="Uncategorized",M3=[{value:"name_asc",label:"Name (A  Z)"},{value:"name_desc",label:"Name (Z  A)"},{value:"quantity_asc",label:"Quantity (low  high)"},{value:"quantity_desc",label:"Quantity (high  low)"},{value:"threshold_asc",label:"Threshold (low  high)"},{value:"threshold_desc",label:"Threshold (high  low)"}],Hh=[{id:"pudo",label:"Pudo, 34 days (R100)",cost:100,order:1},{id:"courier_guy",label:"Courier Guy, 34 days (R150)",cost:150,order:2},{id:"courier_guy_next",label:"Courier Guy next day delivery (~R250)",cost:250,order:3},{id:"collection",label:"Collection at farm (full address provided)",cost:0,order:4},{id:"waitlist",label:"Waiting list until eggs are available",cost:0,order:5},{id:"other",label:"Other",cost:0,order:6}],F_=s=>{if(!s)return 0;const e=s.match(/R\s*([\d.]+)/i);return e?Number(e[1]):0},wl=()=>new Date().toISOString().split("T")[0],H_=[{key:"invoice",label:"Invoice",urlField:"invoiceUrl",nameField:"invoiceFileName",description:"Attach the invoice document for bookkeeping (PDF/image)."},{key:"proof",label:"Proof of payment",urlField:"proofOfPaymentUrl",nameField:"proofOfPaymentFileName",description:"Attach any proof of payment to keep a record of receipts."}],El="bg-brandBeige shadow-lg rounded-2xl border border-brandGreen/10",Hu=[{id:"pending",label:"Pending"},{id:"waiting_list",label:"Waiting list"},{id:"cancelled",label:"Cancelled"},{id:"packed",label:"Packed"},{id:"scheduled_dispatch",label:"Scheduled for Dispatch"},{id:"shipped",label:"Shipped"},{id:"completed",label:"Completed"},{id:"archived",label:"Archived"}],$_=Hu.filter(s=>s.id!=="cancelled"),$h={pending:"bg-amber-100 text-amber-800 border border-amber-200",waiting_list:"bg-orange-100 text-orange-800 border border-orange-200",cancelled:"bg-rose-100 text-rose-800 border border-rose-200",packed:"bg-blue-100 text-blue-800 border border-blue-200",scheduled_dispatch:"bg-cyan-100 text-cyan-800 border border-cyan-200",shipped:"bg-indigo-100 text-indigo-800 border border-indigo-200",completed:"bg-emerald-100 text-emerald-800 border border-emerald-200",archived:"bg-gray-100 text-gray-800 border border-gray-200"};function P3(){const[s,e]=R.useState([]),[n,i]=R.useState([]),[o,c]=R.useState(null),[h,g]=R.useState({}),[y,v]=R.useState(!0),[E,S]=R.useState(!1),[I,q]=R.useState(""),[W,te]=R.useState(""),[Y,ue]=R.useState(""),[fe,oe]=R.useState(""),[_e,ke]=R.useState(null),[Me,O]=R.useState(""),[D,k]=R.useState({}),[z,P]=R.useState(null),[F,G]=R.useState([]),[Fe,Mt]=R.useState({type:"expense",amount:"",description:"",date:wl(),file:null}),[ee,ge]=R.useState(!1),[Ne,Xe]=R.useState(""),[at,U]=R.useState(""),[B,le]=R.useState({minAmount:"",maxAmount:"",hasReceipt:!1,sortKey:"dateDesc"}),he=m=>{le(x=>({...x,...m}))},[ve,ye]=R.useState(!0),[Se,Le]=R.useState(!1),[Ie,Be]=R.useState("month"),[At,Yr]=R.useState({day:wl(),weekStart:wl(),weekLength:7,month:wl().slice(0,7),year:new Date().getFullYear().toString()}),yr=m=>{Yr(x=>({...x,...m}))},[_n,Ia]=R.useState("all"),[qn,ja]=R.useState("all"),[ps,$t]=R.useState(""),[jt,Os]=R.useState("orderNumberDesc"),[vt,wn]=R.useState("orders"),[Pe,Xr]=R.useState(null),[Da,Wr]=R.useState(!0),[de,Rn]=R.useState(null),[ct,rr]=R.useState(null),[$o,wt]=R.useState(null),[Lt,En]=R.useState(null),[lt,Qo]=R.useState([]),[Fn,Ko]=R.useState({label:"",price:"",specialPrice:""}),[br,Gs]=R.useState({}),[Qt,Kt]=R.useState(""),[Jr,In]=R.useState(""),[ai,$i]=R.useState(null),[gt,oi]=R.useState([]),[Yo,Qi]=R.useState(""),[Hn,ka]=R.useState("all"),[Ms,Ps]=R.useState("name_asc"),[Vs,vr]=R.useState([]),[xr,Bt]=R.useState({}),[on,Zr]=R.useState(!1),[Ki,gs]=R.useState(""),[Yi,Oa]=R.useState(""),[es,Xi]=R.useState(!1),[_r,kn]=R.useState(!1),[Zt,sr]=R.useState(""),[Yt,li]=R.useState(null),[ci,wr]=R.useState(null),Er=R.useRef(null),Wi=R.useRef(null),Ji=R.useRef([]),Zi=R.useRef(null),Ga=R.useRef(null),ui=R.useRef([]),[$e,Dt]=R.useState({name:"",categoryId:"",subCategory:"",quantity:"",threshold:"5",notes:""}),[Xt,We]=R.useState(""),[di,mt]=R.useState(!1),[Us,ys]=R.useState(""),[hi,On]=R.useState([]),[Tr,Xo]=R.useState({email:"",role:"worker",password:""}),[Ma,kt]=R.useState(""),[Wo,Ls]=R.useState(!1),[Gn,Bs]=R.useState(""),[ir,ea]=R.useState([]),[bs,Jo]=R.useState({label:"",cost:""}),[zs,en]=R.useState(""),[Nr,Sr]=R.useState(""),[ar,qs]=R.useState(null),$n=ir.length>0?ir:Hh,[Pt,fi]=R.useState([]),[vs,Ar]=R.useState({name:""}),[tn,ts]=R.useState({categoryId:"",name:""}),[ut,ns]=R.useState(null),[Pa,mi]=R.useState(!1),[Va,Fs]=R.useState(null),[zt,Qn]=R.useState(null),[Tn,Cr]=R.useState(!1),[xs,rs]=R.useState(!1),[Rr,Ir]=R.useState(null),[ta,ss]=R.useState(null),je=Pe==="admin"||Pe==="super_admin",[Ua,pi]=R.useState({}),[Zo,el]=R.useState(!1),[gi,La]=R.useState(""),[tl,na]=R.useState(""),[yi,ra]=R.useState(null),[Kn,Ba]=R.useState([]),[_s,za]=R.useState([]),[bi,ws]=R.useState({name:"",description:""}),[dt,Hs]=R.useState({label:"",price:"",specialPrice:"",categoryId:""}),[Pl,jr]=R.useState(null),[d,b]=R.useState(""),[w,C]=R.useState(""),[$,J]=R.useState([]),[me,Ve]=R.useState({label:"",cost:""}),[qt,He]=R.useState(""),[Ct,Nn]=R.useState(""),[is,Dr]=R.useState(null),[or,Mn]=R.useState(null),vi=m=>{const x=(m?.formType??de?.formType)==="livestock",T=x?$:$n;return!x&&T.length===0?Hh:T},sa=m=>m.formType==="livestock"?"livestockOrders":"eggOrders",Ed=(m,x)=>`${m}-${x}`,Td=m=>m?"toDate"in m?m.toDate().toLocaleString():new Date(m.seconds*1e3).toLocaleString():"";R.useEffect(()=>{const m=Hw(lf,x=>{c(x),Wr(!0),Xr(null),v(!1)});return()=>m()},[]);const cm=(m,x)=>{pi(T=>({...T,[m]:x}))};R.useEffect(()=>{let m=!1;if(!o){Fs(null);return}return(async()=>{try{const N=((await Aw(o)).claims.role??"").toLowerCase(),j=N==="admin"||N==="worker"||N==="super_admin"?N:null;m||(Fs(j),Xr(j))}catch(T){console.error("getIdTokenResult error",T),m||Fs(null)}finally{m||Wr(!1)}})(),()=>{m=!0}},[o]),R.useEffect(()=>{if(!o){Xr(null),Wr(!1),Ls(!1),wn("orders");return}Wr(!0);const m=Zn(Ot(Ae,"users",o.uid),x=>{const N=x.data()?.role??null,j=Va??N??null;Xr(V=>V??j),console.log("[UsersTab] role snapshot",{uid:o.uid,email:o.email,role:j}),j==="worker"&&wn("stock_updates"),Wr(!1)},x=>{console.error("Fetch role error",x),Xr(null),Wr(!1)});return()=>m()},[o,Va]),R.useEffect(()=>{if(!o||Wo)return;(async()=>{try{await Gu(Mu,"ensureCurrentUserProfile")(),Ls(!0),console.log("[UsersTab] ensureCurrentUserProfile called",{uid:o.uid,email:o.email})}catch(x){console.error("Ensure profile error",x)}})()},[o,Wo]),R.useEffect(()=>{if(!y&&!Da)return;const m=setTimeout(()=>{v(!1),Wr(!1)},5e3);return()=>clearTimeout(m)},[y,Da]),R.useEffect(()=>{if(!o){e([]);return}const m=Jn(yt(Ae,"eggOrders"),gr("createdAt","desc")),x=Zn(m,T=>{const N=T.docs.map(j=>{const V=j.data();return{id:j.id,...V}});e(N)});return()=>x()},[o]),R.useEffect(()=>{if(!o){i([]);return}const m=Jn(yt(Ae,"livestockOrders"),gr("createdAt","desc")),x=Zn(m,T=>{const N=T.docs.map(j=>{const V=j.data();return{id:j.id,...V}});i(N)});return()=>x()},[o]),R.useEffect(()=>{if(!o){oi([]),vr([]);return}const m=Jn(yt(Ae,"stockItems"),gr("name","asc")),x=Jn(yt(Ae,"stockLogs"),gr("createdAt","desc")),T=di?x:Jn(x,XD(25)),N=Zn(m,V=>{const ae=V.docs.map(pe=>{const Ee=pe.data();return{id:pe.id,name:Ee.name??"Unnamed",category:Ee.category??"",subCategory:Ee.subCategory??"",quantity:Number(Ee.quantity??0),threshold:Number(Ee.threshold??0),notes:Ee.notes??"",voiceNoteUrl:Ee.voiceNoteUrl??"",updatedAt:Ee.updatedAt,updatedBy:Ee.updatedBy}});oi(ae),Bt(pe=>{const Ee={};return ae.forEach(Ke=>{Ee[Ke.id]={quantity:pe[Ke.id]?.quantity!==void 0?pe[Ke.id].quantity:Ke.quantity,notes:pe[Ke.id]?.notes!==void 0?pe[Ke.id].notes:Ke.notes??""}}),Ee})}),j=Zn(T,V=>{const ae=V.docs.map(pe=>{const Ee=pe.data(),Ke=Array.isArray(Ee.changes)?Ee.changes??[]:[];return{id:pe.id,itemId:Ee.itemId??"",summary:Ee.summary,name:Ee.summary??Ee.name??"",change:Number(Ee.change??0),fromQty:Number(Ee.fromQty??0),toQty:Number(Ee.toQty??0),notes:Ee.notes??"",userEmail:Ee.userEmail??"",voiceNoteUrl:Ee.voiceNoteUrl??"",changes:Ke,createdAt:Ee.createdAt}});vr(ae)});return()=>{N(),j()}},[o,di]),R.useEffect(()=>{if(!o){Qo([]),Gs({});return}const m=Jn(yt(Ae,"eggTypes"),gr("order","asc")),x=Zn(m,T=>{const N=T.docs.map(j=>{const V=j.data();return{id:j.id,label:V.label??"Unnamed",price:Number(V.price??0),specialPrice:V.specialPrice===void 0?null:Number(V.specialPrice),order:V.order??0}});Qo(N),Gs(j=>{const V={...j};return N.forEach(ae=>{V[ae.id]||(V[ae.id]={label:ae.label,price:ae.price.toString(),specialPrice:ae.specialPrice?.toString()??""})}),Object.keys(V).forEach(ae=>{N.find(pe=>pe.id===ae)||delete V[ae]}),V})});return()=>x()},[o]),R.useEffect(()=>{if(!o){G([]);return}const m=Jn(yt(Ae,"financeEntries"),gr("createdAt","desc")),x=Zn(m,T=>{const N=T.docs.map(j=>{const V=j.data();return{id:j.id,type:V.type??"expense",amount:Number(V.amount??0),description:V.description??"",date:V.date,attachmentUrl:V.attachmentUrl,attachmentName:V.attachmentName,createdAt:V.createdAt}});G(N)});return()=>x()},[o]);const xi=R.useMemo(()=>{const m=new Map;$n.forEach(T=>m.set(T.id,Number(T.cost??0)));const x=T=>T.map(N=>{const j=N.createdAt&&"toDate"in N.createdAt?N.createdAt.toDate():N.createdAt?new Date(N.createdAt.seconds*1e3):null,V=N.eggs??[],ae=V.reduce((Ke,mn)=>{const fr=mn.specialPrice??void 0,fm=fr==null||fr===0?mn.price??0:fr;return Ke+fm*mn.quantity},0),pe=typeof N.deliveryCost=="number"&&!Number.isNaN(N.deliveryCost)?Number(N.deliveryCost):m.get(N.deliveryOptionId??"")??F_(N.deliveryOption)??0,Ee=ae+pe;return{...N,deliveryCost:pe,eggsTotal:ae,orderNumber:N.orderNumber??"",orderStatus:N.orderStatus??"pending",fulfilledEggs:N.fulfilledEggs??[],trackingLink:N.trackingLink??"",paid:!!N.paid,createdAtDate:j,eggSummary:V.filter(Ke=>Ke.quantity>0)?.map(Ke=>`${Ke.label} x ${Ke.quantity}`).join(", ")??"",totalCost:Ee}});return{eggs:x(s),livestock:x(n)}},[s,n,$n]),$s=m=>m.date?m.date:m.createdAt?"toDate"in m.createdAt?m.createdAt.toDate().toISOString().split("T")[0]:"seconds"in m.createdAt?new Date(m.createdAt.seconds*1e3).toISOString().split("T")[0]:"":"",nl=R.useMemo(()=>{const m=new Set([new Date().getFullYear().toString()]);return F.forEach(x=>{const T=$s(x);T&&m.add(T.slice(0,4))}),Array.from(m).sort((x,T)=>T.localeCompare(x))},[F]),ia=m=>{if(!m)return null;const x=new Date(m);return Number.isNaN(x.getTime())?null:x},Vl=m=>{const x=new Date(m);return x.setHours(0,0,0,0),x},aa=m=>{const x=new Date(m);return x.setHours(23,59,59,999),x},rl=R.useMemo(()=>{switch(Ie){case"day":{const m=ia(At.day);return m?{start:Vl(m),end:aa(m)}:null}case"week":{const m=ia(At.weekStart);if(!m)return null;const x=Math.min(7,Math.max(2,At.weekLength||7)),T=Vl(m),N=aa(new Date(T.getTime()+(x-1)*24*60*60*1e3));return{start:T,end:N}}case"month":{const[m,x]=(At.month||"").split("-");if(!m||!x)return null;const T=new Date(Number(m),Number(x)-1,1),N=new Date(T);return N.setMonth(N.getMonth()+1),N.setDate(0),{start:Vl(T),end:aa(N)}}case"year":{const m=Number(At.year);if(!m)return null;const x=new Date(m,0,1),T=new Date(m,11,31);return{start:Vl(x),end:aa(T)}}default:return null}},[Ie,At]),lr=R.useMemo(()=>{const{minAmount:m,maxAmount:x,hasReceipt:T,sortKey:N}=B;return F.filter(V=>{const ae=$s(V),pe=ae?ia(ae):null,Ee=!rl||pe&&pe>=rl.start&&pe<=rl.end,Ke=!m||V.amount>=Number(m||"0"),mn=!x||V.amount<=Number(x||"0"),fr=T?!!V.attachmentUrl:!0;return Ee&&Ke&&mn&&fr}).sort((V,ae)=>{switch(N){case"dateAsc":{const pe=$s(V),Ee=$s(ae);return pe.localeCompare(Ee)}case"dateDesc":{const pe=$s(V);return $s(ae).localeCompare(pe)}case"amountAsc":return V.amount-ae.amount;case"amountDesc":return ae.amount-V.amount;default:return 0}})},[F,B,rl]),hn=R.useMemo(()=>lr.reduce((m,x)=>(x.type==="income"?m.income+=x.amount:m.expense+=x.amount,m),{income:0,expense:0}),[lr]),sl=R.useMemo(()=>lr.filter(m=>m.type==="income"),[lr]),Ul=R.useMemo(()=>lr.filter(m=>m.type==="expense"),[lr]),Ll=R.useMemo(()=>{const m=lr.length,x=lr.filter(N=>!!N.attachmentUrl).length,T=m===0?0:lr.reduce((N,j)=>N+j.amount,0)/m;return{total:m,receipts:x,average:T}},[lr]),Bl=R.useMemo(()=>F.slice(0,4),[F]),Hc=R.useMemo(()=>[...xi.eggs,...xi.livestock],[xi]),oa=R.useMemo(()=>{const m=Hu.map(pe=>pe.id),x={},T={};m.forEach(pe=>{x[pe]=0,T[pe]={totalDays:0,count:0}});let N=0;const j=Date.now();Hc.forEach(pe=>{const Ee=pe.orderStatus??"pending";x[Ee]=(x[Ee]??0)+1,N+=pe.totalCost??0;const Ke=pe.createdAtDate?.getTime()??(pe.createdAt&&"seconds"in pe.createdAt?new Date(pe.createdAt.seconds*1e3).getTime():void 0);if(Ke){const mn=Math.max((j-Ke)/864e5,0);T[Ee]={totalDays:T[Ee].totalDays+mn,count:T[Ee].count+1}}});const V=Math.max(1,...m.map(pe=>x[pe]??0)),ae={};return m.forEach(pe=>{const{totalDays:Ee,count:Ke}=T[pe];ae[pe]=Ke?Ee/Ke:0}),{totalOrders:Hc.length,totalValue:N,maxStatusCount:V,statusCounts:x,averageDurations:ae}},[Hc]),qa=R.useMemo(()=>{const m={};let x=0,T=0;gt.forEach(j=>{const V=j.category||"Uncategorized";m[V]=(m[V]??0)+j.quantity,x+=j.quantity,j.threshold!==void 0&&j.threshold!==null&&j.quantity<=j.threshold&&T++});const N=Object.entries(m).sort((j,V)=>V[1]-j[1]).slice(0,5);return{totalItems:gt.length,lowStockCount:T,totalQuantity:x,categoryBreakdown:N}},[gt]),um=m=>m?new Date(`${m}-01`).toLocaleString("default",{month:"short",year:"numeric"}):"Unknown month",$c=R.useMemo(()=>{const m={};F.forEach(j=>{const V=$s(j);if(!V)return;const ae=V.slice(0,7);m[ae]||(m[ae]={income:0,expense:0}),j.type==="income"?m[ae].income+=j.amount:m[ae].expense+=j.amount});const T=Object.keys(m).sort().slice(-6),N=Math.max(1,...T.flatMap(j=>[m[j].income,m[j].expense]))||1;return T.map(j=>({month:j,label:um(j),income:m[j].income,expense:m[j].expense,incomeHeight:m[j].income/N*100,expenseHeight:m[j].expense/N*100}))},[F]),Yn=(m,x)=>m.length===0?u.jsx("div",{className:"rounded-xl border border-dashed border-brandGreen/30 bg-white/80 px-4 py-6 text-sm text-brandGreen/70",children:x}):m.map(T=>u.jsxs("div",{className:"rounded-xl border border-brandGreen/15 bg-white px-4 py-3 shadow-sm",children:[u.jsxs("div",{className:"flex flex-col gap-1 md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{className:"space-y-0.5",children:[u.jsxs("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:[T.type==="income"?"Income":"Expense"," "," ",T.date??""]}),T.description&&u.jsx("p",{className:"text-sm text-brandGreen",children:T.description})]}),u.jsxs("span",{className:`text-lg font-semibold ${T.type==="income"?"text-emerald-700":"text-red-700"}`,children:["R",T.amount.toFixed(2)]})]}),T.attachmentUrl&&u.jsxs("a",{href:T.attachmentUrl,target:"_blank",rel:"noreferrer",className:"mt-3 inline-flex items-center gap-2 text-xs font-semibold text-brandGreen underline decoration-brandGreen/40 underline-offset-4",children:[u.jsx("i",{className:"fa-regular fa-paperclip"}),T.attachmentName??"View attachment"]})]},T.id)),Pn=R.useMemo(()=>{const m={};return gt.forEach(x=>{const T=x.categoryId??"",N=(x.subCategory??"").trim();!T||!N||(m[T]||(m[T]=[]),m[T].includes(N)||m[T].push(N))}),Pt.forEach(x=>{const T=x.id;(x.subCategories??[]).forEach(N=>{const j=N.trim();j&&(m[T]||(m[T]=[]),m[T].includes(j)||m[T].push(j))})}),m},[gt,Pt]),Fa=R.useMemo(()=>{const m=new Map;return Pt.forEach(x=>{const T=x.name.trim().toLowerCase();T&&(m.has(T)||m.set(T,x))}),gt.forEach(x=>{const T=x.category?.trim();if(!T)return;const N=T.toLowerCase();m.has(N)||m.set(N,{id:x.categoryId||`name:${N}`,name:T,subCategories:[]})}),Array.from(m.values())},[Pt,gt]);R.useEffect(()=>{if(Fa.length===0){sr("all");return}const m=Fa.some(x=>x.id===Zt);(!Zt||!m&&Zt!=="all")&&sr(Fa[0].id)},[Fa,Zt]);const Nd=m=>{const x=(m.category??"").trim();if(!x)return Pu;const T=x.toLowerCase(),N=Pt.find(j=>j.name.trim().toLowerCase()===T);return N?N.id:m.categoryId&&m.categoryId!==""?m.categoryId:`name:${T}`},_i=R.useMemo(()=>{const m=new Map;Pt.forEach(N=>{const j=N.name.trim();if(!j)return;const V=j.toLowerCase();m.has(V)||m.set(V,{...N,id:N.id||`name:${V}`})}),gt.forEach(N=>{const j=(N.category??"").trim();if(!j)return;const V=j.toLowerCase();m.has(V)||m.set(V,{id:N.categoryId||`name:${V}`,name:j,subCategories:[]})});const x=Array.from(m.values()).sort((N,j)=>N.name.localeCompare(j.name));return gt.some(N=>!(N.category??"").trim())&&x.push({id:Pu,name:cg}),[{id:"all",name:"All categories"},...x]},[Pt,gt]),Ha=R.useMemo(()=>{const m=new Map;return _i.forEach(x=>{x.id!=="all"&&m.set(x.id,x.name)}),m.has(Pu)||m.set(Pu,cg),m},[_i]),il=R.useMemo(()=>{const m=Yo.trim().toLowerCase(),T=gt.filter(N=>(()=>{if(Hn==="all")return!0;if(Hn===Pu)return!(N.category??"").trim();if(N.categoryId===Hn)return!0;const ae=(N.category??"").trim().toLowerCase();if(ae&&`name:${ae}`===Hn)return!0;const pe=Ha.get(Hn);if(pe){const Ee=pe.trim().toLowerCase();if(ae===Ee)return!0}return!1})()?m?[N.name,N.category,N.subCategory,N.notes].filter(Boolean).join(" ").toLowerCase().includes(m):!0:!1).slice();return T.sort((N,j)=>{switch(Ms){case"name_desc":return j.name.localeCompare(N.name);case"quantity_asc":return N.quantity-j.quantity;case"quantity_desc":return j.quantity-N.quantity;case"threshold_asc":return N.threshold-j.threshold;case"threshold_desc":return j.threshold-N.threshold;case"name_asc":default:return N.name.localeCompare(j.name)}}),T},[gt,Hn,Yo,Ms,Ha]),Qc=R.useMemo(()=>{const m=new Map;il.forEach(T=>{const N=Nd(T);m.has(N)||m.set(N,[]),m.get(N).push(T)});const x=[];return _i.forEach(T=>{if(T.id==="all")return;const N=m.get(T.id);N?.length&&(x.push({id:T.id,label:Ha.get(T.id)??T.name,items:N}),m.delete(T.id))}),m.forEach((T,N)=>{x.push({id:N,label:Ha.get(N)??cg,items:T})}),x},[il,_i,Ha]);R.useEffect(()=>{Hn==="all"||_i.some(m=>m.id===Hn)||ka("all")},[Hn,_i]),R.useEffect(()=>{if(!o){Ba([]),za([]);return}const m=Jn(yt(Ae,"livestockCategories"),gr("name","asc")),x=Jn(yt(Ae,"livestockTypes"),gr("order","asc")),T=Zn(m,j=>{const V=j.docs.map(ae=>{const pe=ae.data();return{id:ae.id,name:pe.name??"",description:pe.description??""}});Ba(V),V.length>0&&dt.categoryId&&!V.find(ae=>ae.id===dt.categoryId)&&Hs(ae=>({...ae,categoryId:V[0].id}))},j=>{console.error("livestockCategories snapshot error",j),Ba([])}),N=Zn(x,j=>{const V=j.docs.map(ae=>{const pe=ae.data();return{id:ae.id,label:pe.label??"Unnamed",price:Number(pe.price??0),specialPrice:pe.specialPrice===void 0?null:Number(pe.specialPrice),categoryId:pe.categoryId??"",categoryName:pe.categoryName??"",order:pe.order??0}});za(V)},j=>{console.error("livestockTypes snapshot error",j),za([])});return()=>{T(),N()}},[o,dt.categoryId]);const Qs=R.useMemo(()=>{const m=Us.trim().toLowerCase();return m?Vs.filter(x=>[x.name,x.summary,x.notes,x.userEmail,x.voiceNoteUrl,`${x.change}`,...(x.changes??[]).map(N=>`${N.name} ${N.notes??""}`)].filter(Boolean).join(" ").toLowerCase().includes(m)):Vs},[Vs,Us]);R.useEffect(()=>{if(!$e.categoryId)return;const m=Pn[$e.categoryId]??[];if(m.length===0){Dt(x=>({...x,subCategory:""}));return}Dt(x=>({...x,subCategory:m[0]??""}))},[$e.categoryId,Pn]);const Es=m=>{if(!m)return null;const x=(m.match(/\d+/g)||[]).join("");if(!x)return null;const T=Number(x);return isNaN(T)?null:T},wi=R.useMemo(()=>{const m=ps.trim().toLowerCase();return[...xi.eggs.filter(N=>{const j=_n==="all"?N.orderStatus!=="completed"&&N.orderStatus!=="cancelled"&&N.orderStatus!=="archived":N.orderStatus===_n,V=qn==="all"?!0:qn==="paid"?N.paid:!N.paid,ae=[N.name,N.surname,N.email,N.cellphone,N.deliveryOption,N.eggSummary,N.sendDate].filter(Boolean).join(" ").toLowerCase(),pe=m?ae.includes(m):!0;return j&&V&&pe})].sort((N,j)=>{switch(jt){case"orderNumberDesc":{const V=Es(N.orderNumber),ae=Es(j.orderNumber);return V!==null&&ae!==null&&ae!==V?ae-V:(j.createdAtDate?.getTime()||0)-(N.createdAtDate?.getTime()||0)}case"orderNumberAsc":{const V=Es(N.orderNumber),ae=Es(j.orderNumber);return V!==null&&ae!==null&&V!==ae?V-ae:(N.createdAtDate?.getTime()||0)-(j.createdAtDate?.getTime()||0)}case"createdAsc":return(N.createdAtDate?.getTime()||0)-(j.createdAtDate?.getTime()||0);case"sendDateAsc":return(N.sendDate||"").localeCompare(j.sendDate||"");case"sendDateDesc":return(j.sendDate||"").localeCompare(N.sendDate||"");case"totalDesc":return(j.totalCost??0)-(N.totalCost??0);case"totalAsc":return(N.totalCost??0)-(j.totalCost??0);case"status":return N.orderStatus.localeCompare(j.orderStatus);case"createdDesc":default:return(j.createdAtDate?.getTime()||0)-(N.createdAtDate?.getTime()||0)}})},[xi,ps,jt,_n,qn]),$a=R.useMemo(()=>{const m=ps.trim().toLowerCase();return[...xi.livestock.filter(N=>{const j=_n==="all"?N.orderStatus!=="completed"&&N.orderStatus!=="cancelled"&&N.orderStatus!=="archived":N.orderStatus===_n,V=qn==="all"?!0:qn==="paid"?N.paid:!N.paid,ae=[N.name,N.surname,N.email,N.cellphone,N.deliveryOption,N.eggSummary,N.sendDate].filter(Boolean).join(" ").toLowerCase(),pe=m?ae.includes(m):!0;return j&&V&&pe})].sort((N,j)=>{switch(jt){case"orderNumberDesc":{const V=Es(N.orderNumber),ae=Es(j.orderNumber);return V!==null&&ae!==null&&ae!==V?ae-V:(j.createdAtDate?.getTime()||0)-(N.createdAtDate?.getTime()||0)}case"orderNumberAsc":{const V=Es(N.orderNumber),ae=Es(j.orderNumber);return V!==null&&ae!==null&&V!==ae?V-ae:(N.createdAtDate?.getTime()||0)-(j.createdAtDate?.getTime()||0)}case"createdAsc":return(N.createdAtDate?.getTime()||0)-(j.createdAtDate?.getTime()||0);case"sendDateAsc":return(N.sendDate||"").localeCompare(j.sendDate||"");case"sendDateDesc":return(j.sendDate||"").localeCompare(N.sendDate||"");case"totalDesc":return(j.totalCost??0)-(N.totalCost??0);case"totalAsc":return(N.totalCost??0)-(j.totalCost??0);case"status":return N.orderStatus.localeCompare(j.orderStatus);case"createdDesc":default:return(j.createdAtDate?.getTime()||0)-(N.createdAtDate?.getTime()||0)}})},[xi,ps,jt,_n,qn]);R.useEffect(()=>{g(m=>{const x={...m},T=new Set;return[...s,...n].forEach(N=>{T.add(N.id),x[N.id]===void 0&&(x[N.id]=N.trackingLink??"")}),Object.keys(x).forEach(N=>{T.has(N)||delete x[N]}),x})},[s,n]),R.useEffect(()=>{if(!de){rr(null);return}rr({...de,notes:de.notes??"",internalNote:de.internalNote??"",eggs:(de.eggs??[]).map(m=>({...m,quantity:Number(m.quantity??0)})),deliveryOptionId:de.deliveryOptionId??"",deliveryOption:de.deliveryOption??"",sendDate:de.sendDate??""}),pi(m=>({...m,[de.id]:de.internalNote??""}))},[de]),R.useEffect(()=>{if(!de)return;const m=s.find(x=>x.id===de.id);m&&m!==de&&Rn(m)},[s,de]);const Sd=async m=>{m.preventDefault(),q(""),S(!0);try{await C2(lf,W.trim(),Y)}catch(x){console.error(x),q("Login failed. Please check your credentials.")}finally{S(!1)}},Ei=async(m,x)=>{const T=Gu(Mu,"deleteCategoryWithItems");try{const j=(await T({categoryId:m.id})).data??{};return{deletedItems:typeof j.deletedItems=="number"?j.deletedItems:x.length,usedCallable:!0}}catch(N){console.warn("deleteCategoryWithItems callable failed, falling back",{catId:m.id,err:N});try{const j=G_(Ae);return x.forEach(V=>j.delete(Ot(Ae,"stockItems",V.id))),j.delete(Ot(Ae,"stockCategories",m.id)),await j.commit(),{deletedItems:x.length,usedCallable:!1}}catch(j){throw console.error("deleteCategoryAndRelatedItems fallback failed",j),j}}},Qa=async()=>{if(o&&Pt.length!==0){mi(!0);try{for(const m of Pt){const x=gt.filter(T=>T.categoryId===m.id||T.category===m.name);await Ei(m,x)}}catch(m){console.error("deleteAllCategories error",m)}finally{mi(!1)}}},Kc=async()=>{await j2(lf),Rn(null),wt(null)},Ti=(m,x,T)=>{const N=j=>j.map(V=>V.id===x?{...V,...T}:V);m==="eggOrders"?e(j=>N(j)):i(j=>N(j)),Rn(j=>j&&j.id===x?{...j,...T}:j),rr(j=>j&&j.id===x?{...j,...T}:j)},cr=async(m,x,T)=>{oe(""),O(""),ke(x);let N=!1;try{await Is(Ot(Ae,m,x),T),O("Saved changes."),N=!0}catch(j){console.error(j),j instanceof Wt?j.code==="permission-denied"?oe("Permission denied by Firestore rules. Ensure updates to orderStatus/fulfilledEggs/trackingLink are allowed."):oe(`Save failed: ${j.message}`):oe("Unable to save updates. Check Firestore rules and try again."),N=!1}finally{ke(null)}return N},Ad=(m,x,T,N)=>{Ti(m,x,{orderStatus:T});const j=h[x],V={orderStatus:T};(T==="packed"||T==="shipped")&&(V.trackingLink=j?.trim()??""),N&&(V.sendDate=N),cr(m,x,V)},Cd=async()=>{if(!de||!je)return;const m=sa(de);oe(""),O(""),P(de.id);const x=ct?.sendDate??de.sendDate??void 0,T={forceDispatchEmail:Oi(),orderStatus:"scheduled_dispatch"};x&&(T.sendDate=x);try{Ti(m,de.id,T),await Is(Ot(Ae,m,de.id),T),O("Dispatch email requested.")}catch(N){console.error("dispatch email error",N),oe("Unable to trigger dispatch email. Try again.")}finally{P(null)}},Rd=()=>(ct?.sendDate??de?.sendDate)?.trim()??"",dm=(m,x)=>{const T=x==="scheduled_dispatch",N=Rd();if(T&&!N){oe("Select a dispatch date before marking ready for dispatch.");return}oe(""),Ad(m,de.id,x,N||void 0)},hm=(m,x,T)=>{const N=new Set(x.fulfilledEggs??[]);N.has(T)?N.delete(T):N.add(T),cr(m,x.id,{fulfilledEggs:Array.from(N)})},Id=(m,x)=>{rr(T=>T&&{...T,[m]:x})},jd=(m,x,T)=>{rr(N=>{if(!N)return N;const j=[...N.eggs??[]],V=j[m]??{id:`temp-${m}`,label:"",quantity:0};return j[m]={...V,[x]:Number(T)},{...N,eggs:j}})},Dd=(m,x)=>{const N=((ct?.formType??de?.formType)==="livestock"?_s:lt).find(j=>j.id===x);rr(j=>{if(!j)return j;const V=[...j.eggs??[]],ae=V[m]??{id:x,label:N?.label??"",quantity:0};return V[m]={...ae,id:x,label:N?.label??ae.label,price:N?.price,specialPrice:N?.specialPrice??null},{...j,eggs:V}})},Yc=()=>{rr(m=>{if(!m)return m;const x=[...m.eggs??[]],N=((m.formType??de?.formType)==="livestock"?_s:lt)[0],j=N?.id??(typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`temp-${Date.now()}`);return x.push({id:j,label:N?.label??"",quantity:0,price:N?.price,specialPrice:N?.specialPrice??null}),{...m,eggs:x}})},kr=m=>{const x=m??de??null;if(!x)return{eggsTotal:0,deliveryCost:0,total:0};const N=(x.eggs??[]).reduce((ae,pe)=>{const Ee=pe.specialPrice??void 0,Ke=Ee==null||Ee===0?pe.price??0:Ee;return ae+Ke*(pe.quantity??0)},0),j=vi(x),V=typeof x.deliveryCost=="number"&&!Number.isNaN(x.deliveryCost)?Number(x.deliveryCost):j.find(ae=>ae.id===x.deliveryOptionId)?.cost??F_(x.deliveryOption)??0;return{eggsTotal:N,deliveryCost:V,total:N+V}},zl=m=>{rr(x=>{if(!x)return x;const T=[...x.eggs??[]];return T.splice(m,1),{...x,eggs:T}})},Or=async()=>{if(!ct)return;const m=(ct.eggs??[]).map(N=>{const j=lt.find(V=>V.id===N.id);return{id:N.id,label:j?.label??N.label??"",quantity:Number(N.quantity??0),price:j?.price??N.price,specialPrice:j?.specialPrice===void 0?N.specialPrice??null:j.specialPrice}}).filter(N=>N.label&&N.quantity>0);let x=ct.deliveryOption?Number($n.find(N=>N.id===ct.deliveryOptionId)?.cost??$n.find(N=>N.label===ct.deliveryOption)?.cost??0):0;Number.isNaN(x)&&(x=0);const T=ct.formType==="livestock"?"livestockOrders":"eggOrders";await cr(T,ct.id,{eggs:m,notes:(ct.notes??"").trim(),deliveryOption:ct.deliveryOption||void 0,deliveryOptionId:ct.deliveryOptionId||void 0,deliveryCost:x,sendDate:ct.sendDate||void 0})},Ka=()=>Mt({type:"expense",amount:"",description:"",date:wl(),file:null}),Ya=(m,x)=>{Mt(T=>({...T,[m]:x}))},ql=m=>{Mt(x=>({...x,file:m}))},Fl=async()=>{if(!o)return;Xe(""),U("");const m=Number(Fe.amount);if(Number.isNaN(m)||m<=0){Xe("Enter a valid amount greater than zero.");return}ge(!0);try{const x={type:Fe.type,amount:m,createdAt:Oi()},T=Fe.description.trim();if(T&&(x.description=T),Fe.date&&(x.date=Fe.date),Fe.file){const j=`financeEntries/${Fe.date||wl()}/${Date.now()}-${Fe.file.name}`,V=qh(Fh,j);await Bh(V,Fe.file);const ae=await zh(V);x.attachmentUrl=ae,x.attachmentName=Fe.file.name}await Fr(yt(Ae,"financeEntries"),x),U("Entry recorded."),Le(!1),Ka()}catch(x){console.error("finance submit error",x),Xe("Unable to save entry. Try again.")}finally{ge(!1)}},Xc=async m=>{const{total:x}=kr(m),T=m.sendDate??wl(),N=m.orderNumber?`Paid order ${m.orderNumber}`:`Paid order ${m.id}`,j={type:"income",amount:x,description:N,date:T,createdAt:Oi()};return(await Fr(yt(Ae,"financeEntries"),j)).id},Ni=async m=>{m&&await _l(Ot(Ae,"financeEntries",m))},Wc=(m,x)=>{const T=h[x]?.trim()??"";cr(m,x,{trackingLink:T})},Hl=async(m,x,T)=>{const N=H_.find(ae=>ae.key===x);if(!N)return;const j=Ed(m.id,x),V=sa(m);k(ae=>({...ae,[j]:!0})),oe(""),O("");try{const ae=`orderAttachments/${V}/${m.id}/${x}-${Date.now()}-${T.name}`,pe=qh(Fh,ae);await Bh(pe,T);const Ee=await zh(pe),Ke={[N.urlField]:Ee,[N.nameField]:T.name};await cr(V,m.id,Ke)?(Ti(V,m.id,Ke),O(`${N.label} attached.`)):oe(`Unable to save ${N.label.toLowerCase()}. Please try again.`)}catch(ae){console.error(`${N.label} upload error`,ae),oe(`Unable to upload ${N.label.toLowerCase()}. ${ae instanceof Error?ae.message:"Please try again."}`)}finally{k(ae=>({...ae,[j]:!1}))}},Xa=async m=>{if(!m?.id)return;const x=m.formType==="livestock"?"livestockOrders":"eggOrders",T=Ua[m.id]??"";La(""),na(""),el(!0);try{await Is(Ot(Ae,x,m.id),{internalNote:T.trim()}),na("Internal note saved (no email sent).")}catch(N){console.error("Internal note save error",N),La("Unable to save internal note.")}finally{el(!1)}},al=async(m,x)=>{const T=!x.paid;Ti(m,x.id,{paid:T});let N=null;try{if(T){x.incomeEntryId||(N=await Xc(x));const j=x.incomeEntryId??N;await cr(m,x.id,{paid:!0,incomeEntryId:j}),Ti(m,x.id,{incomeEntryId:j})}else await Ni(x.incomeEntryId),await cr(m,x.id,{paid:!1,incomeEntryId:null}),Ti(m,x.id,{incomeEntryId:null})}catch(j){if(console.error("handlePaidToggle error",j),oe("Unable to update payment status. Try again."),Ti(m,x.id,{paid:x.paid}),N)try{await Ni(N)}catch(V){console.error("cleanup income entry failed",V)}}},ur=async(m,x)=>{oe(""),O(""),ke(x);try{await _l(Ot(Ae,m,x)),O("Order deleted."),de?.id===x&&Rn(null)}catch(T){console.error(T);const N=T instanceof Wt?`${T.code}: ${T.message}`:"Unknown error";oe(`Unable to delete order. ${N}`)}finally{ke(null)}},Jc=m=>`${window.location.origin}/${m==="eggs"?"eggs":"livestock"}`,Ts=async m=>{if(!yi)return;const x=Jc(m);if(yi.action==="copy"){oe(""),O("");try{await navigator.clipboard.writeText(x),O(`${m==="eggs"?"Egg":"Livestock"} form link copied.`)}catch(T){console.error(T),oe("Unable to copy link. Copy manually: "+x)}}else if(yi.action==="whatsapp"){const T=encodeURIComponent(`Here is the ${m==="eggs"?"egg order":"livestock"} form: ${x}`);window.open(`https://wa.me/?text=${T}`,"_blank","noopener,noreferrer")}ra(null)},Zc=m=>{oe(""),O(""),ra({action:m})},$l=async()=>{if(!Lt)return;wt(null);const m=Lt.formType==="livestock"?"livestockOrders":"eggOrders";await ur(m,Lt.id),En(null)};R.useEffect(()=>{if(!o){On([]);return}const m=Jn(yt(Ae,"users"),gr("email","asc")),x=Zn(m,T=>{const N=T.docs.map(j=>{const V=j.data();return{id:j.id,email:V.email??"",role:V.role??"worker",status:V.status??"active"}});On(N),console.log("[UsersTab] users snapshot",{count:N.length,ids:N.map(j=>j.id)})});return()=>x()},[o]),R.useEffect(()=>{if(!o){ea([]);return}const m=Jn(yt(Ae,"deliveryOptions"),gr("order","asc")),x=Zn(m,T=>{const N=T.docs.map(j=>{const V=j.data();return{id:j.id,label:V.label??"Delivery",cost:Number(V.cost??0),order:V.order??0}});ea(N)},T=>{console.error("delivery options snapshot error",T),ea(Hh)});return()=>x()},[o]),R.useEffect(()=>{if(!o){J([]);return}const m=Jn(yt(Ae,"livestockDeliveryOptions"),gr("order","asc")),x=Zn(m,T=>{const N=T.docs.map(j=>{const V=j.data();return{id:j.id,label:V.label??"Delivery",cost:Number(V.cost??0),order:V.order??0}});J(N)},T=>{console.error("livestock delivery options snapshot error",T),J([])});return()=>x()},[o]),R.useEffect(()=>{if(!o){fi([]);return}const m=Jn(yt(Ae,"stockCategories"),gr("name","asc")),x=Zn(m,T=>{const N=T.docs.map(j=>{const V=j.data();return{id:j.id,name:V.name??"",subCategories:Array.isArray(V.subCategories)?V.subCategories:[]}});fi(N),N.length>0&&$e.categoryId&&!N.find(j=>j.id===$e.categoryId)&&Dt(j=>({...j,categoryId:N[0].id})),N.length>0&&!tn.categoryId&&ts(j=>({...j,categoryId:j.categoryId||N[0].id}))},T=>{console.error("stockCategories snapshot error",T),fi([])});return()=>x()},[o,$e.categoryId,tn.categoryId]);const Ks=(m,x)=>{Xo(T=>({...T,[m]:x}))},Ql=(m,x)=>{Jo(T=>({...T,[m]:x}))},kd=async()=>{if(kt(""),Bs(""),Pe!=="admin"){kt("Only admins can manage users.");return}if(!Tr.email.trim()){kt("Email is required.");return}try{const T=(await Gu(Mu,"createAuthUser")({email:Tr.email.trim(),role:Tr.role,password:Tr.password.trim()||void 0})).data,N=T?.temporaryPassword??"";Bs(N?`User created (${T?.uid}). Temp password: ${N}`:`User ready (${T?.uid??"existing"}).`),Xo({email:"",role:"worker",password:""})}catch(m){console.error(m);const x=m instanceof Wt?m.message:"Unable to create or update user.";kt(x)}},eu=async(m,x)=>{if(kt(""),Pe!=="admin"&&Pe!=="super_admin"){kt("Only admins can change roles.");return}if(x==="super_admin"&&Pe!=="super_admin"){kt("Only super admins can grant super admin.");return}if(m===o?.uid){kt("You cannot change your own role here.");return}try{await Is(Ot(Ae,"users",m),{role:x})}catch(T){console.error(T),kt("Unable to update role.")}},Od=async(m,x)=>{if(kt(""),Bs(""),Pe!=="admin"){kt("Only admins can manage accounts.");return}if(m.id===o?.uid){kt("You cannot disable your own account.");return}try{await Gu(Mu,"updateAuthUserStatus")({uid:m.id,disabled:x}),Bs(`User ${x?"disabled":"enabled"}.`)}catch(T){console.error(T);const N=T instanceof Wt?T.message:"Unable to update account status.";kt(N)}},Gr=async m=>{if(kt(""),Bs(""),Pe!=="admin"){kt("Only admins can manage accounts.");return}if(m.id===o?.uid){kt("You cannot delete your own account.");return}if(window.confirm(`Delete account for ${m.email}? This removes their login and user record.`))try{await Gu(Mu,"deleteAuthUser")({uid:m.id}),Bs("User deleted.")}catch(T){console.error(T);const N=T instanceof Wt?T.message:"Unable to delete account.";kt(N)}},Wa=async()=>{if(en(""),Sr(""),!je){en("Only admins can manage delivery methods.");return}if(!bs.label.trim()){en("Label is required.");return}const m=Number(bs.cost);if(Number.isNaN(m)){en("Cost must be a number.");return}const x=ir.reduce((T,N)=>Math.max(T,N.order??0),0)+1;try{await Fr(yt(Ae,"deliveryOptions"),{label:bs.label.trim(),cost:m,order:x}),Jo({label:"",cost:""}),Sr("Delivery option added.")}catch(T){console.error(T),en("Unable to add delivery option.")}},Ja=async()=>{if(je&&vs.name.trim())try{await Fr(yt(Ae,"stockCategories"),{name:vs.name.trim()}),Ar({name:""})}catch(m){console.error(m)}},ol=async()=>{if(je&&tn.categoryId&&tn.name.trim())try{await Is(Ot(Ae,"stockCategories",tn.categoryId),{subCategories:tk(tn.name.trim())}),ts({categoryId:"",name:""})}catch(m){console.error("addSubCategory error",m),alert("Unable to add subcategory. Check permissions/network.")}},ll=async(m,x)=>{ss(`${m}:${x}`);try{await Is(Ot(Ae,"stockCategories",m),{subCategories:nk(x)})}catch(T){console.error("deleteSubCategory error",T),alert("Unable to delete subcategory.")}finally{ss(null)}},Mr=async m=>{if(!o)return;const x=gt.filter(T=>T.categoryId===m.id||T.category===m.name);ns(m.id);try{await Ei(m,x)}catch(T){console.error("deleteStockCategory error",T);const N=T instanceof Wt?`${T.code}: ${T.message}`:String(T);alert(N)}finally{ns(null)}},Pr=m=>{if(!o)return;const x=gt.filter(T=>T.categoryId===m.id||T.category===m.name).length;Qn({type:"single",category:m,relatedCount:x})},Si=async()=>{if(zt)try{zt.type==="single"?await Mr(zt.category):await Qa()}finally{Qn(null)}},as=async m=>{if(We(""),!je){We("Only admins can delete items.");return}if(window.confirm(`Delete item "${m.name}"?`))try{await _l(Ot(Ae,"stockItems",m.id))}catch(T){console.error(T),We("Unable to delete item.")}},Ns=async()=>{if(b(""),C(""),!je){b("Only admins can manage livestock types.");return}if(!bi.name.trim()){b("Category name is required.");return}try{await Fr(yt(Ae,"livestockCategories"),{name:bi.name.trim(),description:bi.description.trim()||""}),ws({name:"",description:""}),C("Category added.")}catch(m){console.error("addLivestockCategory error",m),b("Unable to add category.")}},Ys=async m=>{if(b(""),!je){b("Only admins can manage livestock types.");return}const x=_s.filter(N=>N.categoryId===m.id);if(window.confirm(`Delete category "${m.name}" and ${x.length} related item(s)?`))try{const N=G_(Ae);x.forEach(j=>N.delete(Ot(Ae,"livestockTypes",j.id))),N.delete(Ot(Ae,"livestockCategories",m.id)),await N.commit(),C("Category deleted.")}catch(N){console.error("deleteLivestockCategory error",N),b("Unable to delete category.")}},Gd=async()=>{if(b(""),C(""),!je){b("Only admins can manage livestock types.");return}if(!dt.label.trim()){b("Label is required.");return}if(!dt.categoryId){b("Select a category.");return}const m=Number(dt.price),x=dt.specialPrice.trim()===""?null:Number(dt.specialPrice);if(Number.isNaN(m)){b("Price must be a number.");return}if(dt.specialPrice.trim()!==""&&Number.isNaN(x)){b("Special price must be a number.");return}const T=_s.reduce((j,V)=>Math.max(j,V.order??0),0)+1,N=Kn.find(j=>j.id===dt.categoryId)?.name??"";try{await Fr(yt(Ae,"livestockTypes"),{label:dt.label.trim(),price:m,specialPrice:x,categoryId:dt.categoryId,categoryName:N,order:T}),Hs({label:"",price:"",specialPrice:"",categoryId:""}),C("Livestock type added.")}catch(j){console.error("addLivestockType error",j),b("Unable to add livestock type.")}},cl=async(m,x)=>{b(""),jr(m.id);try{await Is(Ot(Ae,"livestockTypes",m.id),x),C("Saved.")}catch(T){console.error("updateLivestockType error",T),b("Unable to save.")}finally{jr(null)}},ul=async(m,x)=>{b("");try{await Is(Ot(Ae,"livestockCategories",m),x),C("Category updated.")}catch(T){console.error("updateLivestockCategory error",T),b("Unable to update category.")}},Md=async m=>{if(b(""),!je){b("Only admins can manage livestock types.");return}if(window.confirm(`Delete "${m.label}"?`)){jr(m.id);try{await _l(Ot(Ae,"livestockTypes",m.id)),C("Deleted.")}catch(T){console.error("deleteLivestockType error",T),b("Unable to delete.")}finally{jr(null)}}},Sn=async(m,x)=>{We(""),gs(""),li(m.id);try{const T=`stockVoice/${m.id}/${Date.now()}-${x.name}`,N=qh(Fh,T);await Bh(N,x);const j=await zh(N);await hr(m,{voiceNoteUrl:j}),gs("Voice note uploaded.")}catch(T){console.error("Voice upload error",T),We("Unable to upload voice note. Check permissions/network.")}finally{li(null)}},Rt=async m=>{We(""),gs(""),Xi(!0);try{const x=`stockLogsVoice/${Date.now()}-${m.name}`,T=qh(Fh,x);await Bh(T,m);const N=await zh(T);Oa(N),gs("Voice note attached.")}catch(x){console.error("uploadStockUpdateVoice error",x),We("Unable to upload voice note. Check permissions/network.")}finally{Xi(!1)}},Je=async()=>{if(We(""),gs(""),!navigator.mediaDevices?.getUserMedia){We("Recording not supported in this browser.");return}try{const m=await navigator.mediaDevices.getUserMedia({audio:!0}),x=new MediaRecorder(m);ui.current=[],x.ondataavailable=T=>{T.data.size>0&&ui.current.push(T.data)},x.onstop=async()=>{const T=new Blob(ui.current,{type:"audio/webm"}),N=new File([T],`stock-update-${Date.now()}.webm`,{type:"audio/webm"});await Rt(N),m.getTracks().forEach(j=>j.stop()),Zi.current=null,Ga.current=null,kn(!1)},Zi.current=x,Ga.current=m,kn(!0),x.start()}catch(m){console.error("startStockUpdateVoiceRecording error",m),We("Unable to start recording. Check mic permissions."),kn(!1)}},Ai=()=>{try{Zi.current?.stop(),Ga.current?.getTracks().forEach(m=>m.stop())}catch(m){console.error("stopStockUpdateVoiceRecording error",m)}finally{kn(!1)}},Vr=()=>{Oa("")},Kl=async m=>{We(""),li(m.id);try{await hr(m,{voiceNoteUrl:""})}catch(x){console.error("Voice delete error",x),We("Unable to remove voice note.")}finally{li(null)}},Xs=async m=>{if(We(""),gs(""),!navigator.mediaDevices?.getUserMedia){We("Recording not supported in this browser.");return}try{const x=await navigator.mediaDevices.getUserMedia({audio:!0}),T=new MediaRecorder(x);Ji.current=[],T.ondataavailable=N=>{N.data.size>0&&Ji.current.push(N.data)},T.onstop=async()=>{const N=new Blob(Ji.current,{type:"audio/webm"}),j=new File([N],`recording-${Date.now()}.webm`,{type:"audio/webm"});await Sn(m,j),x.getTracks().forEach(V=>V.stop()),Er.current=null,Wi.current=null,wr(null)},Er.current=T,Wi.current=x,wr(m.id),T.start()}catch(x){console.error("startVoiceRecording error",x),We("Unable to start recording. Check mic permissions.")}},tu=()=>{try{Er.current?.stop(),Wi.current?.getTracks().forEach(m=>m.stop())}catch(m){console.error("stopVoiceRecording error",m)}finally{wr(null)}},Pd=async()=>{if(We(""),gs(""),!(Pe==="admin"||Pe==="worker"||Pe==="super_admin")){We("Only admins or workers can submit updates.");return}Zr(!0);try{const m=new Map(gt.map(T=>[T.id,T])),x=[];for(const[T,N]of Object.entries(xr)){const j=m.get(T);if(!j)continue;const V=Number(N.quantity),ae=N.notes??"";V===j.quantity&&(ae??"")===(j.notes??"")||(await hr(j,{quantity:V,notes:ae},void 0,{skipLog:!0}),x.push({id:j.id,name:j.name,fromQty:j.quantity,toQty:V,notes:ae,category:j.category,subCategory:j.subCategory??""}))}x.length>0&&(await Fr(yt(Ae,"stockUpdateLogs"),{createdAt:Oi(),user:o?.email??"unknown",changes:x,voiceNoteUrl:Yi||""}),await Fr(yt(Ae,"stockLogs"),{createdAt:Oi(),userEmail:o?.email??"unknown",voiceNoteUrl:Yi||"",summary:`Batch update (${x.length} item${x.length===1?"":"s"})`,changes:x.map(T=>({itemId:T.id,name:T.name,change:T.toQty-T.fromQty,fromQty:T.fromQty,toQty:T.toQty,notes:T.notes,category:T.category,subCategory:T.subCategory}))})),gs("Stock updates submitted."),Oa("")}catch(m){console.error("submitStockUpdates error",m),We("Unable to submit stock updates. Check permissions/network.")}finally{Zr(!1)}},Ss=async(m,x)=>{if(en(""),Sr(""),!je){en("Only admins can manage delivery methods.");return}qs(m.id);try{await Is(Ot(Ae,"deliveryOptions",m.id),x),Sr("Delivery option updated.")}catch(T){console.error(T),en("Unable to update delivery option.")}finally{qs(null)}},Ci=async m=>{if(en(""),Sr(""),!je){en("Only admins can manage delivery methods.");return}if(window.confirm(`Delete delivery option "${m.label}"?`))try{await _l(Ot(Ae,"deliveryOptions",m.id)),Sr("Delivery option deleted.")}catch(T){console.error(T),en("Unable to delete delivery option.")}},nu=async()=>{if(en(""),Sr(""),!je){en("Only admins can manage delivery methods.");return}if(ir.length>0){en("Delivery options already exist.");return}try{const m=Hh.map(x=>Fr(yt(Ae,"deliveryOptions"),x));await Promise.all(m),Sr("Default delivery options added.")}catch(m){console.error(m),en("Unable to seed delivery options.")}},dl=async()=>{if(He(""),Nn(""),!je){He("Only admins can manage delivery methods.");return}if(!me.label.trim()){He("Label is required.");return}const m=Number(me.cost);if(Number.isNaN(m)){He("Cost must be a number.");return}const x=$.reduce((T,N)=>Math.max(T,N.order??0),0)+1;try{await Fr(yt(Ae,"livestockDeliveryOptions"),{label:me.label.trim(),cost:m,order:x}),Ve({label:"",cost:""}),Nn("Livestock delivery option added.")}catch(T){console.error(T),He("Unable to add delivery option.")}},Za=async(m,x)=>{if(He(""),Nn(""),!je){He("Only admins can manage delivery methods.");return}Dr(m.id);try{await Is(Ot(Ae,"livestockDeliveryOptions",m.id),x),Nn("Livestock delivery option updated.")}catch(T){console.error(T),He("Unable to update delivery option.")}finally{Dr(null)}},Ri=async m=>{if(He(""),Nn(""),!je){He("Only admins can manage delivery methods.");return}if(window.confirm(`Delete delivery option "${m.label}"?`))try{await _l(Ot(Ae,"livestockDeliveryOptions",m.id)),Nn("Livestock delivery option deleted.")}catch(T){console.error(T),He("Unable to delete delivery option.")}},dr=(m,x)=>{Dt(T=>({...T,[m]:x}))},Ii=m=>{Ar({name:m})},Ws=async()=>{if(We(""),!o){We("Sign in required.");return}if(!$e.categoryId){We("Select a category.");return}if(!$e.subCategory.trim()){We("Select a subcategory. Add one if none exist.");return}if((Pn[$e.categoryId]??[]).length===0){We("Add a subcategory to this category before adding stock.");return}if(!$e.name.trim()){We("Name is required.");return}const x=Number($e.quantity||0),T=Number($e.threshold||0);try{await Fr(yt(Ae,"stockItems"),{name:$e.name.trim(),category:Pt.find(N=>N.id===$e.categoryId)?.name??"",categoryId:$e.categoryId,categoryName:Pt.find(N=>N.id===$e.categoryId)?.name??"",subCategory:$e.subCategory.trim()||"",quantity:x,threshold:T,notes:$e.notes.trim(),updatedAt:Oi(),updatedBy:o?.email??""}),Dt({name:"",categoryId:"",subCategory:"",quantity:"",threshold:"5",notes:""})}catch(N){console.error(N);const j=N instanceof Wt?`${N.code}: ${N.message}`:"Unable to add stock item.";We(j)}},hr=async(m,x,T,N)=>{if(We(""),!o){We("Sign in required.");return}if(Pe==="worker"){const Ke=["quantity","notes"];if(!Object.keys(x).every(fr=>Ke.includes(fr))){We("Workers can only update quantity and notes.");return}}else if(Pe!=="admin"&&Pe!=="super_admin"){We("Only admins or workers can update stock.");return}const j={...x,updatedAt:Oi(),updatedBy:o?.email??""},V=m.quantity,ae=x.quantity!==void 0?Number(x.quantity):m.quantity,pe=(x.notes??m.notes??"")!==(m.notes??""),Ee=V!==ae||pe||!!x.voiceNoteUrl;try{await Is(Ot(Ae,"stockItems",m.id),j),Ee&&!N?.skipLog&&await Fr(yt(Ae,"stockLogs"),{itemId:m.id,name:m.name,change:ae-V,fromQty:V,toQty:ae,notes:x.notes??m.notes??"",userEmail:o?.email??"",voiceNoteUrl:T??x.voiceNoteUrl??"",createdAt:Oi()})}catch(Ke){console.error(Ke),We("Unable to update stock item.")}},hl=(m,x)=>{Ko(T=>({...T,[m]:x}))},eo=async()=>{if(Kt(""),In(""),!Fn.label.trim()){Kt("Label is required.");return}const m=Number(Fn.price);if(Number.isNaN(m)){Kt("Price must be a number.");return}const x=Fn.specialPrice?Number(Fn.specialPrice):null;if(Fn.specialPrice&&Number.isNaN(x)){Kt("Special price must be a number.");return}const T=lt.length>0?Math.max(...lt.map(N=>N.order??0))+1:1;try{await Fr(yt(Ae,"eggTypes"),{label:Fn.label.trim(),price:m,specialPrice:x,order:T,createdAt:Oi()}),In("Egg type added."),Ko({label:"",price:"",specialPrice:""})}catch(N){console.error(N);const j=N instanceof Wt?`${N.code}: ${N.message}`:"Unknown error";Kt(`Unable to add egg type. ${j}`)}},Js=(m,x,T)=>{Gs(N=>({...N,[m]:{...N[m],[x]:T}}))},ji=async m=>{Kt(""),In("");const x=br[m];if(!x||!x.label.trim()){Kt("Label is required.");return}const T=Number(x.price);if(Number.isNaN(T)){Kt("Price must be a number.");return}const N=x.specialPrice!==""?Number(x.specialPrice):null;if(x.specialPrice!==""&&Number.isNaN(N)){Kt("Special price must be a number.");return}const j=lt.find(V=>V.id===m)?.order??0;$i(m);try{await Is(Ot(Ae,"eggTypes",m),{label:x.label.trim(),price:T,specialPrice:N,order:j}),In("Egg type saved.")}catch(V){console.error(V);const ae=V instanceof Wt?`${V.code}: ${V.message}`:"Unknown error";Kt(`Unable to save egg type. ${ae}`)}finally{$i(null)}},fn=async m=>{Kt(""),In(""),$i(m);try{await _l(Ot(Ae,"eggTypes",m)),In("Egg type deleted.")}catch(x){console.error(x);const T=x instanceof Wt?`${x.code}: ${x.message}`:"Unknown error";Kt(`Unable to delete egg type. ${T}`)}finally{$i(null)}};return y?u.jsx("div",{className:"mx-auto max-w-4xl",children:u.jsx("div",{className:`${El} p-6 text-center text-brandGreen`,children:"Checking access..."})}):o?u.jsxs("div",{className:"mx-auto max-w-8xl space-y-6",children:[u.jsx("div",{className:`${El} p-6 md:p-8`,children:u.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Admin dashboard"}),u.jsx("h1",{className:"text-2xl font-bold text-brandGreen",children:"Live Egg Orders"}),u.jsx("p",{className:"text-brandGreen/70",children:"Real-time feed and sorted by most recent."})]}),u.jsxs("div",{className:"flex flex-col gap-2 text-sm text-brandGreen md:items-end",children:[u.jsxs("div",{className:"rounded-full bg-white/70 px-4 py-2 shadow-inner",children:["Total orders:"," ",u.jsx("span",{className:"font-semibold",children:s.length})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-brandGreen/70",children:["Signed in as ",o.email]}),u.jsx("button",{onClick:Kc,className:"rounded-full bg-brandGreen px-3 py-1 text-xs font-semibold text-white shadow-sm transition hover:shadow-md",type:"button",children:"Sign out"})]})]})]})}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[Pe!=="worker"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"relative",children:[u.jsx("button",{type:"button",onClick:()=>Mn(m=>m==="orders"?null:"orders"),className:`rounded-full px-4 py-2 text-sm font-semibold shadow-sm transition ${vt==="orders"||vt==="livestock_orders"?"bg-brandGreen text-white":"bg-white text-brandGreen border border-brandGreen/30"}`,children:"Orders "}),or==="orders"&&u.jsxs("div",{className:"absolute z-20 mt-2 w-48 rounded-xl border border-brandGreen/15 bg-white shadow-lg",children:[u.jsx("button",{type:"button",onClick:()=>{wn("orders"),Mn(null)},className:"block w-full px-4 py-2 text-left text-sm text-brandGreen hover:bg-brandBeige/60",children:"Egg orders"}),u.jsx("button",{type:"button",onClick:()=>{wn("livestock_orders"),Mn(null)},className:"block w-full px-4 py-2 text-left text-sm text-brandGreen hover:bg-brandBeige/60",children:"Livestock orders"})]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{type:"button",onClick:()=>Mn(m=>m==="types"?null:"types"),className:`rounded-full px-4 py-2 text-sm font-semibold shadow-sm transition ${vt==="eggs"||vt==="livestock_types"?"bg-brandGreen text-white":"bg-white text-brandGreen border border-brandGreen/30"}`,children:"Order types "}),or==="types"&&u.jsxs("div",{className:"absolute z-20 mt-2 w-48 rounded-xl border border-brandGreen/15 bg-white shadow-lg",children:[u.jsx("button",{type:"button",onClick:()=>{wn("eggs"),Mn(null)},className:"block w-full px-4 py-2 text-left text-sm text-brandGreen hover:bg-brandBeige/60",children:"Egg types"}),u.jsx("button",{type:"button",onClick:()=>{wn("livestock_types"),Mn(null)},className:"block w-full px-4 py-2 text-left text-sm text-brandGreen hover:bg-brandBeige/60",children:"Livestock types"})]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{type:"button",onClick:()=>Mn(m=>m==="delivery"?null:"delivery"),className:`rounded-full px-4 py-2 text-sm font-semibold shadow-sm transition ${vt==="delivery"||vt==="livestock_delivery"?"bg-brandGreen text-white":"bg-white text-brandGreen border border-brandGreen/30"}`,children:"Delivery methods "}),or==="delivery"&&u.jsxs("div",{className:"absolute z-20 mt-2 w-56 rounded-xl border border-brandGreen/15 bg-white shadow-lg",children:[u.jsx("button",{type:"button",onClick:()=>{wn("delivery"),Mn(null)},className:"block w-full px-4 py-2 text-left text-sm text-brandGreen hover:bg-brandBeige/60",children:"Egg delivery methods"}),u.jsx("button",{type:"button",onClick:()=>{wn("livestock_delivery"),Mn(null)},className:"block w-full px-4 py-2 text-left text-sm text-brandGreen hover:bg-brandBeige/60",children:"Livestock delivery methods"})]})]}),u.jsx("button",{type:"button",onClick:()=>wn("inventory"),className:`rounded-full px-4 py-2 text-sm font-semibold shadow-sm transition ${vt==="inventory"?"bg-brandGreen text-white":"bg-white text-brandGreen border border-brandGreen/30"}`,children:"Inventory"}),u.jsx("button",{type:"button",onClick:()=>wn("stock_logs"),className:`rounded-full px-4 py-2 text-sm font-semibold shadow-sm transition ${vt==="stock_logs"?"bg-brandGreen text-white":"bg-white text-brandGreen border border-brandGreen/30"}`,children:"Stock logs"}),u.jsx("button",{type:"button",onClick:()=>wn("users"),className:`rounded-full px-4 py-2 text-sm font-semibold shadow-sm transition ${vt==="users"?"bg-brandGreen text-white":"bg-white text-brandGreen border border-brandGreen/30"}`,children:"Users"}),u.jsx("button",{type:"button",onClick:()=>wn("finance"),className:`rounded-full px-4 py-2 text-sm font-semibold shadow-sm transition ${vt==="finance"?"bg-brandGreen text-white":"bg-white text-brandGreen border border-brandGreen/30"}`,children:"Finance"}),u.jsx("button",{type:"button",onClick:()=>wn("reports"),className:`rounded-full px-4 py-2 text-sm font-semibold shadow-sm transition ${vt==="reports"?"bg-brandGreen text-white":"bg-white text-brandGreen border border-brandGreen/30"}`,children:"Reports"})]}),u.jsx("button",{type:"button",onClick:()=>wn("stock_updates"),className:`rounded-full px-4 py-2 text-sm font-semibold shadow-sm transition ${vt==="stock_updates"?"bg-brandGreen text-white":"bg-white text-brandGreen border border-brandGreen/30"}`,children:"Stock updates"})]}),vt==="orders"&&u.jsxs("div",{className:"flex flex-wrap gap-2 rounded-2xl border border-brandGreen/10 bg-white/70 p-4 shadow-inner",children:[u.jsx("button",{type:"button",onClick:()=>Zc("copy"),className:"rounded-full bg-brandGreen px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:shadow-md",children:"Copy form link"}),u.jsx("button",{type:"button",onClick:()=>Zc("whatsapp"),className:"rounded-full border border-brandGreen/30 px-4 py-2 text-sm font-semibold text-brandGreen shadow-sm transition hover:bg-brandBeige",children:"Share form on WhatsApp"})]}),vt==="livestock_types"&&u.jsxs("div",{className:"space-y-3 rounded-2xl border border-brandGreen/10 bg-white/70 p-4 shadow-inner",children:[u.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Livestock types"}),u.jsx("h2",{className:"text-xl font-bold text-brandGreen",children:"Categories & items"}),u.jsx("p",{className:"text-brandGreen/70",children:"Add categories (e.g., Adult Chickens, Ducklings) and items under them. These feed the Livestock order form."})]}),u.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[w&&u.jsx("span",{className:"rounded-full bg-emerald-100 px-3 py-1 text-xs font-semibold text-emerald-800",children:w}),d&&u.jsx("span",{className:"rounded-full bg-red-100 px-3 py-1 text-xs font-semibold text-red-700",children:d})]})]}),je?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid gap-3 md:grid-cols-[2fr_3fr]",children:[u.jsxs("div",{className:"space-y-3 rounded-xl border border-brandGreen/15 bg-brandBeige/60 p-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-brandGreen",children:"Add category"}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx("input",{type:"text",value:bi.name,onChange:m=>ws(x=>({...x,name:m.target.value})),placeholder:"e.g. Adult Chickens",className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("textarea",{value:bi.description,onChange:m=>ws(x=>({...x,description:m.target.value})),placeholder:"Description (optional)",className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{type:"button",onClick:Ns,className:"rounded-full bg-brandGreen px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:shadow-md",children:"Add"})})]}),u.jsxs("div",{className:"space-y-2",children:[Kn.map(m=>u.jsxs("div",{className:"space-y-2 rounded-lg border border-brandGreen/15 bg-white px-3 py-2",children:[u.jsx("input",{type:"text",value:m.name,onChange:x=>ul(m.id,{name:x.target.value}),className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("textarea",{value:m.description??"",onChange:x=>ul(m.id,{description:x.target.value}),placeholder:"Description (optional)",className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("button",{type:"button",onClick:()=>ul(m.id,{name:m.name,description:m.description??""}),className:"rounded-full bg-brandGreen px-3 py-1 text-xs font-semibold text-white shadow-sm transition hover:shadow-md",children:"Save"}),u.jsx("button",{type:"button",onClick:()=>Ys(m),className:"rounded-full border border-red-300 px-3 py-1 text-xs font-semibold text-red-700 transition hover:bg-red-50",children:"Delete"})]})]},m.id)),Kn.length===0&&u.jsx("p",{className:"text-sm text-brandGreen/70",children:"No categories yet."})]})]}),u.jsxs("div",{className:"space-y-3 rounded-xl border border-brandGreen/15 bg-brandBeige/60 p-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-brandGreen",children:"Add livestock item"}),u.jsxs("div",{className:"grid gap-2 md:grid-cols-2",children:[u.jsx("input",{type:"text",value:dt.label,onChange:m=>Hs(x=>({...x,label:m.target.value})),placeholder:"e.g. BA",className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsxs("select",{value:dt.categoryId,onChange:m=>Hs(x=>({...x,categoryId:m.target.value})),className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30",children:[u.jsx("option",{value:"",children:"Select category"}),Kn.map(m=>u.jsx("option",{value:m.id,children:m.name},m.id))]}),u.jsx("input",{type:"number",value:dt.price,onChange:m=>Hs(x=>({...x,price:m.target.value})),placeholder:"Price",className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("input",{type:"number",value:dt.specialPrice,onChange:m=>Hs(x=>({...x,specialPrice:m.target.value})),placeholder:"Special price (optional)",className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"})]}),u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{type:"button",onClick:Gd,className:"rounded-full bg-brandGreen px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:shadow-md",children:"Add item"})})]})]}),u.jsxs("div",{className:"space-y-3 rounded-xl border border-brandGreen/15 bg-white p-4 shadow-inner",children:[u.jsx("h3",{className:"text-sm font-semibold text-brandGreen",children:"Existing items"}),_s.length===0&&u.jsx("p",{className:"text-sm text-brandGreen/70",children:"No livestock items yet."}),u.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:Kn.map(m=>{const x=_s.filter(T=>T.categoryId===m.id);return u.jsxs("div",{className:"space-y-2 rounded-lg border border-brandGreen/15 bg-brandBeige/50 p-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("p",{className:"font-semibold text-brandGreen",children:m.name}),u.jsxs("span",{className:"text-xs text-brandGreen/60",children:[x.length," item",x.length===1?"":"s"]})]}),x.length===0&&u.jsx("p",{className:"text-sm text-brandGreen/70",children:"No items in this category."}),x.map(T=>u.jsx("div",{className:"rounded-lg border border-brandGreen/15 bg-white px-3 py-2 shadow-sm",children:u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("input",{type:"text",value:T.label,onChange:N=>cl(T,{label:N.target.value}),className:"rounded-lg border border-brandGreen/30 bg-brandCream px-2 py-1 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsxs("span",{className:"text-[11px] text-brandGreen/60",children:["Category: ",m.name]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"number",value:T.price,onChange:N=>cl(T,{price:Number(N.target.value)}),className:"w-20 rounded-lg border border-brandGreen/30 bg-brandCream px-2 py-1 text-right text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("input",{type:"number",value:T.specialPrice??"",onChange:N=>cl(T,{specialPrice:N.target.value===""?null:Number(N.target.value)}),placeholder:"Special",className:"w-20 rounded-lg border border-brandGreen/30 bg-brandCream px-2 py-1 text-right text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("button",{type:"button",onClick:()=>Md(T),disabled:Pl===T.id,className:"rounded-full border border-red-300 px-3 py-1 text-xs font-semibold text-red-700 transition hover:bg-red-50 disabled:opacity-60",children:"Delete"})]})]})},T.id))]},m.id)})})]})]}):u.jsx("div",{className:`${El} p-4 text-brandGreen/70`,children:"Admin access required to manage livestock types."})]}),vt==="orders"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex flex-col gap-3 rounded-2xl border border-brandGreen/10 bg-white/70 p-4 shadow-inner md:flex-row md:items-end md:justify-between",children:[u.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70",children:"Status"}),u.jsxs("select",{value:_n,onChange:m=>Ia(m.target.value),className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30 md:w-40",children:[u.jsx("option",{value:"all",children:"All"}),Hu.map(m=>u.jsx("option",{value:m.id,children:m.label},m.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70",children:"Paid"}),u.jsxs("select",{value:qn,onChange:m=>ja(m.target.value),className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30 md:w-36",children:[u.jsx("option",{value:"all",children:"All"}),u.jsx("option",{value:"paid",children:"Paid"}),u.jsx("option",{value:"unpaid",children:"Unpaid"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70",children:"Sort"}),u.jsxs("select",{value:jt,onChange:m=>Os(m.target.value),className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30 md:w-44",children:[u.jsx("option",{value:"orderNumberDesc",children:"Order # (latest first)"}),u.jsx("option",{value:"orderNumberAsc",children:"Order # (oldest first)"}),u.jsx("option",{value:"createdDesc",children:"Created newest"}),u.jsx("option",{value:"createdAsc",children:"Oldest first"}),u.jsx("option",{value:"sendDateAsc",children:"Send date "}),u.jsx("option",{value:"sendDateDesc",children:"Send date "}),u.jsx("option",{value:"status",children:"Status"}),u.jsx("option",{value:"totalDesc",children:"Total cost "}),u.jsx("option",{value:"totalAsc",children:"Total cost "})]})]})]}),u.jsxs("div",{className:"flex flex-col gap-2 md:w-72",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70",children:"Search (name, email, phone, delivery, eggs)"}),u.jsx("input",{type:"text",value:ps,onChange:m=>$t(m.target.value),placeholder:"e.g. Runner, courier, 082...",className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"})]})]}),fe&&u.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:fe}),Me&&u.jsx("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-800",children:Me}),u.jsxs("div",{className:`${El} p-0`,children:[u.jsxs("div",{className:"md:hidden space-y-3 p-4",children:[wi.length===0&&u.jsx("div",{className:"rounded-xl border border-brandGreen/10 bg-white/70 px-4 py-4 text-sm text-brandGreen/70 shadow-inner",children:"No orders match your filters."}),wi.map(m=>{const x=$o===m.id;return u.jsxs("div",{className:"space-y-3 rounded-2xl border border-brandGreen/10 bg-white/70 p-4 shadow-inner",onClick:()=>{Rn(m),wt(null)},children:[u.jsxs("div",{className:"flex items-start justify-between gap-3",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-xs text-brandGreen/70",children:m.createdAtDate?m.createdAtDate.toLocaleDateString():""}),u.jsx("p",{className:"text-xs font-mono text-brandGreen",children:m.orderNumber||""}),u.jsxs("p",{className:"font-semibold text-brandGreen",children:[m.name," ",m.surname]}),u.jsxs("p",{className:"text-xs text-brandGreen/70",children:[m.email,"  ",m.cellphone]})]}),u.jsxs("div",{className:"flex flex-col items-end gap-2",children:[u.jsx("span",{className:`inline-flex rounded-full px-3 py-1 text-xs font-semibold capitalize ${$h[m.orderStatus]}`,children:m.orderStatus}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{type:"button",onClick:T=>{T.stopPropagation(),wt(N=>N===m.id?null:m.id)},className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-brandGreen text-white shadow-sm transition hover:shadow-md",children:""}),x&&u.jsxs("div",{className:"absolute right-0 z-10 mt-2 w-44 rounded-xl border border-brandGreen/15 bg-white shadow-lg",children:[u.jsx("button",{type:"button",onClick:T=>{T.stopPropagation(),Rn(m),wt(null)},className:"block w-full px-4 py-2 text-left text-sm text-brandGreen hover:bg-brandBeige/60",children:"View details"}),u.jsx("button",{type:"button",onClick:T=>{T.stopPropagation(),al("eggOrders",m),wt(null)},className:"block w-full px-4 py-2 text-left text-sm text-brandGreen hover:bg-brandBeige/60",disabled:_e===m.id,children:m.paid?"Mark unpaid":"Mark paid"}),u.jsx("button",{type:"button",onClick:T=>{T.stopPropagation(),En(m),wt(null)},className:"block w-full px-4 py-2 text-left text-sm text-red-700 hover:bg-red-50",disabled:_e===m.id,children:"Delete"})]})]})]})]}),u.jsxs("div",{className:"space-y-1 text-sm text-brandGreen",children:[u.jsxs("p",{className:"font-semibold",children:["Delivery: ",m.deliveryOption??""]}),u.jsxs("p",{children:["Send date: ",m.sendDate??""]}),u.jsxs("p",{className:"font-semibold",children:["Total:"," ",m.totalCost?`R${m.totalCost.toFixed(2)}`:""]}),u.jsxs("p",{children:["Eggs: ",m.eggSummary]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Paid:"})," ",m.paid?"Yes":"No"]})]})]},m.id)})]}),u.jsx("div",{className:"hidden md:block",children:u.jsx("div",{className:"overflow-x-auto rounded-2xl border border-brandGreen/10",children:u.jsxs("table",{className:"w-full min-w-[1500px] text-left text-sm text-brandGreen",children:[u.jsx("thead",{className:"bg-brandGreen text-white",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 font-semibold",children:"Date"}),u.jsx("th",{className:"px-4 py-3 font-semibold",children:"Order #"}),u.jsx("th",{className:"px-4 py-3 font-semibold",children:"Name"}),u.jsx("th",{className:"px-4 py-3 font-semibold",children:"Email"}),u.jsx("th",{className:"px-4 py-3 font-semibold",children:"Cellphone"}),u.jsx("th",{className:"px-4 py-3 font-semibold",children:"Delivery"}),u.jsx("th",{className:"px-4 py-3 font-semibold",children:"Status"}),u.jsx("th",{className:"px-4 py-3 font-semibold",children:"Send date"}),u.jsx("th",{className:"px-4 py-3 font-semibold",children:"Total"}),u.jsx("th",{className:"px-4 py-3 font-semibold",children:"Paid"}),u.jsx("th",{className:"px-4 py-3 font-semibold text-right",children:"Actions"})]})}),u.jsxs("tbody",{children:[wi.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:11,className:"px-4 py-6 text-center text-brandGreen/70",children:"No orders match your filters."})}),wi.map((m,x)=>{const T=x%2===0?"bg-white":"bg-brandBeige/60";return u.jsxs("tr",{className:`${T} transition cursor-pointer`,onClick:()=>{Rn(m),wt(null)},children:[u.jsx("td",{className:"px-4 py-3 align-top",children:m.createdAtDate?m.createdAtDate.toLocaleDateString():""}),u.jsx("td",{className:"px-4 py-3 align-top font-mono",children:m.orderNumber||""}),u.jsx("td",{className:"px-4 py-3 align-top",children:u.jsxs("div",{className:"font-semibold",children:[m.name," ",m.surname]})}),u.jsx("td",{className:"px-4 py-3 align-top",children:u.jsx("a",{href:`mailto:${m.email}`,onClick:N=>N.stopPropagation(),className:"text-brandGreen underline decoration-brandGreen/50 decoration-1 underline-offset-2",children:m.email})}),u.jsx("td",{className:"px-4 py-3 align-top",children:u.jsx("a",{href:`tel:${m.cellphone}`,onClick:N=>N.stopPropagation(),className:"text-brandGreen",children:m.cellphone})}),u.jsx("td",{className:"px-4 py-3 align-top",children:m.deliveryOption??""}),u.jsx("td",{className:"px-4 py-3 align-top",children:u.jsx("span",{className:`inline-flex rounded-full px-3 py-1 text-xs font-semibold capitalize ${$h[m.orderStatus]}`,children:m.orderStatus})}),u.jsx("td",{className:"px-4 py-3 align-top",children:m.sendDate??""}),u.jsx("td",{className:"px-4 py-3 align-top font-semibold",children:m.totalCost?`R${m.totalCost.toFixed(2)}`:""}),u.jsx("td",{className:"px-4 py-3 align-top",children:u.jsx("span",{className:`inline-flex rounded-full px-3 py-1 text-xs font-semibold ${m.paid?"bg-emerald-100 text-emerald-800 border border-emerald-200":"bg-amber-100 text-amber-800 border border-amber-200"}`,children:m.paid?"Paid":"Unpaid"})}),u.jsxs("td",{className:"relative px-4 py-3 align-top text-right",children:[u.jsxs("div",{className:"flex items-center justify-end gap-2",children:[m.internalNote&&m.internalNote.trim().length>0&&u.jsx("button",{type:"button",title:`Internal note: ${m.internalNote}`,onClick:N=>{N.stopPropagation(),alert(`Internal note:

${m.internalNote}`)},className:"flex h-8 w-8 items-center justify-center rounded-full border border-brandGreen/30 bg-white text-brandGreen shadow-sm transition hover:bg-brandBeige","aria-label":"View internal note",children:"i"}),u.jsx("button",{type:"button",onClick:N=>{N.stopPropagation(),wt(j=>j===m.id?null:m.id)},className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-brandGreen text-white shadow-sm transition hover:shadow-md",children:""})]}),$o===m.id&&u.jsxs("div",{className:"absolute right-4 z-10 mt-2 w-44 rounded-xl border border-brandGreen/15 bg-white shadow-lg",children:[u.jsx("button",{type:"button",onClick:N=>{N.stopPropagation(),Rn(m),wt(null)},className:"block w-full px-4 py-2 text-left text-sm text-brandGreen hover:bg-brandBeige/60",children:"View details"}),u.jsx("button",{type:"button",onClick:N=>{N.stopPropagation(),al("eggOrders",m),wt(null)},className:"block w-full px-4 py-2 text-left text-sm text-brandGreen hover:bg-brandBeige/60",disabled:_e===m.id,children:m.paid?"Mark unpaid":"Mark paid"}),u.jsx("button",{type:"button",onClick:N=>{N.stopPropagation(),En(m),wt(null)},className:"block w-full px-4 py-2 text-left text-sm text-red-700 hover:bg-red-50 disabled:opacity-70",disabled:_e===m.id,children:"Delete"})]})]})]},m.id)})]})]})})})]})]}),vt==="livestock_orders"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Admin dashboard"}),u.jsx("h1",{className:"text-2xl font-bold text-brandGreen",children:"Livestock Orders"}),u.jsx("p",{className:"text-brandGreen/70",children:"Real-time feed and sorted by most recent."})]}),u.jsxs("div",{className:"flex flex-col gap-2 text-sm text-brandGreen md:items-end",children:[u.jsxs("div",{className:"rounded-full bg-white/70 px-4 py-2 shadow-inner",children:["Total orders:"," ",u.jsx("span",{className:"font-semibold",children:n.length})]}),u.jsx("div",{className:"flex items-center gap-2",children:u.jsxs("span",{className:"text-brandGreen/70",children:["Signed in as ",o?.email]})})]})]}),u.jsxs("div",{className:"flex flex-col gap-3 rounded-2xl border border-brandGreen/10 bg-white/70 p-4 shadow-inner md:flex-row md:items-end md:justify-between",children:[u.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70",children:"Status"}),u.jsxs("select",{value:_n,onChange:m=>Ia(m.target.value),className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30 md:w-40",children:[u.jsx("option",{value:"all",children:"All"}),Hu.map(m=>u.jsx("option",{value:m.id,children:m.label},m.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70",children:"Paid"}),u.jsxs("select",{value:qn,onChange:m=>ja(m.target.value),className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30 md:w-36",children:[u.jsx("option",{value:"all",children:"All"}),u.jsx("option",{value:"paid",children:"Paid"}),u.jsx("option",{value:"unpaid",children:"Unpaid"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70",children:"Sort"}),u.jsxs("select",{value:jt,onChange:m=>Os(m.target.value),className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30 md:w-44",children:[u.jsx("option",{value:"createdDesc",children:"Newest first"}),u.jsx("option",{value:"createdAsc",children:"Oldest first"}),u.jsx("option",{value:"sendDateAsc",children:"Send date "}),u.jsx("option",{value:"sendDateDesc",children:"Send date "}),u.jsx("option",{value:"status",children:"Status"}),u.jsx("option",{value:"totalDesc",children:"Total cost "}),u.jsx("option",{value:"totalAsc",children:"Total cost "})]})]})]}),u.jsxs("div",{className:"flex flex-col gap-2 md:w-72",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70",children:"Search (name, email, phone, delivery, items)"}),u.jsx("input",{type:"text",value:ps,onChange:m=>$t(m.target.value),placeholder:"e.g. Runner, courier, 082...",className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"})]})]}),u.jsxs("div",{className:`${El} p-0`,children:[u.jsxs("div",{className:"md:hidden space-y-3 p-4",children:[$a.length===0&&u.jsx("div",{className:"rounded-xl border border-brandGreen/10 bg-white/70 px-4 py-4 text-sm text-brandGreen/70 shadow-inner",children:"No orders match your filters."}),$a.map(m=>u.jsxs("div",{className:"space-y-3 rounded-2xl border border-brandGreen/10 bg-white/70 p-4 shadow-inner",onClick:()=>{Rn(m),wt(null)},children:[u.jsxs("div",{className:"flex items-start justify-between gap-3",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-xs text-brandGreen/70",children:m.createdAtDate?m.createdAtDate.toLocaleDateString():""}),u.jsx("p",{className:"text-xs font-mono text-brandGreen",children:m.orderNumber||""}),u.jsxs("p",{className:"font-semibold text-brandGreen",children:[m.name," ",m.surname]}),u.jsxs("p",{className:"text-xs text-brandGreen/70",children:[m.email,"  ",m.cellphone]})]}),u.jsx("div",{className:"flex flex-col items-end gap-2",children:u.jsx("span",{className:`inline-flex rounded-full px-3 py-1 text-xs font-semibold capitalize ${$h[m.orderStatus]}`,children:m.orderStatus})})]}),u.jsxs("div",{className:"space-y-1 text-sm text-brandGreen",children:[u.jsxs("p",{className:"font-semibold",children:["Delivery: ",m.deliveryOption??""]}),u.jsxs("p",{children:["Send date: ",m.sendDate??""]}),u.jsxs("p",{className:"font-semibold",children:["Total:"," ",m.totalCost?`R${m.totalCost.toFixed(2)}`:""]}),u.jsxs("p",{children:["Items: ",m.eggSummary]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Paid:"})," ",m.paid?"Yes":"No"]})]})]},m.id))]}),u.jsx("div",{className:"hidden md:block",children:u.jsx("div",{className:"overflow-x-auto rounded-2xl border border-brandGreen/10",children:u.jsxs("table",{className:"w-full min-w-[1500px] text-left text-sm text-brandGreen",children:[u.jsx("thead",{className:"bg-brandGreen text-white",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 font-semibold",children:"Date"}),u.jsx("th",{className:"px-4 py-3 font-semibold",children:"Order #"}),u.jsx("th",{className:"px-4 py-3 font-semibold",children:"Name"}),u.jsx("th",{className:"px-4 py-3 font-semibold",children:"Email"}),u.jsx("th",{className:"px-4 py-3 font-semibold",children:"Cellphone"}),u.jsx("th",{className:"px-4 py-3 font-semibold",children:"Delivery"}),u.jsx("th",{className:"px-4 py-3 font-semibold",children:"Status"}),u.jsx("th",{className:"px-4 py-3 font-semibold",children:"Send date"}),u.jsx("th",{className:"px-4 py-3 font-semibold",children:"Total"}),u.jsx("th",{className:"px-4 py-3 font-semibold",children:"Paid"}),u.jsx("th",{className:"px-4 py-3 font-semibold text-right",children:"Actions"})]})}),u.jsxs("tbody",{children:[$a.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:10,className:"px-4 py-6 text-center text-brandGreen/70",children:"No orders match your filters."})}),$a.map((m,x)=>{const T=x%2===0?"bg-white":"bg-brandBeige/60";return u.jsxs("tr",{className:`${T} transition cursor-pointer`,onClick:()=>{Rn(m),wt(null)},children:[u.jsx("td",{className:"px-4 py-3 align-top",children:m.createdAtDate?m.createdAtDate.toLocaleDateString():""}),u.jsx("td",{className:"px-4 py-3 align-top font-mono",children:m.orderNumber||""}),u.jsx("td",{className:"px-4 py-3 align-top",children:u.jsxs("div",{className:"font-semibold",children:[m.name," ",m.surname]})}),u.jsx("td",{className:"px-4 py-3 align-top",children:u.jsx("a",{href:`mailto:${m.email}`,onClick:N=>N.stopPropagation(),className:"text-brandGreen underline decoration-brandGreen/50 decoration-1 underline-offset-2",children:m.email})}),u.jsx("td",{className:"px-4 py-3 align-top",children:u.jsx("a",{href:`tel:${m.cellphone}`,onClick:N=>N.stopPropagation(),className:"text-brandGreen",children:m.cellphone})}),u.jsx("td",{className:"px-4 py-3 align-top",children:m.deliveryOption??""}),u.jsx("td",{className:"px-4 py-3 align-top",children:u.jsx("span",{className:`inline-flex rounded-full px-3 py-1 text-xs font-semibold capitalize ${$h[m.orderStatus]}`,children:m.orderStatus})}),u.jsx("td",{className:"px-4 py-3 align-top",children:m.sendDate??""}),u.jsx("td",{className:"px-4 py-3 align-top font-semibold",children:m.totalCost?`R${m.totalCost.toFixed(2)}`:""}),u.jsx("td",{className:"px-4 py-3 align-top",children:u.jsx("span",{className:`inline-flex rounded-full px-3 py-1 text-xs font-semibold ${m.paid?"bg-emerald-100 text-emerald-800 border border-emerald-200":"bg-amber-100 text-amber-800 border border-amber-200"}`,children:m.paid?"Paid":"Unpaid"})}),u.jsx("td",{className:"px-4 py-3 align-top text-right",children:u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:N=>{N.stopPropagation(),Rn(m),wt(null)},className:"rounded-full bg-brandGreen px-3 py-1 text-xs font-semibold text-white shadow-sm transition hover:shadow-md",children:"View"}),u.jsx("button",{type:"button",onClick:N=>{N.stopPropagation(),al("livestockOrders",m)},className:"rounded-full border border-brandGreen/30 px-3 py-1 text-xs font-semibold text-brandGreen transition hover:bg-brandBeige",children:m.paid?"Mark unpaid":"Mark paid"})]})})]},m.id)})]})]})})})]})]}),vt==="eggs"&&u.jsxs("div",{className:"space-y-3 rounded-2xl border border-brandGreen/10 bg-white/70 p-4 shadow-inner",children:[u.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Egg types"}),u.jsx("h2",{className:"text-xl font-bold text-brandGreen",children:"Manage breeds & prices"}),u.jsx("p",{className:"text-brandGreen/70",children:"Add new breeds or update pricing/specials; these feed the public form."})]}),Jr&&u.jsx("span",{className:"rounded-full bg-emerald-100 px-3 py-1 text-xs font-semibold text-emerald-800",children:Jr})]}),Qt&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:Qt}),u.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70",children:"Label"}),u.jsx("input",{type:"text",value:Fn.label,onChange:m=>hl("label",m.target.value),placeholder:"e.g. New Breed",className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70",children:"Price"}),u.jsx("input",{type:"number",value:Fn.price,onChange:m=>hl("price",m.target.value),placeholder:"e.g. 35",className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70",children:"Special price (optional)"}),u.jsx("input",{type:"number",value:Fn.specialPrice,onChange:m=>hl("specialPrice",m.target.value),placeholder:"e.g. 31.5",className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70",children:"(Order auto)"}),u.jsx("p",{className:"text-xs text-brandGreen/60",children:"Ordering is automatic based on add time."})]})]}),u.jsx("div",{className:"flex flex-wrap gap-2 justify-end",children:u.jsx("button",{type:"button",onClick:eo,className:"rounded-full bg-brandGreen px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:shadow-md",children:"Add egg type"})}),u.jsx("div",{className:"hidden overflow-x-auto md:block",children:u.jsxs("table",{className:"w-full min-w-[720px] text-left text-sm text-brandGreen",children:[u.jsx("thead",{className:"bg-brandGreen text-white",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-3 py-2 font-semibold",children:"Label"}),u.jsx("th",{className:"px-3 py-2 font-semibold",children:"Price"}),u.jsx("th",{className:"px-3 py-2 font-semibold",children:"Special"}),u.jsx("th",{className:"px-3 py-2 font-semibold text-right",children:"Actions"})]})}),u.jsxs("tbody",{children:[lt.map(m=>{const x=br[m.id]??{label:m.label,price:m.price.toString(),specialPrice:m.specialPrice?.toString()??""};return u.jsxs("tr",{className:"border-b border-brandGreen/10",children:[u.jsx("td",{className:"px-3 py-2",children:u.jsx("input",{type:"text",value:x.label,onChange:T=>Js(m.id,"label",T.target.value),className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"})}),u.jsx("td",{className:"px-3 py-2",children:u.jsx("input",{type:"number",value:x.price,onChange:T=>Js(m.id,"price",T.target.value),className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"})}),u.jsx("td",{className:"px-3 py-2",children:u.jsx("input",{type:"number",value:x.specialPrice,onChange:T=>Js(m.id,"specialPrice",T.target.value),placeholder:"Special price",className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"})}),u.jsx("td",{className:"px-3 py-2 text-right",children:u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:()=>ji(m.id),disabled:ai===m.id,className:"rounded-full bg-brandGreen px-3 py-1 text-xs font-semibold text-white shadow-sm transition hover:shadow-md disabled:cursor-not-allowed disabled:opacity-70",children:ai===m.id?"Saving...":"Save"}),u.jsx("button",{type:"button",onClick:()=>fn(m.id),disabled:ai===m.id,className:"rounded-full border border-red-300 px-3 py-1 text-xs font-semibold text-red-700 transition hover:bg-red-50 disabled:cursor-not-allowed disabled:opacity-70",children:"Delete"})]})})]},m.id)}),lt.length===0&&u.jsx("tr",{children:u.jsx("td",{className:"px-3 py-4 text-center text-brandGreen/70",colSpan:4,children:"No egg types found. Add one above to populate the order form."})})]})]})}),u.jsxs("div",{className:"md:hidden grid gap-3",children:[lt.map(m=>{const x=br[m.id]??{label:m.label,price:m.price.toString(),specialPrice:m.specialPrice?.toString()??""};return u.jsxs("div",{className:"rounded-xl border border-brandGreen/15 bg-white px-4 py-3 shadow-sm",children:[u.jsx("p",{className:"font-semibold text-brandGreen",children:m.label}),u.jsxs("div",{className:"mt-2 grid gap-2 sm:grid-cols-2",children:[u.jsx("input",{type:"text",value:x.label,onChange:T=>Js(m.id,"label",T.target.value),className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("input",{type:"number",value:x.price,onChange:T=>Js(m.id,"price",T.target.value),className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("input",{type:"number",value:x.specialPrice,onChange:T=>Js(m.id,"specialPrice",T.target.value),placeholder:"Special price",className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"})]}),u.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[u.jsx("button",{type:"button",onClick:()=>ji(m.id),disabled:ai===m.id,className:"rounded-full bg-brandGreen px-3 py-1 text-xs font-semibold text-white shadow-sm transition hover:shadow-md disabled:cursor-not-allowed disabled:opacity-70",children:ai===m.id?"Saving...":"Save"}),u.jsx("button",{type:"button",onClick:()=>fn(m.id),disabled:ai===m.id,className:"rounded-full border border-red-300 px-3 py-1 text-xs font-semibold text-red-700 transition hover:bg-red-50 disabled:cursor-not-allowed disabled:opacity-70",children:"Delete"})]})]},m.id)}),lt.length===0&&u.jsx("div",{className:"rounded-xl border border-dashed border-brandGreen/30 bg-white/70 px-4 py-6 text-sm text-brandGreen/70",children:"No egg types found. Add one above to populate the order form."})]})]}),vt==="inventory"&&u.jsxs("div",{className:"space-y-3 rounded-2xl border border-brandGreen/10 bg-white/70 p-4 shadow-inner",children:[u.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Inventory"}),u.jsx("h2",{className:"text-xl font-bold text-brandGreen",children:"Stock items"}),u.jsx("p",{className:"text-brandGreen/70",children:"Track quantities, thresholds, and notes. Admins can add items; workers can update quantities and notes."})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70",children:"Categories"}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[Pt.map(m=>u.jsx("button",{type:"button",onClick:()=>Ir(m),className:"rounded-full bg-brandBeige px-3 py-1 text-xs font-semibold text-brandGreen underline decoration-brandGreen/40 decoration-1 underline-offset-2 hover:bg-brandBeige/70",children:m.name},m.id)),Pt.length===0&&u.jsx("span",{className:"text-xs text-brandGreen/60",children:"No categories yet."})]})]})]}),u.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[u.jsx("input",{type:"text",value:Yo,onChange:m=>Qi(m.target.value),placeholder:"Search inventory",className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("select",{value:Hn,onChange:m=>ka(m.target.value),className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30",children:_i.map(m=>u.jsx("option",{value:m.id,children:m.name},m.id))}),u.jsx("select",{value:Ms,onChange:m=>Ps(m.target.value),className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30",children:M3.map(m=>u.jsx("option",{value:m.value,children:m.label},m.value))})]}),Xt&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:Xt}),u.jsxs("div",{className:"space-y-2 rounded-xl border border-brandGreen/10 bg-white/70 p-3",children:[je&&u.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.jsx("button",{type:"button",onClick:()=>Cr(!0),className:"rounded-full bg-brandGreen px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:shadow-md",children:"Add category"}),u.jsx("button",{type:"button",onClick:()=>rs(!0),className:"rounded-full bg-brandGreen px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:shadow-md",children:"Add subcategory"})]}),Pt.length>0&&u.jsx("div",{className:"space-y-2",children:Pt.map(m=>{const x=gt.filter(N=>N.categoryId===m.id||N.category===m.name).length,T=ut===m.id;return u.jsxs("div",{role:"button",tabIndex:0,onClick:()=>Ir(m),onKeyDown:N=>{(N.key==="Enter"||N.key===" ")&&(N.preventDefault(),Ir(m))},className:"flex w-full items-center justify-between rounded-lg border border-brandGreen/15 bg-white px-3 py-2 shadow-sm text-left transition hover:border-brandGreen/30 hover:bg-brandBeige/50 focus:outline-none focus:ring-2 focus:ring-brandGreen/30",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"font-semibold text-brandGreen underline decoration-brandGreen/40 decoration-1 underline-offset-2",children:m.name}),u.jsxs("span",{className:"text-xs text-brandGreen/60",children:[x," item",x===1?"":"s"]})]}),u.jsx("button",{type:"button",onClick:N=>{N.stopPropagation(),Pr(m)},disabled:T,className:"rounded-full border border-red-300 px-3 py-1 text-xs font-semibold text-red-700 transition hover:bg-red-50",title:"Delete category",children:T?"Deleting...":"Delete"})]},m.id)})})]}),je&&u.jsxs("div",{className:"grid gap-3 md:grid-cols-6",children:[u.jsx("input",{type:"text",value:$e.name,onChange:m=>dr("name",m.target.value),placeholder:"Item name",className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsxs("select",{value:$e.categoryId,onChange:m=>dr("categoryId",m.target.value),className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30",children:[u.jsx("option",{value:"",children:"Select category"}),Pt.map(m=>u.jsx("option",{value:m.id,children:m.name},m.id))]}),u.jsxs("select",{value:$e.subCategory,onChange:m=>dr("subCategory",m.target.value),className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30",disabled:!$e.categoryId||(Pn[$e.categoryId]??[]).length===0,children:[u.jsx("option",{value:"",children:"Select subcategory"}),(Pn[$e.categoryId]??[]).map(m=>u.jsx("option",{value:m,children:m},m))]}),$e.categoryId&&(Pn[$e.categoryId]??[]).length===0&&u.jsx("p",{className:"text-xs text-red-700",children:"Add a subcategory to this category first."}),u.jsx("input",{type:"number",value:$e.quantity,onChange:m=>dr("quantity",m.target.value),placeholder:"Quantity",className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("input",{type:"number",value:$e.threshold,onChange:m=>dr("threshold",m.target.value),placeholder:"Threshold",className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("div",{className:"flex items-center",children:u.jsx("button",{type:"button",onClick:Ws,className:"w-full rounded-full bg-brandGreen px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:shadow-md",children:"Add stock"})})]}),u.jsx("div",{className:"hidden overflow-x-auto md:block",children:u.jsxs("table",{className:"w-full min-w-[900px] text-left text-sm text-brandGreen",children:[u.jsx("thead",{className:"bg-brandGreen text-white",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-3 py-2 font-semibold",children:"Name"}),u.jsx("th",{className:"px-3 py-2 font-semibold",children:"Category"}),u.jsx("th",{className:"px-3 py-2 font-semibold",children:"Subcategory"}),u.jsx("th",{className:"px-3 py-2 font-semibold",children:"Quantity"}),u.jsx("th",{className:"px-3 py-2 font-semibold",children:"Threshold"}),u.jsx("th",{className:"px-3 py-2 font-semibold",children:"Notes"}),u.jsx("th",{className:"px-3 py-2 font-semibold text-right",children:"Actions"})]})}),u.jsx("tbody",{children:il.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:7,className:"px-3 py-4 text-center text-brandGreen/70",children:"No stock items found."})}):Qc.map(m=>u.jsxs(R.Fragment,{children:[u.jsx("tr",{className:"bg-brandGreen/5 text-xs font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:u.jsxs("td",{colSpan:7,className:"px-3 py-2",children:[m.label,"  ",m.items.length," item",m.items.length===1?"":"s"]})}),m.items.map(x=>u.jsxs("tr",{className:"border-b border-brandGreen/10",children:[u.jsx("td",{className:"px-3 py-2",children:x.name}),u.jsx("td",{className:"px-3 py-2",children:x.category}),u.jsx("td",{className:"px-3 py-2",children:u.jsx("div",{className:"grid gap-1",children:u.jsxs("select",{value:x.subCategory??"",onChange:T=>hr(x,{subCategory:T.target.value}),disabled:!je,className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30",children:[u.jsx("option",{value:"",children:"Select subcategory"}),[...Pn[x.categoryId??""]??[],x.subCategory&&!(Pn[x.categoryId??""]??[]).includes(x.subCategory)?x.subCategory:null].filter(Boolean).map(T=>u.jsx("option",{value:T,children:T},T))]})})}),u.jsx("td",{className:"px-3 py-2",children:u.jsx("input",{type:"number",value:x.quantity,onChange:T=>hr(x,{quantity:Number(T.target.value)}),disabled:!(Pe==="admin"||Pe==="worker"||Pe==="super_admin"),className:"w-24 rounded-lg border border-brandGreen/30 bg-brandCream px-2 py-1 text-right text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"})}),u.jsx("td",{className:"px-3 py-2",children:u.jsx("input",{type:"number",value:x.threshold,onChange:T=>hr(x,{threshold:Number(T.target.value)}),disabled:!je,className:"w-20 rounded-lg border border-brandGreen/30 bg-brandCream px-2 py-1 text-right text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"})}),u.jsx("td",{className:"px-3 py-2",children:u.jsx("input",{type:"text",value:x.notes??"",onChange:T=>hr(x,{notes:T.target.value}),className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"})}),u.jsx("td",{className:"px-3 py-2 text-right",children:u.jsxs("div",{className:"flex items-center justify-end gap-2",children:[u.jsx("span",{className:"text-xs text-brandGreen/60",children:x.updatedBy??""}),u.jsxs("div",{className:"flex items-center gap-1",children:[x.voiceNoteUrl&&u.jsx("audio",{controls:!0,src:x.voiceNoteUrl,className:"h-8"}),u.jsx("button",{type:"button",onClick:()=>ci===x.id?tu():Xs(x),className:"rounded-full border border-brandGreen/30 px-3 py-1 text-xs font-semibold text-brandGreen transition hover:bg-brandBeige",children:ci===x.id?"Stop recording":"Record voice"}),x.voiceNoteUrl&&u.jsx("button",{type:"button",onClick:()=>Kl(x),disabled:Yt===x.id,className:"rounded-full border border-red-300 px-3 py-1 text-xs font-semibold text-red-700 transition hover:bg-red-50",children:"Remove audio"})]}),je&&u.jsx("button",{type:"button",onClick:()=>as(x),className:"rounded-full border border-red-300 px-3 py-1 text-xs font-semibold text-red-700 transition hover:bg-red-50",children:"Delete"})]})})]},x.id))]},`group-${m.id}`))})]})}),u.jsx("div",{className:"md:hidden space-y-4",children:Qc.length===0?u.jsx("div",{className:"rounded-xl border border-dashed border-brandGreen/30 bg-white/70 px-4 py-6 text-sm text-brandGreen/70",children:"No stock items found."}):Qc.map(m=>u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-sm font-semibold text-brandGreen",children:m.label}),u.jsxs("p",{className:"text-xs text-brandGreen/60",children:[m.items.length," item",m.items.length===1?"":"s"]})]}),u.jsx("div",{className:"space-y-3",children:m.items.map(x=>u.jsxs("div",{className:"rounded-xl border border-brandGreen/15 bg-white px-4 py-3 shadow-sm",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-brandGreen",children:x.name}),u.jsx("p",{className:"text-xs text-brandGreen/60",children:x.category})]}),u.jsx("span",{className:"text-xs text-brandGreen/60",children:x.updatedBy??""})]}),u.jsxs("div",{className:"mt-2 grid gap-2",children:[u.jsxs("select",{value:x.subCategory??"",onChange:T=>hr(x,{subCategory:T.target.value}),disabled:!je,className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30",children:[u.jsx("option",{value:"",children:"Select subcategory"}),[...Pn[x.categoryId??""]??[],x.subCategory&&!(Pn[x.categoryId??""]??[]).includes(x.subCategory)?x.subCategory:null].filter(Boolean).map(T=>u.jsx("option",{value:T,children:T},T))]}),u.jsx("input",{type:"number",value:x.quantity,onChange:T=>hr(x,{quantity:Number(T.target.value)}),disabled:!(Pe==="admin"||Pe==="worker"||Pe==="super_admin"),className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("input",{type:"number",value:x.threshold,onChange:T=>hr(x,{threshold:Number(T.target.value)}),disabled:Pe!=="admin",className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("input",{type:"text",value:x.notes??"",onChange:T=>hr(x,{notes:T.target.value}),className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[x.voiceNoteUrl&&u.jsx("audio",{controls:!0,src:x.voiceNoteUrl,className:"h-8"}),u.jsx("button",{type:"button",onClick:()=>ci===x.id?tu():Xs(x),className:"rounded-full border border-brandGreen/30 px-3 py-1 text-xs font-semibold text-brandGreen transition hover:bg-brandBeige",children:ci===x.id?"Stop recording":"Record voice"}),x.voiceNoteUrl&&u.jsx("button",{type:"button",onClick:()=>Kl(x),disabled:Yt===x.id,className:"rounded-full border border-red-300 px-3 py-1 text-xs font-semibold text-red-700 transition hover:bg-red-50",children:"Remove audio"})]}),je&&u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{type:"button",onClick:()=>as(x),className:"rounded-full border border-red-300 px-3 py-1 text-xs font-semibold text-red-700 transition hover:bg-red-50",children:"Delete item"})})]})]},x.id))})]},`mobile-${m.id}`))})]}),vt==="stock_logs"&&u.jsxs("div",{className:"space-y-3 rounded-2xl border border-brandGreen/10 bg-white/70 p-4 shadow-inner",children:[u.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Stock history"}),u.jsx("h2",{className:"text-xl font-bold text-brandGreen",children:"Stock logs"}),u.jsx("p",{className:"text-brandGreen/70",children:"Track who changed inventory, when it happened, and any notes. Search scans the loaded logs; load all to search further back."})]}),je&&u.jsxs("div",{className:"flex flex-col gap-2 md:items-end",children:[u.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.jsx("button",{type:"button",onClick:()=>mt(m=>!m),className:"rounded-full border border-brandGreen/30 px-4 py-2 text-xs font-semibold text-brandGreen transition hover:bg-brandBeige",children:di?"Show last 25":"Load all"}),u.jsxs("span",{className:"rounded-full bg-white/80 px-3 py-1 text-xs font-semibold text-brandGreen shadow-inner",children:[Vs.length," log",Vs.length===1?"":"s"," loaded"]})]}),u.jsx("p",{className:"text-xs text-brandGreen/60",children:di?"All available logs are loaded.":"Showing the newest 25 entries."})]})]}),je?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid gap-3 md:grid-cols-[2fr_1fr] md:items-end",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70",children:"Search by item, user, or notes"}),u.jsx("input",{type:"text",value:Us,onChange:m=>ys(m.target.value),placeholder:"e.g. feed, John, -5, note text",className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"})]}),u.jsxs("div",{className:"rounded-lg border border-brandGreen/10 bg-brandBeige/60 p-3 text-xs text-brandGreen/70",children:["Search only covers the loaded entries.",u.jsx("br",{}),'Use "Load all" to search the full history.']})]}),Qs.length===0&&u.jsx("div",{className:"rounded-xl border border-dashed border-brandGreen/30 bg-white/70 px-4 py-6 text-sm text-brandGreen/70",children:Vs.length===0?"No stock changes recorded yet.":"No log entries match your search. Clear the search or load more history."}),Qs.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"hidden overflow-x-auto md:block",children:u.jsxs("table",{className:"w-full min-w-[900px] text-left text-sm text-brandGreen",children:[u.jsx("thead",{className:"bg-brandGreen text-white",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-3 py-2 font-semibold",children:"When"}),u.jsx("th",{className:"px-3 py-2 font-semibold",children:"Item"}),u.jsx("th",{className:"px-3 py-2 font-semibold",children:"Change"}),u.jsx("th",{className:"px-3 py-2 font-semibold",children:"Qty"}),u.jsx("th",{className:"px-3 py-2 font-semibold",children:"User"}),u.jsx("th",{className:"px-3 py-2 font-semibold",children:"Notes"})]})}),u.jsx("tbody",{children:Qs.map((m,x)=>{const T=Number(m.change??0),N=T>0?"text-emerald-700":T<0?"text-red-700":"text-brandGreen",j=(m.changes?.length??0)>0||!!m.summary;return u.jsxs("tr",{className:x%2===0?"bg-white":"bg-brandBeige/60",children:[u.jsx("td",{className:"whitespace-nowrap px-3 py-2 align-top",children:Td(m.createdAt)}),u.jsxs("td",{className:"px-3 py-2 align-top",children:[u.jsx("div",{className:"font-semibold",children:j?`Batch update (${m.changes?.length??0} item${(m.changes?.length??0)===1?"":"s"})`:m.name}),!j&&u.jsxs("p",{className:"text-xs text-brandGreen/60",children:["ID: ",m.itemId||""]})]}),u.jsx("td",{className:"px-3 py-2 align-top",children:j?u.jsx("div",{className:"space-y-1",children:m.changes?.map(V=>{const ae=Number(V.change??0),pe=ae>0?"text-emerald-700":ae<0?"text-red-700":"text-brandGreen";return u.jsxs("div",{className:`flex items-center justify-between gap-2 text-sm font-semibold ${pe}`,children:[u.jsx("span",{className:"text-brandGreen",children:V.name}),u.jsxs("span",{children:[ae>0?"+":"",ae]})]},V.itemId)})}):u.jsxs("span",{className:`font-semibold ${N}`,children:[T>0?"+":"",T]})}),u.jsx("td",{className:"px-3 py-2 align-top",children:j?u.jsx("div",{className:"space-y-1 text-sm text-brandGreen",children:m.changes?.map(V=>u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsx("span",{className:"text-brandGreen/70",children:V.name}),u.jsxs("span",{className:"font-semibold",children:[V.fromQty,"  ",V.toQty]})]},V.itemId))}):`${m.fromQty}  ${m.toQty}`}),u.jsx("td",{className:"px-3 py-2 align-top",children:m.userEmail||"unknown"}),u.jsx("td",{className:"px-3 py-2 align-top",children:u.jsxs("div",{className:"space-y-1",children:[j?u.jsx("div",{className:"space-y-1 text-sm",children:m.changes?.map(V=>u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsx("span",{className:"font-semibold text-brandGreen",children:V.name}),u.jsxs("span",{className:"text-brandGreen/80",children:[V.change>0?"+":"",V.change," (",V.fromQty,"  ",V.toQty,")"]})]},V.itemId))}):u.jsx("p",{className:"m-0",children:m.notes&&m.notes.trim().length>0?m.notes:""}),m.voiceNoteUrl&&u.jsx("audio",{controls:!0,src:m.voiceNoteUrl,className:"h-9"})]})})]},m.id)})})]})}),u.jsx("div",{className:"md:hidden grid gap-3",children:Qs.map(m=>{const x=Number(m.change??0),T=x>0?"text-emerald-700":x<0?"text-red-700":"text-brandGreen",N=(m.changes?.length??0)>0||!!m.summary;return u.jsxs("div",{className:"space-y-1 rounded-xl border border-brandGreen/15 bg-white px-4 py-3 shadow-sm",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"font-semibold text-brandGreen",children:N?`Batch update (${m.changes?.length??0} item${(m.changes?.length??0)===1?"":"s"})`:m.name}),u.jsx("span",{className:"text-xs text-brandGreen/60",children:Td(m.createdAt)})]}),N?u.jsxs("div",{className:"space-y-1 text-sm",children:[m.changes?.map(j=>u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsx("span",{className:"font-semibold text-brandGreen",children:j.name}),u.jsxs("span",{className:j.change>0?"text-emerald-700":j.change<0?"text-red-700":"text-brandGreen",children:[j.change>0?"+":"",j.change," (",j.fromQty,"  ",j.toQty,")"]})]},j.itemId)),u.jsxs("p",{className:"text-xs text-brandGreen/70",children:["By ",m.userEmail||"unknown"]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("p",{className:`text-sm font-semibold ${T}`,children:["Change: ",x>0?"+":"",x," (from ",m.fromQty," to ",m.toQty,")"]}),u.jsxs("p",{className:"text-xs text-brandGreen/70",children:["By ",m.userEmail||"unknown"]}),m.notes&&m.notes.trim().length>0&&u.jsxs("p",{className:"text-xs text-brandGreen/70",children:["Notes: ",m.notes]})]}),m.voiceNoteUrl&&u.jsx("audio",{controls:!0,src:m.voiceNoteUrl,className:"mt-1 h-10"})]},m.id)})})]})]}):u.jsx("div",{className:`${El} p-4 text-sm text-brandGreen`,children:"Only admins can view the detailed stock log."})]}),vt==="stock_updates"&&u.jsxs("div",{className:"space-y-3 rounded-2xl border border-brandGreen/10 bg-white/70 p-4 shadow-inner",children:[u.jsx("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Daily updates"}),u.jsx("h2",{className:"text-xl font-bold text-brandGreen",children:"Inventory (admin-created categories)"}),u.jsx("p",{className:"text-brandGreen/70",children:"Workers can only update existing categories/items that admins created. If nothing shows, ask an admin to add inventory first."})]})}),Xt&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:Xt}),Ki&&u.jsx("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-800",children:Ki}),u.jsxs("div",{className:"space-y-2 rounded-2xl border border-brandGreen/10 bg-brandBeige/60 p-4",children:[u.jsxs("div",{className:"flex items-center justify-between gap-3",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold text-brandGreen",children:"General voice note"}),u.jsx("p",{className:"text-xs text-brandGreen/70",children:"Optional. Attached to every stock log created in this submission."})]}),_r&&u.jsx("span",{className:"rounded-full bg-red-100 px-3 py-1 text-xs font-semibold text-red-700",children:"Recording..."})]}),u.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[u.jsx("button",{type:"button",onClick:()=>_r?Ai():Je(),disabled:es,className:"rounded-full border border-brandGreen/30 px-4 py-2 text-sm font-semibold text-brandGreen shadow-sm transition hover:bg-brandBeige disabled:cursor-not-allowed disabled:opacity-60",children:_r?"Stop recording":"Record voice note"}),es&&u.jsx("span",{className:"text-xs text-brandGreen/70",children:"Uploading..."}),Yi&&u.jsxs(u.Fragment,{children:[u.jsx("audio",{controls:!0,src:Yi,className:"h-10"}),u.jsx("button",{type:"button",onClick:Vr,className:"rounded-full border border-red-300 px-3 py-1 text-xs font-semibold text-red-700 transition hover:bg-red-50",children:"Remove note"})]})]})]}),u.jsxs("div",{className:"space-y-3",children:[(()=>{const m=Fa.filter(T=>gt.some(N=>N.categoryId===T.id||N.category===T.name));if(m.length===0)return u.jsx("div",{className:"rounded-xl border border-dashed border-brandGreen/30 bg-white/70 px-4 py-6 text-sm text-brandGreen/70",children:"No inventory categories with items yet. Admins must create them before workers can submit updates."});const x=Zt==="all"?m:m.filter(T=>T.id===Zt);return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex flex-wrap gap-2 overflow-x-auto rounded-xl border border-brandGreen/15 bg-white/70 px-3 py-2",children:[u.jsx("button",{type:"button",onClick:()=>sr("all"),className:`rounded-full px-3 py-1 text-sm font-semibold transition ${Zt==="all"?"bg-brandGreen text-white shadow-sm":"bg-brandBeige/80 text-brandGreen shadow-inner"}`,children:"All categories"}),m.map(T=>u.jsx("button",{type:"button",onClick:()=>sr(T.id),className:`rounded-full px-3 py-1 text-sm font-semibold transition ${Zt===T.id?"bg-brandGreen text-white shadow-sm":"bg-brandBeige/80 text-brandGreen shadow-inner"}`,children:T.name},T.id))]}),x.map(T=>u.jsxs("div",{className:"space-y-2 rounded-xl border border-brandGreen/15 bg-brandBeige/60 p-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-lg font-semibold text-brandGreen",children:T.name}),u.jsx("span",{className:"text-xs uppercase tracking-wide text-brandGreen/60",children:"Admin-managed"})]}),(()=>{const N=new Map;gt.filter(V=>V.categoryId===T.id||V.category===T.name).forEach(V=>{const pe=(V.subCategory||"Uncategorized").trim()||"Uncategorized";N.has(pe)||N.set(pe,[]),N.get(pe)?.push(V)});const j=Array.from(N.entries());return u.jsx("div",{className:"space-y-3",children:j.map(([V,ae])=>u.jsxs("div",{className:"space-y-2 rounded-lg border border-brandGreen/15 bg-white px-3 py-3 shadow-sm",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("p",{className:"font-semibold text-brandGreen",children:V}),u.jsxs("span",{className:"text-xs text-brandGreen/60",children:[ae.length," item",ae.length===1?"":"s"]})]}),u.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:ae.map(pe=>u.jsxs("div",{className:"rounded-lg border border-brandGreen/10 bg-brandBeige/40 px-3 py-3 shadow-sm",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-brandGreen",children:pe.name}),u.jsxs("p",{className:"text-xs font-semibold text-brandGreen",children:["Current:"," ",u.jsx("span",{className:"inline-block rounded-full bg-brandGreen/10 px-2 py-1 text-brandGreen",children:pe.quantity})]})]}),u.jsx("span",{className:"text-[11px] text-brandGreen/60",children:pe.updatedBy??""})]}),(()=>{const Ee=xr[pe.id]??{quantity:pe.quantity,notes:pe.notes??""};return u.jsxs("div",{className:"mt-2 grid gap-2",children:[u.jsx("input",{type:"number",value:Ee.quantity,onChange:Ke=>Bt(mn=>({...mn,[pe.id]:{quantity:Number(Ke.target.value),notes:Ee.notes}})),disabled:!(Pe==="admin"||Pe==="worker"||Pe==="super_admin"),className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-right text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("textarea",{value:Ee.notes,onChange:Ke=>Bt(mn=>({...mn,[pe.id]:{quantity:Ee.quantity,notes:Ke.target.value}})),rows:2,className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30",placeholder:"Notes (optional)"})]})})()]},pe.id))})]},V))})})()]},T.id))]})})(),(Pe==="admin"||Pe==="worker"||Pe==="super_admin")&&u.jsx("div",{className:"flex flex-wrap justify-end gap-2",children:u.jsx("button",{type:"button",onClick:Pd,disabled:on,className:"rounded-full bg-brandGreen px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:shadow-md disabled:cursor-not-allowed disabled:opacity-60",children:on?"Submitting...":"Submit all updates"})})]})]}),vt==="delivery"&&u.jsxs("div",{className:"space-y-3 rounded-2xl border border-brandGreen/10 bg-white/70 p-4 shadow-inner",children:[u.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Egg Delivery methods"}),u.jsx("h2",{className:"text-xl font-bold text-brandGreen",children:"Manage options"}),u.jsx("p",{className:"text-brandGreen/70",children:"Add, edit, or remove delivery methods shown on the order form."})]}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[Nr&&u.jsx("span",{className:"rounded-full bg-emerald-100 px-3 py-1 text-xs font-semibold text-emerald-700",children:Nr}),zs&&u.jsx("span",{className:"rounded-full bg-red-100 px-3 py-1 text-xs font-semibold text-red-700",children:zs})]})]}),je&&u.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[u.jsx("input",{type:"text",value:bs.label,onChange:m=>Ql("label",m.target.value),placeholder:"Label e.g. Pudo, 34 days (R100)",className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("input",{type:"number",value:bs.cost,onChange:m=>Ql("cost",m.target.value),placeholder:"Cost e.g. 100",className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("div",{className:"flex items-center",children:u.jsx("button",{type:"button",onClick:Wa,className:"w-full rounded-full bg-brandGreen px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:shadow-md",children:"Add delivery"})})]}),je&&ir.length===0&&u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{type:"button",onClick:nu,className:"rounded-full border border-brandGreen/30 px-4 py-2 text-xs font-semibold text-brandGreen shadow-sm transition hover:bg-brandBeige",children:"Add default delivery options"})}),u.jsx("div",{className:"hidden overflow-x-auto md:block",children:u.jsxs("table",{className:"w-full min-w-[700px] text-left text-sm text-brandGreen",children:[u.jsx("thead",{className:"bg-brandGreen text-white",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-3 py-2 font-semibold",children:"Label"}),u.jsx("th",{className:"px-3 py-2 font-semibold",children:"Cost"}),u.jsx("th",{className:"px-3 py-2 font-semibold text-right",children:"Actions"})]})}),u.jsxs("tbody",{children:[ir.map(m=>u.jsxs("tr",{className:"border-b border-brandGreen/10",children:[u.jsx("td",{className:"px-3 py-2",children:u.jsx("input",{type:"text",value:m.label,onChange:x=>Ss(m,{label:x.target.value}),disabled:!je,className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"})}),u.jsx("td",{className:"px-3 py-2",children:u.jsx("input",{type:"number",value:m.cost,onChange:x=>Ss(m,{cost:Number(x.target.value)}),disabled:!je,className:"w-28 rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-right text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"})}),u.jsx("td",{className:"px-3 py-2 text-right text-xs text-brandGreen/60",children:je?u.jsx("div",{className:"flex items-center justify-end gap-2",children:u.jsx("button",{type:"button",onClick:()=>Ci(m),disabled:ar===m.id,className:"rounded-full border border-red-300 px-3 py-1 text-xs font-semibold text-red-700 transition hover:bg-red-50 disabled:cursor-not-allowed disabled:opacity-60",children:"Delete"})}):"View only"})]},m.id)),ir.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"px-3 py-4 text-center text-brandGreen/70",children:"No delivery options found."})})]})]})}),u.jsxs("div",{className:"md:hidden grid gap-3",children:[ir.map(m=>u.jsx("div",{className:"rounded-xl border border-brandGreen/15 bg-white px-4 py-3 shadow-sm",children:je?u.jsxs("div",{className:"space-y-2",children:[u.jsx("input",{type:"text",value:m.label,onChange:x=>Ss(m,{label:x.target.value}),className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"number",value:m.cost,onChange:x=>Ss(m,{cost:Number(x.target.value)}),className:"w-28 rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-right text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("input",{type:"number",value:m.order??0,onChange:x=>Ss(m,{order:Number(x.target.value)}),className:"w-20 rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-right text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("button",{type:"button",onClick:()=>Ci(m),disabled:ar===m.id,className:"rounded-full border border-red-300 px-3 py-1 text-xs font-semibold text-red-700 transition hover:bg-red-50 disabled:cursor-not-allowed disabled:opacity-60",children:"Delete"})]})]}):u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"font-semibold text-brandGreen",children:m.label}),u.jsxs("p",{className:"text-sm text-brandGreen/70",children:["Cost: R",Number(m.cost).toFixed(2)]})]})},m.id)),ir.length===0&&u.jsx("div",{className:"rounded-xl border border-dashed border-brandGreen/30 bg-white/70 px-4 py-6 text-sm text-brandGreen/70",children:"No delivery options found."})]})]}),vt==="livestock_delivery"&&u.jsxs("div",{className:"space-y-3 rounded-2xl border border-brandGreen/10 bg-white/70 p-4 shadow-inner",children:[u.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Livestock delivery methods"}),u.jsx("h2",{className:"text-xl font-bold text-brandGreen",children:"Manage options"}),u.jsx("p",{className:"text-brandGreen/70",children:"Add, edit, or remove delivery methods shown on the livestock form."})]}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[Ct&&u.jsx("span",{className:"rounded-full bg-emerald-100 px-3 py-1 text-xs font-semibold text-emerald-700",children:Ct}),qt&&u.jsx("span",{className:"rounded-full bg-red-100 px-3 py-1 text-xs font-semibold text-red-700",children:qt})]})]}),je&&u.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[u.jsx("input",{type:"text",value:me.label,onChange:m=>Ve(x=>({...x,label:m.target.value})),placeholder:"Label e.g. Pudo, 34 days (R100)",className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("input",{type:"number",value:me.cost,onChange:m=>Ve(x=>({...x,cost:m.target.value})),placeholder:"Cost e.g. 100",className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("div",{className:"flex items-center",children:u.jsx("button",{type:"button",onClick:dl,className:"w-full rounded-full bg-brandGreen px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:shadow-md",children:"Add delivery"})})]}),u.jsx("div",{className:"hidden overflow-x-auto md:block",children:u.jsxs("table",{className:"w-full min-w-[700px] text-left text-sm text-brandGreen",children:[u.jsx("thead",{className:"bg-brandGreen text-white",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-3 py-2 font-semibold",children:"Label"}),u.jsx("th",{className:"px-3 py-2 font-semibold",children:"Cost"}),u.jsx("th",{className:"px-3 py-2 font-semibold text-right",children:"Actions"})]})}),u.jsxs("tbody",{children:[$.map(m=>u.jsxs("tr",{className:"border-b border-brandGreen/10",children:[u.jsx("td",{className:"px-3 py-2",children:u.jsx("input",{type:"text",value:m.label,onChange:x=>Za(m,{label:x.target.value}),disabled:!je,className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"})}),u.jsx("td",{className:"px-3 py-2",children:u.jsx("input",{type:"number",value:m.cost,onChange:x=>Za(m,{cost:Number(x.target.value)}),disabled:!je,className:"w-28 rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-right text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"})}),u.jsx("td",{className:"px-3 py-2 text-right text-xs text-brandGreen/60",children:je?u.jsx("div",{className:"flex items-center justify-end gap-2",children:u.jsx("button",{type:"button",onClick:()=>Ri(m),disabled:is===m.id,className:"rounded-full border border-red-300 px-3 py-1 text-xs font-semibold text-red-700 transition hover:bg-red-50 disabled:cursor-not-allowed disabled:opacity-60",children:"Delete"})}):"View only"})]},m.id)),$.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"px-3 py-4 text-center text-brandGreen/70",children:"No delivery options found."})})]})]})}),u.jsxs("div",{className:"md:hidden grid gap-3",children:[$.map(m=>u.jsx("div",{className:"rounded-xl border border-brandGreen/15 bg-white px-4 py-3 shadow-sm",children:je?u.jsxs("div",{className:"space-y-2",children:[u.jsx("input",{type:"text",value:m.label,onChange:x=>Za(m,{label:x.target.value}),className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"number",value:m.cost,onChange:x=>Za(m,{cost:Number(x.target.value)}),className:"w-28 rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-right text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("button",{type:"button",onClick:()=>Ri(m),disabled:is===m.id,className:"rounded-full border border-red-300 px-3 py-1 text-xs font-semibold text-red-700 transition hover:bg-red-50 disabled:cursor-not-allowed disabled:opacity-60",children:"Delete"})]})]}):u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"font-semibold text-brandGreen",children:m.label}),u.jsxs("p",{className:"text-sm text-brandGreen/70",children:["Cost: R",Number(m.cost).toFixed(2)]})]})},m.id)),$.length===0&&u.jsx("div",{className:"rounded-xl border border-dashed border-brandGreen/30 bg-white/70 px-4 py-6 text-sm text-brandGreen/70",children:"No delivery options found."})]})]}),vt==="users"&&u.jsxs("div",{className:"space-y-3 rounded-2xl border border-brandGreen/10 bg-white/70 p-4 shadow-inner",children:[u.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Users"}),u.jsx("h2",{className:"text-xl font-bold text-brandGreen",children:"Manage roles"}),u.jsx("p",{className:"text-brandGreen/70",children:"Admins can create logins and set roles. If the email already exists, the role will be updated."})]}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[Gn&&u.jsx("span",{className:"rounded-full bg-emerald-100 px-3 py-1 text-xs font-semibold text-emerald-700",children:Gn}),Ma&&u.jsx("span",{className:"rounded-full bg-red-100 px-3 py-1 text-xs font-semibold text-red-700",children:Ma})]})]}),u.jsxs("div",{className:"grid gap-3 md:grid-cols-4",children:[u.jsx("input",{type:"email",value:Tr.email,onChange:m=>Ks("email",m.target.value),placeholder:"Email",className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("input",{type:"password",value:Tr.password,onChange:m=>Ks("password",m.target.value),placeholder:"Temp password (optional)",className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("select",{value:Tr.role,onChange:m=>Ks("role",m.target.value),className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30",children:[u.jsx("option",{value:"admin",children:"Admin"}),u.jsx("option",{value:"worker",children:"Worker"}),Pe==="super_admin"&&u.jsx("option",{value:"super_admin",children:"Super admin"})]}),u.jsx("button",{type:"button",onClick:kd,className:"rounded-full bg-brandGreen px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:shadow-md",children:"Save"})]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"mt-3 w-full min-w-[600px] text-left text-sm text-brandGreen",children:[u.jsx("thead",{className:"bg-brandGreen text-white",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-3 py-2 font-semibold",children:"Email"}),u.jsx("th",{className:"px-3 py-2 font-semibold",children:"Status"}),u.jsx("th",{className:"px-3 py-2 font-semibold",children:"Role"}),u.jsx("th",{className:"px-3 py-2 font-semibold text-right",children:"Actions"})]})}),u.jsxs("tbody",{children:[hi.map(m=>u.jsxs("tr",{className:"border-b border-brandGreen/10",children:[u.jsx("td",{className:"px-3 py-2",children:m.email}),u.jsx("td",{className:"px-3 py-2",children:u.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-semibold ${m.status==="disabled"?"bg-red-100 text-red-700":"bg-emerald-100 text-emerald-700"}`,children:m.status==="disabled"?"Disabled":"Active"})}),u.jsx("td",{className:"px-3 py-2",children:u.jsxs("select",{value:m.role,onChange:x=>eu(m.id,x.target.value),disabled:Pe!=="admin",className:"rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30",children:[u.jsx("option",{value:"admin",children:"Admin"}),u.jsx("option",{value:"worker",children:"Worker"}),Pe==="super_admin"&&u.jsx("option",{value:"super_admin",children:"Super admin"})]})}),u.jsx("td",{className:"px-3 py-2 text-right text-xs text-brandGreen/60",children:Pe!=="admin"?"View only":u.jsxs("div",{className:"flex items-center justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:()=>Od(m,m.status!=="disabled"),className:`rounded-full px-3 py-1 text-xs font-semibold shadow-sm transition ${m.status==="disabled"?"bg-emerald-600 text-white hover:bg-emerald-700":"bg-amber-500 text-white hover:bg-amber-600"}`,children:m.status==="disabled"?"Enable":"Disable"}),u.jsx("button",{type:"button",onClick:()=>Gr(m),className:"rounded-full border border-red-300 px-3 py-1 text-xs font-semibold text-red-700 transition hover:bg-red-50",children:"Delete"})]})})]},m.id)),hi.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"px-3 py-4 text-center text-brandGreen/70",children:"No users found. Add one above."})})]})]})})]}),vt==="finance"&&u.jsxs("div",{className:"space-y-4 rounded-2xl border border-brandGreen/10 bg-white/70 p-4 shadow-inner",children:[u.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Finance"}),u.jsx("h2",{className:"text-xl font-bold text-brandGreen",children:"Record income & expenses"}),u.jsx("p",{className:"text-brandGreen/70",children:"Upload receipts or proofs next to each entry for future reporting."})]}),u.jsxs("div",{className:"text-sm text-brandGreen/70",children:[u.jsxs("p",{children:["Income:"," ",u.jsxs("span",{className:"font-semibold text-emerald-700",children:["R",hn.income.toFixed(2)]})]}),u.jsxs("p",{children:["Expenses:"," ",u.jsxs("span",{className:"font-semibold text-red-700",children:["R",hn.expense.toFixed(2)]})]}),u.jsxs("p",{children:["Balance:"," ",u.jsxs("span",{className:`font-semibold ${hn.income-hn.expense>=0?"text-emerald-700":"text-red-700"}`,children:["R",(hn.income-hn.expense).toFixed(2)]})]})]})]}),u.jsxs("div",{className:"space-y-3 rounded-[32px] border border-brandGreen/30 bg-brandBeige/80 p-5 shadow-xl",children:[Ne&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:Ne}),at&&u.jsx("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-800",children:at}),u.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[u.jsx("p",{className:"text-sm text-brandGreen/70",children:"Add income or expense entries to keep the ledger up to date."}),u.jsx("button",{type:"button",onClick:()=>Le(!0),className:"rounded-3xl bg-brandGreen px-6 py-3 text-sm font-semibold text-white shadow-[0_10px_25px_rgba(58,90,60,0.35)] transition hover:scale-[1.02] hover:bg-emerald-700",children:"Add entry"})]})]}),u.jsxs("div",{className:"space-y-4 rounded-xl border border-brandGreen/20 bg-white/95 px-4 py-4 shadow-lg",children:[u.jsxs("div",{className:"rounded-2xl border border-brandGreen/40 bg-brandCream/80 p-3 shadow-md",children:[u.jsxs("div",{className:"flex items-center justify-between gap-4",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Filters & sorting"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-xs text-brandGreen/70",children:["Showing ",lr.length," record",lr.length===1?"":"s"]}),u.jsx("button",{type:"button",onClick:()=>ye(m=>!m),className:"text-xs font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:ve?"Hide filters":"Show filters"})]})]}),u.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-4",children:[u.jsxs("div",{className:"space-y-1 text-sm text-brandGreen",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Time scope"}),u.jsxs("select",{value:Ie,onChange:m=>Be(m.target.value),className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30",children:[u.jsx("option",{value:"day",children:"Day"}),u.jsx("option",{value:"week",children:"Week"}),u.jsx("option",{value:"month",children:"Month"}),u.jsx("option",{value:"year",children:"Year"})]})]}),Ie==="day"&&u.jsxs("div",{className:"space-y-1 text-sm text-brandGreen",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Day"}),u.jsx("input",{type:"date",value:At.day,onChange:m=>yr({day:m.target.value}),className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"})]}),Ie==="week"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"space-y-1 text-sm text-brandGreen",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Week start"}),u.jsx("input",{type:"date",value:At.weekStart,onChange:m=>yr({weekStart:m.target.value}),className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"})]}),u.jsxs("div",{className:"space-y-1 text-sm text-brandGreen",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Length (days)"}),u.jsx("select",{value:At.weekLength,onChange:m=>yr({weekLength:Number(m.target.value)}),className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30",children:Array.from({length:6},(m,x)=>2+x).map(m=>u.jsxs("option",{value:m,children:[m," days"]},m))})]})]}),Ie==="month"&&u.jsxs("div",{className:"space-y-1 text-sm text-brandGreen",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Month"}),u.jsx("input",{type:"month",value:At.month,onChange:m=>yr({month:m.target.value}),className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"})]}),Ie==="year"&&u.jsxs("div",{className:"space-y-1 text-sm text-brandGreen",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Year"}),u.jsx("select",{value:At.year,onChange:m=>yr({year:m.target.value}),className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30",children:nl.map(m=>u.jsx("option",{value:m,children:m},m))})]}),u.jsxs("div",{className:"space-y-1 text-sm text-brandGreen",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Sort by"}),u.jsxs("select",{value:B.sortKey,onChange:m=>he({sortKey:m.target.value}),className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30",children:[u.jsx("option",{value:"dateDesc",children:"Date "}),u.jsx("option",{value:"dateAsc",children:"Date "}),u.jsx("option",{value:"amountDesc",children:"Amount "}),u.jsx("option",{value:"amountAsc",children:"Amount "})]})]})]})]}),ve&&u.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[u.jsxs("div",{className:"space-y-1 text-sm text-brandGreen",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-brandGreen/70",htmlFor:"finance-min-amount",children:"Min amount"}),u.jsx("input",{id:"finance-min-amount",type:"number",step:"0.01",min:"0",value:B.minAmount,onChange:m=>he({minAmount:m.target.value}),className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"})]}),u.jsxs("div",{className:"space-y-1 text-sm text-brandGreen",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-brandGreen/70",htmlFor:"finance-max-amount",children:"Max amount"}),u.jsx("input",{id:"finance-max-amount",type:"number",step:"0.01",min:"0",value:B.maxAmount,onChange:m=>he({maxAmount:m.target.value}),className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"})]}),u.jsx("div",{className:"flex items-end justify-between gap-3",children:u.jsxs("label",{className:"inline-flex items-center gap-2 text-sm font-semibold text-brandGreen",children:[u.jsx("input",{type:"checkbox",checked:B.hasReceipt,onChange:m=>he({hasReceipt:m.target.checked}),className:"h-4 w-4 rounded border-brandGreen text-brandGreen focus:ring-brandGreen"}),"Has receipt"]})})]})]}),u.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Income entries"}),u.jsxs("span",{className:"text-xs text-brandGreen/70",children:[sl.length," record",sl.length===1?"":"s"]})]}),Yn(sl,"No income entries yet. Mark an order as paid or add one manually.")]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Expense entries"}),u.jsxs("span",{className:"text-xs text-brandGreen/70",children:[Ul.length," record",Ul.length===1?"":"s"]})]}),Yn(Ul,"No expenses yet. Record one to keep books balanced.")]})]})]}),Se&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4 py-6",onClick:()=>Le(!1),children:u.jsxs("div",{className:"w-full max-w-3xl rounded-2xl bg-white p-6 shadow-2xl",onClick:m=>m.stopPropagation(),children:[u.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Finance entry"}),u.jsx("h3",{className:"text-lg font-bold text-brandGreen",children:"Record income or expense"})]}),u.jsx("button",{type:"button",onClick:()=>Le(!1),className:"text-sm font-semibold text-brandGreen underline-offset-2 hover:underline",children:"Cancel"})]}),u.jsxs("form",{onSubmit:m=>{m.preventDefault(),Fl()},className:"space-y-3",children:[u.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[u.jsxs("select",{value:Fe.type,onChange:m=>Ya("type",m.target.value),className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30",children:[u.jsx("option",{value:"expense",children:"Expense"}),u.jsx("option",{value:"income",children:"Income"})]}),u.jsx("input",{type:"number",step:"0.01",value:Fe.amount,placeholder:"Amount",onChange:m=>Ya("amount",m.target.value),className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("input",{type:"date",value:Fe.date,onChange:m=>Ya("date",m.target.value),className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsxs("label",{className:"flex w-full cursor-pointer items-center justify-between rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-sm font-semibold text-brandGreen transition hover:bg-brandBeige/80",children:[u.jsx("span",{children:Fe.file?.name??"Attach receipt (optional)"}),u.jsx("input",{type:"file",className:"sr-only",accept:"application/pdf,image/*",onChange:m=>{const x=m.target.files?.[0]??null;ql(x),m.target.value=""}})]})]}),u.jsx("textarea",{value:Fe.description,onChange:m=>Ya("description",m.target.value),placeholder:"Description (optional)",className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{type:"submit",disabled:ee,className:"rounded-full bg-brandGreen px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:shadow-md disabled:cursor-not-allowed disabled:opacity-60",children:ee?"Saving":"Save entry"})})]})]})}),vt==="reports"&&u.jsxs("div",{className:"space-y-5 rounded-2xl border border-brandGreen/10 bg-white/70 p-4 shadow-inner",children:[u.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[u.jsxs("div",{className:"rounded-2xl border border-brandGreen/10 bg-brandBeige/60 p-4",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Orders"}),u.jsx("p",{className:"text-3xl font-bold text-brandGreen",children:oa.totalOrders}),u.jsxs("p",{className:"text-sm text-brandGreen/70",children:["Total value: R",oa.totalValue.toFixed(2)]})]}),u.jsxs("div",{className:"rounded-2xl border border-brandGreen/10 bg-brandBeige/60 p-4",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Stock"}),u.jsx("p",{className:"text-3xl font-bold text-brandGreen",children:qa.totalItems}),u.jsxs("p",{className:"text-sm text-brandGreen/70",children:["Low stock: ",qa.lowStockCount]})]}),u.jsxs("div",{className:"rounded-2xl border border-brandGreen/10 bg-brandBeige/60 p-4",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Finance"}),u.jsxs("p",{className:"text-3xl font-bold text-emerald-700",children:["R",hn.income.toFixed(2)]}),u.jsxs("p",{className:"text-xs text-brandGreen/70",children:["Expenses: R",hn.expense.toFixed(2),"  Balance: R",(hn.income-hn.expense).toFixed(2)]})]})]}),u.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[u.jsxs("div",{className:"space-y-3 rounded-2xl border border-brandGreen/10 bg-brandBeige/60 p-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Order status distribution"}),u.jsxs("span",{className:"text-xs text-brandGreen/70",children:[oa.totalOrders," orders"]})]}),u.jsx("div",{className:"space-y-2",children:$_.map(m=>{const x=oa.statusCounts[m.id]??0,T=oa.maxStatusCount===0?0:Math.round(x/oa.maxStatusCount*100);return u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between text-xs text-brandGreen/70",children:[u.jsx("span",{children:m.label}),u.jsx("span",{children:x})]}),u.jsx("div",{className:"h-2 rounded-full bg-brandGreen/10",children:u.jsx("div",{className:"h-2 rounded-full bg-brandGreen",style:{width:`${T}%`}})})]},m.id)})})]}),u.jsxs("div",{className:"space-y-3 rounded-2xl border border-brandGreen/10 bg-brandBeige/60 p-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Finance trend"}),u.jsxs("span",{className:"text-xs text-brandGreen/70",children:[$c.length," months"]})]}),$c.length===0?u.jsx("p",{className:"text-sm text-brandGreen/70",children:"No finance data yet."}):u.jsx("div",{className:"flex items-end justify-between gap-1",children:$c.map(m=>u.jsxs("div",{className:"flex flex-col items-center gap-1 text-[0.65rem] text-brandGreen/70",children:[u.jsxs("div",{className:"flex h-28 items-end gap-1",children:[u.jsx("div",{className:"rounded-t-xl bg-emerald-500",style:{width:8,height:`${m.incomeHeight}%`}}),u.jsx("div",{className:"rounded-t-xl bg-red-500",style:{width:8,height:`${m.expenseHeight}%`}})]}),u.jsx("span",{className:"text-[0.6rem]",children:m.label})]},m.month))}),u.jsxs("div",{className:"flex items-center justify-between text-[0.65rem] text-brandGreen/60",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500"}),"Income"]}),u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("span",{className:"h-2 w-2 rounded-full bg-red-500"}),"Expense"]})]})]})]}),u.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[u.jsxs("div",{className:"space-y-3 rounded-2xl border border-brandGreen/10 bg-brandBeige/60 p-4",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Average days in status (since creation)"}),u.jsx("div",{className:"space-y-2",children:$_.map(m=>{const x=oa.averageDurations[m.id]??0;return u.jsxs("div",{className:"flex justify-between text-sm text-brandGreen/70",children:[u.jsx("span",{children:m.label}),u.jsxs("span",{children:[x.toFixed(1)," days"]})]},`${m.id}-duration`)})})]}),u.jsxs("div",{className:"space-y-3 rounded-2xl border border-brandGreen/10 bg-brandBeige/60 p-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Stock category breakdown"}),u.jsxs("span",{className:"text-xs text-brandGreen/70",children:["Total quantity: ",qa.totalQuantity]})]}),u.jsx("div",{className:"space-y-2",children:qa.categoryBreakdown.map(([m,x])=>{const T=qa.totalQuantity===0?0:Math.round(x/qa.totalQuantity*100);return u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between text-xs text-brandGreen/70",children:[u.jsx("span",{children:m}),u.jsx("span",{children:x})]}),u.jsx("div",{className:"h-2 rounded-full bg-brandGreen/10",children:u.jsx("div",{className:"h-2 rounded-full bg-brandGreen",style:{width:`${T}%`}})})]},m)})})]})]}),u.jsxs("div",{className:"space-y-4 rounded-[32px] border-2 border-brandGreen/30 bg-brandBeige/80 p-5 shadow-lg",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Finance activity"}),u.jsx("p",{className:"text-base font-semibold text-brandGreen/90",children:"How well the business is tracking"})]}),u.jsxs("span",{className:"text-xs text-brandGreen/70",children:[Ll.total," entries logged"]})]}),u.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[u.jsxs("div",{className:"rounded-xl border border-brandGreen/30 bg-white/80 p-3 text-sm",children:[u.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-brandGreen/50",children:"Income"}),u.jsxs("p",{className:"text-2xl font-semibold text-emerald-700",children:["R",hn.income.toFixed(2)]}),u.jsxs("p",{className:"text-xs text-brandGreen/70",children:[Ll.receipts," receipts attached"]})]}),u.jsxs("div",{className:"rounded-xl border border-brandGreen/30 bg-white/80 p-3 text-sm",children:[u.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-brandGreen/50",children:"Expenses"}),u.jsxs("p",{className:"text-2xl font-semibold text-red-700",children:["R",hn.expense.toFixed(2)]}),u.jsxs("p",{className:"text-xs text-brandGreen/70",children:["Average R",Ll.average.toFixed(2)," per entry"]})]}),u.jsxs("div",{className:"rounded-xl border border-brandGreen/30 bg-white/80 p-3 text-sm",children:[u.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-brandGreen/50",children:"Net balance"}),u.jsxs("p",{className:`text-2xl font-semibold ${hn.income-hn.expense>=0?"text-emerald-700":"text-red-700"}`,children:["R",(hn.income-hn.expense).toFixed(2)]}),u.jsxs("p",{className:"text-xs text-brandGreen/70",children:[Bl.length," most recent entries"]})]})]}),u.jsx("div",{className:"space-y-2",children:Bl.length===0?u.jsx("p",{className:"text-sm text-brandGreen/70",children:"No recent finance entries to display yet."}):Bl.map(m=>u.jsxs("div",{className:"flex flex-col gap-1 rounded-2xl border border-brandGreen/30 bg-white/90 p-3 shadow-sm",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsxs("span",{className:"flex items-center gap-2 text-brandGreen/70",children:[u.jsx("span",{className:`h-2.5 w-2.5 rounded-full ${m.type==="income"?"bg-emerald-500":"bg-red-500"}`}),m.type==="income"?"Income":"Expense"]}),u.jsxs("span",{className:`font-semibold ${m.type==="income"?"text-emerald-700":"text-red-700"}`,children:["R",m.amount.toFixed(2)]})]}),u.jsxs("p",{className:"text-xs text-brandGreen/60",children:[m.description||"No description"," "," ",$s(m)]})]},m.id))})]})]}),de&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 px-4",onClick:()=>{Rn(null),wt(null)},children:u.jsxs("div",{className:"max-h-[90vh] w-full max-w-3xl overflow-y-auto rounded-2xl bg-white p-6 shadow-2xl",onClick:m=>m.stopPropagation(),children:[u.jsxs("div",{className:"flex items-start justify-between gap-3",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Order details"}),u.jsxs("h3",{className:"text-2xl font-bold text-brandGreen",children:[ct?.name??de.name," ",ct?.surname??de.surname]}),u.jsx("p",{className:"text-sm font-mono text-brandGreen",children:ct?.orderNumber||de.orderNumber||de.id}),u.jsxs("p",{className:"text-brandGreen/70",children:[ct?.email??de.email," "," ",ct?.cellphone??de.cellphone]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{type:"button",onClick:()=>void al(de.formType==="livestock"?"livestockOrders":"eggOrders",de),className:"rounded-full border border-emerald-300 px-3 py-2 text-xs font-semibold text-emerald-800 transition hover:bg-emerald-50",children:de.paid?"Mark unpaid":"Mark paid"}),u.jsx("button",{type:"button",onClick:()=>Rn(null),className:"rounded-full bg-brandGreen px-3 py-2 text-xs font-semibold text-white shadow-sm transition hover:shadow-md",children:"Close"})]})]}),u.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70",children:"Status"}),u.jsx("select",{value:ct?.orderStatus??de.orderStatus,onChange:m=>dm(de.formType==="livestock"?"livestockOrders":"eggOrders",m.target.value),className:"w-full rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30",children:Hu.map(m=>u.jsx("option",{value:m.id,children:m.label},m.id))}),(de.orderStatus==="packed"||de.orderStatus==="shipped")&&u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70",children:"Tracking link (optional)"}),u.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center",children:[u.jsx("input",{type:"url",value:h[de.id]??de.trackingLink??"",onChange:m=>g(x=>({...x,[de.id]:m.target.value})),onBlur:()=>Wc(de.formType==="livestock"?"livestockOrders":"eggOrders",de.id),className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("button",{type:"button",onClick:()=>Wc(de.formType==="livestock"?"livestockOrders":"eggOrders",de.id),className:"rounded-full bg-brandGreen px-3 py-2 text-xs font-semibold text-white shadow-sm transition hover:shadow-md",children:"Save"})]})]})]}),u.jsxs("div",{className:"space-y-2 text-right",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70",children:"Totals"}),(()=>{const{eggsTotal:m,deliveryCost:x,total:T}=kr(ct??de);return u.jsxs("div",{className:"space-y-1 text-sm text-brandGreen",children:[u.jsxs("p",{children:["Subtotal:"," ",u.jsxs("span",{className:"font-semibold",children:["R",m.toFixed(2)]})]}),u.jsxs("p",{children:["Delivery:"," ",u.jsxs("span",{className:"font-semibold",children:["R",x.toFixed(2)]})]}),u.jsxs("p",{className:"text-lg font-bold text-brandGreen",children:["Total: R",T.toFixed(2)]})]})})(),u.jsxs("p",{className:"text-sm text-brandGreen",children:["Paid: ",de.paid?"Yes":"No"]}),u.jsxs("p",{className:"text-sm text-brandGreen",children:["Delivery: ",de.deliveryOption??""]}),u.jsxs("p",{className:"text-sm text-brandGreen",children:["Send date: ",de.sendDate??""]})]})]}),u.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70",children:"Delivery address"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("p",{className:"text-brandGreen",children:de.address||""}),de.address?u.jsxs("button",{type:"button","aria-label":"Copy address",onClick:()=>navigator.clipboard.writeText(de.address??""),className:"rounded-full border border-brandGreen/30 p-1 text-brandGreen transition hover:bg-brandBeige",children:[u.jsx("i",{className:"fa-regular fa-copy text-sm leading-none"}),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"h-3.5 w-3.5","aria-hidden":"true",children:[u.jsx("path",{d:"M10 1.5A1.5 1.5 0 0 1 11.5 3v7A1.5 1.5 0 0 1 10 11.5H5A1.5 1.5 0 0 1 3.5 10V3A1.5 1.5 0 0 1 5 1.5h5Zm0 1H5a.5.5 0 0 0-.5.5v7c0 .276.224.5.5.5h5a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5Z"}),u.jsx("path",{d:"M12.5 4A1.5 1.5 0 0 1 14 5.5v7A1.5 1.5 0 0 1 12.5 14H6a1.5 1.5 0 0 1-1.5-1.5v-.5h1v.5c0 .276.224.5.5.5h6.5a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.5-.5H12v-1h.5Z"})]})]}):null]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70",children:"Contact"}),u.jsxs("div",{className:"space-y-1 text-brandGreen",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"font-semibold",children:[de.name," ",de.surname]}),u.jsxs("button",{type:"button","aria-label":"Copy name",onClick:()=>navigator.clipboard.writeText(`${de.name} ${de.surname}`),className:"rounded-full border border-brandGreen/30 p-1 text-brandGreen transition hover:bg-brandBeige",children:[u.jsx("i",{className:"fa-regular fa-copy text-sm leading-none"}),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"h-3.5 w-3.5","aria-hidden":"true",children:[u.jsx("path",{d:"M10 1.5A1.5 1.5 0 0 1 11.5 3v7A1.5 1.5 0 0 1 10 11.5H5A1.5 1.5 0 0 1 3.5 10V3A1.5 1.5 0 0 1 5 1.5h5Zm0 1H5a.5.5 0 0 0-.5.5v7c0 .276.224.5.5.5h5a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5Z"}),u.jsx("path",{d:"M12.5 4A1.5 1.5 0 0 1 14 5.5v7A1.5 1.5 0 0 1 12.5 14H6a1.5 1.5 0 0 1-1.5-1.5v-.5h1v.5c0 .276.224.5.5.5h6.5a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.5-.5H12v-1h.5Z"})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("a",{className:"underline",href:`mailto:${de.email}`,children:de.email}),u.jsxs("button",{type:"button","aria-label":"Copy email",onClick:()=>navigator.clipboard.writeText(de.email),className:"rounded-full border border-brandGreen/30 p-1 text-brandGreen transition hover:bg-brandBeige",children:[u.jsx("i",{className:"fa-regular fa-copy text-sm leading-none"}),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"h-3.5 w-3.5","aria-hidden":"true",children:[u.jsx("path",{d:"M10 1.5A1.5 1.5 0 0 1 11.5 3v7A1.5 1.5 0 0 1 10 11.5H5A1.5 1.5 0 0 1 3.5 10V3A1.5 1.5 0 0 1 5 1.5h5Zm0 1H5a.5.5 0 0 0-.5.5v7c0 .276.224.5.5.5h5a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5Z"}),u.jsx("path",{d:"M12.5 4A1.5 1.5 0 0 1 14 5.5v7A1.5 1.5 0 0 1 12.5 14H6a1.5 1.5 0 0 1-1.5-1.5v-.5h1v.5c0 .276.224.5.5.5h6.5a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.5-.5H12v-1h.5Z"})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("a",{className:"underline",href:`tel:${de.cellphone}`,children:de.cellphone}),u.jsxs("button",{type:"button","aria-label":"Copy phone",onClick:()=>navigator.clipboard.writeText(de.cellphone),className:"rounded-full border border-brandGreen/30 p-1 text-brandGreen transition hover:bg-brandBeige",children:[u.jsx("i",{className:"fa-regular fa-copy text-sm leading-none"}),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"h-3.5 w-3.5","aria-hidden":"true",children:[u.jsx("path",{d:"M10 1.5A1.5 1.5 0 0 1 11.5 3v7A1.5 1.5 0 0 1 10 11.5H5A1.5 1.5 0 0 1 3.5 10V3A1.5 1.5 0 0 1 5 1.5h5Zm0 1H5a.5.5 0 0 0-.5.5v7c0 .276.224.5.5.5h5a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5Z"}),u.jsx("path",{d:"M12.5 4A1.5 1.5 0 0 1 14 5.5v7A1.5 1.5 0 0 1 12.5 14H6a1.5 1.5 0 0 1-1.5-1.5v-.5h1v.5c0 .276.224.5.5.5h6.5a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.5-.5H12v-1h.5Z"})]})]})]})]})]})]}),je&&u.jsxs("div",{className:"mt-4 space-y-3",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70",children:"Bookkeeping attachments (optional)"}),u.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:H_.map(m=>{const x=de[m.urlField],T=de[m.nameField],N=Ed(de.id,m.key),j=!!D[N];return u.jsxs("div",{className:"rounded-2xl border border-brandGreen/10 bg-brandBeige/40 p-3",children:[u.jsxs("div",{className:"flex items-center justify-between gap-3",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70",children:m.label}),x?u.jsx("a",{className:"text-sm font-semibold text-brandGreen underline decoration-brandGreen/30 underline-offset-4",href:x,target:"_blank",rel:"noreferrer",children:T||`${m.label} file`}):u.jsx("p",{className:"text-sm text-brandGreen/70",children:"Not uploaded yet."})]}),u.jsxs("label",{className:`inline-flex items-center gap-2 rounded-full border border-brandGreen/30 px-3 py-1 text-xs font-semibold text-brandGreen transition hover:bg-brandBeige ${j?"cursor-wait opacity-70":"cursor-pointer"}`,children:[u.jsx("input",{type:"file",className:"sr-only",accept:"application/pdf,image/*",disabled:j,onChange:V=>{const ae=V.target.files?.[0];V.target.value="",ae&&Hl(de,m.key,ae)}}),j?"Uploading":"Upload file"]})]}),u.jsx("p",{className:"text-xs text-brandGreen/60",children:m.description})]},m.key)})})]}),u.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70",children:"Delivery option"}),je?u.jsxs("select",{value:ct?.deliveryOptionId??"",onChange:m=>{const T=vi(ct).find(N=>N.id===m.target.value);Id("deliveryOptionId",m.target.value),rr(N=>N&&{...N,deliveryOption:T?.label??N.deliveryOption})},className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30",children:[u.jsx("option",{value:"",children:"Select delivery"}),vi(ct).map(m=>u.jsxs("option",{value:m.id,children:[m.label," (R",Number(m.cost??0).toFixed(2),")"]},m.id))]}):u.jsx("p",{className:"text-brandGreen",children:de.deliveryOption??""})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70",children:de.formType==="livestock"?"Need by date":"Send date"}),je?u.jsxs("div",{className:"space-y-2",children:[u.jsx("input",{type:"date",value:ct?.sendDate??"",onChange:m=>Id("sendDate",m.target.value),className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsx("button",{type:"button",onClick:()=>Cd(),disabled:z===de.id,className:"rounded-full bg-brandGreen px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:shadow-md disabled:cursor-not-allowed disabled:opacity-60",children:z===de.id?"Sending":"Send dispatch email"}),!de.sendDate&&u.jsx("p",{className:"text-xs text-brandGreen/70",children:"No send date saved, so the email will omit it."})]})]}):u.jsx("p",{className:"text-brandGreen",children:de.sendDate??""})]})]}),u.jsxs("div",{className:"mt-4",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70 mb-2",children:"Notes / comments"}),je?u.jsx("textarea",{value:ct?.notes??"",onChange:m=>rr(x=>x&&{...x,notes:m.target.value}),className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}):u.jsx("p",{className:"rounded-lg border border-brandGreen/10 bg-brandBeige/40 px-3 py-2 text-brandGreen",children:de.notes&&de.notes.trim().length>0?de.notes:""})]}),je&&u.jsxs("div",{className:"mt-4 space-y-2",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70",children:"Internal note (not emailed to customer)"}),u.jsx("textarea",{value:Ua[de.id]??"",onChange:m=>cm(de.id,m.target.value),placeholder:"Add private admin notes. This saves to the order but does not send an email.",className:"w-full rounded-lg border border-brandGreen/30 bg-brandBeige/40 px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[u.jsxs("div",{className:"flex flex-wrap gap-2",children:[gi&&u.jsx("span",{className:"rounded-full bg-red-100 px-3 py-1 text-xs font-semibold text-red-700",children:gi}),tl&&u.jsx("span",{className:"rounded-full bg-emerald-100 px-3 py-1 text-xs font-semibold text-emerald-700",children:tl})]}),u.jsx("button",{type:"button",onClick:()=>Xa(de),disabled:Zo,className:"rounded-full bg-brandGreen px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:shadow-md disabled:cursor-not-allowed disabled:opacity-70",children:Zo?"Saving...":"Save internal note"})]})]}),u.jsxs("div",{className:"mt-4",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/70 mb-2",children:de.formType==="livestock"?"Livestock items":"Egg breakdown"}),je?u.jsxs("div",{className:"space-y-2",children:[(()=>{const m=de.formType==="livestock"?_s:lt;return(ct?.eggs??[]).map((x,T)=>{const N=m.find(j=>j.id===x.id)?.id??"";return u.jsxs("div",{className:"flex flex-col gap-2 rounded-lg border border-brandGreen/15 bg-brandBeige/40 p-3 md:flex-row md:items-center",children:[u.jsxs("select",{value:N,onChange:j=>Dd(T,j.target.value),className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30",children:[m.map(j=>u.jsx("option",{value:j.id,children:j.label},j.id)),!N&&x.label&&u.jsxs("option",{value:"",disabled:!0,children:["Legacy: ",x.label]})]}),u.jsx("input",{type:"number",value:x.quantity,onChange:j=>jd(T,"quantity",j.target.value),placeholder:"Qty",className:"w-full md:w-32 rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),de.formType!=="livestock"&&u.jsx("button",{type:"button",onClick:()=>zl(T),className:"rounded-full border border-red-300 px-3 py-1 text-xs font-semibold text-red-700 transition hover:bg-red-50",children:"Remove"})]},x.id||T)})})(),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("button",{type:"button",onClick:Yc,className:"rounded-full border border-brandGreen/30 px-3 py-1 text-xs font-semibold text-brandGreen transition hover:bg-brandBeige",children:de.formType==="livestock"?"Add livestock line":"Add egg line"}),u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{type:"button",onClick:Or,className:"rounded-full bg-brandGreen px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:shadow-md",children:"Update"})})]})]}):u.jsx("ul",{className:"space-y-2",children:de.eggs&&de.eggs.length>0?de.eggs.map(m=>{const x=m.specialPrice??m.price??0,T=x*m.quantity,N=de.fulfilledEggs?.includes(m.id);return u.jsxs("li",{className:"flex items-start justify-between gap-3 rounded-lg border border-brandGreen/15 bg-brandBeige/40 px-3 py-2",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-semibold text-brandGreen",children:[m.label," x ",m.quantity]}),u.jsxs("p",{className:"text-xs text-brandGreen/70",children:["Price: R",x.toFixed(2),"  Line total: R",T.toFixed(2)]})]}),de.formType!=="livestock"&&u.jsx("input",{type:"checkbox",className:"mt-1 h-4 w-4 accent-brandGreen",checked:!!N,onChange:()=>hm("eggOrders",{...de,fulfilledEggs:de.fulfilledEggs??[]},m.id)})]},m.id)}):u.jsx("li",{className:"text-sm text-brandGreen/70",children:""})})]}),u.jsxs("div",{className:"mt-6 flex flex-wrap gap-2 justify-between",children:[u.jsx("button",{type:"button",onClick:()=>En(de),className:"rounded-full border border-red-300 px-4 py-2 text-sm font-semibold text-red-700 transition hover:bg-red-50",children:"Delete order"}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.jsx("button",{type:"button",onClick:()=>void al(de.formType==="livestock"?"livestockOrders":"eggOrders",de),className:"rounded-full border border-emerald-300 px-4 py-2 text-sm font-semibold text-emerald-800 transition hover:bg-emerald-50",children:de.paid?"Mark unpaid":"Mark paid"}),u.jsx("button",{type:"button",onClick:()=>Rn(null),className:"rounded-full bg-brandGreen px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:shadow-md",children:"Close"})]})]})]})}),zt&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 px-4",onClick:()=>Qn(null),children:u.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-2xl",onClick:m=>m.stopPropagation(),children:[u.jsx("h4",{className:"text-lg font-bold text-brandGreen",children:zt.type==="single"?`Delete category "${zt.category.name}"?`:"Delete all categories?"}),u.jsx("p",{className:"mt-2 text-sm text-brandGreen/80",children:zt.type==="single"?`This will remove the category and ${zt.relatedCount} related item(s). This action cannot be undone.`:`This will remove ${zt.categoryCount} categories and ${zt.itemCount} related items. This action cannot be undone.`}),u.jsxs("div",{className:"mt-4 flex gap-3 justify-end",children:[u.jsx("button",{type:"button",onClick:()=>Qn(null),className:"rounded-full border border-brandGreen/30 px-4 py-2 text-sm font-semibold text-brandGreen",children:"Cancel"}),u.jsx("button",{type:"button",onClick:Si,disabled:Pa||zt.type==="single"&&ut===zt.category.id,className:"rounded-full bg-red-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:shadow-md disabled:cursor-not-allowed disabled:opacity-70",children:Pa||zt.type==="single"&&ut===zt.category.id?"Deleting...":"Delete"})]})]})}),Lt&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 px-4",onClick:()=>En(null),children:u.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-2xl",onClick:m=>m.stopPropagation(),children:[u.jsx("h4",{className:"text-lg font-bold text-brandGreen",children:"Delete order?"}),u.jsxs("p",{className:"mt-2 text-sm text-brandGreen/80",children:["This will remove the order for ",Lt.name," ",Lt.surname,". This action cannot be undone."]}),u.jsxs("div",{className:"mt-4 flex gap-3 justify-end",children:[u.jsx("button",{type:"button",onClick:()=>En(null),className:"rounded-full border border-brandGreen/30 px-4 py-2 text-sm font-semibold text-brandGreen",children:"Cancel"}),u.jsx("button",{type:"button",onClick:$l,className:"rounded-full bg-red-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:shadow-md",children:"Delete"})]})]})}),Tn&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 px-4",onClick:()=>Cr(!1),children:u.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-2xl",onClick:m=>m.stopPropagation(),children:[u.jsx("h4",{className:"text-lg font-bold text-brandGreen",children:"Add category"}),u.jsxs("div",{className:"mt-3 space-y-2",children:[u.jsx("input",{type:"text",value:vs.name,onChange:m=>Ii(m.target.value),placeholder:"e.g. Packaging",className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:()=>Cr(!1),className:"rounded-full border border-brandGreen/30 px-4 py-2 text-sm font-semibold text-brandGreen",children:"Cancel"}),u.jsx("button",{type:"button",onClick:()=>{Ja(),Cr(!1)},className:"rounded-full bg-brandGreen px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:shadow-md",children:"Save"})]})]})]})}),xs&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 px-4",onClick:()=>rs(!1),children:u.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-2xl",onClick:m=>m.stopPropagation(),children:[u.jsx("h4",{className:"text-lg font-bold text-brandGreen",children:"Add subcategory"}),u.jsxs("div",{className:"mt-3 space-y-3",children:[u.jsxs("select",{className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30",value:tn.categoryId,onChange:m=>ts(x=>({...x,categoryId:m.target.value})),children:[u.jsx("option",{value:"",children:"Select category"}),Pt.map(m=>u.jsx("option",{value:m.id,children:m.name},m.id))]}),u.jsx("input",{type:"text",className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30",value:tn.name,onChange:m=>ts(x=>({...x,name:m.target.value})),placeholder:"e.g. Broiler, Starter"}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:()=>rs(!1),className:"rounded-full border border-brandGreen/30 px-4 py-2 text-sm font-semibold text-brandGreen",children:"Cancel"}),u.jsx("button",{type:"button",onClick:()=>{ol(),rs(!1)},className:"rounded-full bg-brandGreen px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:shadow-md",children:"Save"})]})]})]})}),Rr&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 px-4",onClick:()=>Ir(null),children:u.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-2xl",onClick:m=>m.stopPropagation(),children:[u.jsxs("h4",{className:"text-lg font-bold text-brandGreen",children:["Subcategories for ",Rr.name]}),je&&u.jsxs("div",{className:"mt-3 space-y-2 rounded-lg border border-brandGreen/15 bg-brandBeige/40 p-3",children:[u.jsx("p",{className:"text-sm font-semibold text-brandGreen",children:"Add subcategory"}),u.jsxs("div",{className:"grid gap-2 md:grid-cols-[1fr_auto] md:items-center",children:[u.jsx("input",{type:"text",value:tn.name,onChange:m=>ts(x=>({...x,name:m.target.value,categoryId:Rr.id})),placeholder:"e.g. Starter",className:"w-full rounded-lg border border-brandGreen/30 bg-white px-3 py-2 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30"}),u.jsx("button",{type:"button",onClick:()=>{ol()},className:"rounded-full bg-brandGreen px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:shadow-md",children:"Add"})]})]}),u.jsx("div",{className:"mt-3 space-y-2",children:(()=>{const m=new Set;(Rr.subCategories??[]).forEach(T=>m.add(T)),(Pn[Rr.id]??[]).forEach(T=>m.add(T));const x=Array.from(m).filter(Boolean);return x.length===0?u.jsx("p",{className:"text-sm text-brandGreen/70",children:"No subcategories."}):x.map(T=>u.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-brandGreen/10 bg-brandBeige/40 px-3 py-2",children:[u.jsx("span",{className:"text-brandGreen",children:T}),je&&u.jsx("button",{type:"button",onClick:()=>ll(Rr.id,T),disabled:ta===`${Rr.id}:${T}`,className:"rounded-full border border-red-300 px-3 py-1 text-xs font-semibold text-red-700 transition hover:bg-red-50 disabled:cursor-not-allowed disabled:opacity-60",children:ta===`${Rr.id}:${T}`?"Deleting...":"Delete"})]},T))})()}),u.jsx("div",{className:"mt-4 flex justify-end",children:u.jsx("button",{type:"button",onClick:()=>Ir(null),className:"rounded-full bg-brandGreen px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:shadow-md",children:"Close"})})]})}),yi&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 px-4",onClick:()=>ra(null),children:u.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-2xl",onClick:m=>m.stopPropagation(),children:[u.jsxs("h4",{className:"text-lg font-bold text-brandGreen",children:["Choose form to ",yi.action==="copy"?"copy":"share"]}),u.jsx("p",{className:"mt-1 text-sm text-brandGreen/70",children:"Select which form link you want to use."}),u.jsxs("div",{className:"mt-4 grid gap-3",children:[u.jsx("button",{type:"button",onClick:()=>Ts("eggs"),className:"w-full rounded-xl border border-brandGreen/20 bg-brandBeige/60 px-4 py-3 text-left font-semibold text-brandGreen transition hover:border-brandGreen/40 hover:bg-brandBeige",children:"Egg order form"}),u.jsx("button",{type:"button",onClick:()=>Ts("livestock"),className:"w-full rounded-xl border border-brandGreen/20 bg-brandBeige/60 px-4 py-3 text-left font-semibold text-brandGreen transition hover:border-brandGreen/40 hover:bg-brandBeige",children:"Livestock form"})]}),u.jsx("div",{className:"mt-4 flex justify-end",children:u.jsx("button",{type:"button",onClick:()=>ra(null),className:"rounded-full border border-brandGreen/30 px-4 py-2 text-sm font-semibold text-brandGreen transition hover:bg-brandBeige",children:"Cancel"})})]})})]}):u.jsx("div",{className:"mx-auto max-w-xl",children:u.jsxs("div",{className:`${El} space-y-4 p-6 md:p-8`,children:[u.jsxs("div",{className:"space-y-1 text-center",children:[u.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-brandGreen/70",children:"Login"}),u.jsx("h1",{className:"text-2xl font-bold text-brandGreen",children:"Sign in to view orders"}),u.jsx("p",{className:"text-brandGreen/70",children:"Restricted area. Please use your admin credentials."})]}),u.jsxs("form",{onSubmit:Sd,className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"block text-sm font-semibold text-brandGreen",children:"Email"}),u.jsx("input",{type:"email",className:"w-full rounded-lg border border-brandGreen/20 bg-white/70 px-4 py-3 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30",value:W,onChange:m=>te(m.target.value),required:!0})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"block text-sm font-semibold text-brandGreen",children:"Password"}),u.jsx("input",{type:"password",className:"w-full rounded-lg border border-brandGreen/20 bg-white/70 px-4 py-3 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30",value:Y,onChange:m=>ue(m.target.value),required:!0})]}),I&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:I}),u.jsx("button",{type:"submit",disabled:E,className:"w-full rounded-full bg-brandGreen px-4 py-3 text-white font-semibold shadow-md transition hover:scale-[1.01] hover:shadow-lg disabled:cursor-not-allowed disabled:opacity-70",children:E?"Signing in...":"Sign in"})]})]})})}const Qh=[{id:"indian_runner",label:"Indian Runner",price:55,specialPrice:46,order:1},{id:"pekin",label:"Pekin",price:35,specialPrice:31.5,order:2},{id:"saxony",label:"Saxony",price:35,specialPrice:31.5,order:3},{id:"khaki",label:"Khaki",price:30,specialPrice:27,order:4},{id:"black_copper_maran",label:"Black Copper Maran",price:95,specialPrice:55,order:5},{id:"buff_orpington",label:"Buff Orpington",price:35,order:6},{id:"white_australorp",label:"White Australorp",price:35,specialPrice:31.5,order:7},{id:"black_australorp",label:"Black Australorp",price:25,specialPrice:22.5,order:8},{id:"jumbo_quail",label:"Jumbo Quail",price:5,order:9}],V3="/assets/crookedfencelogosmall(1)-D2NbFJhG.png",U3="/assets/whatsapp-call-icon-psd-editable_314999-3666%20-%20Edited-DksBPxqT.png",cf=[{id:"courier_guy",label:"Courier Guy, 34 days (R150)",cost:150,order:1},{id:"courier_guy_next",label:"Courier Guy next day delivery (~R250)",cost:250,order:2},{id:"collection",label:"Collection at farm (full address provided)",cost:0,order:3},{id:"waitlist",label:"Waiting list until eggs are available",cost:0,order:4},{id:"other",label:"Other",cost:0,order:5}],ug=(s,e)=>{const n={};return s.forEach(i=>{n[i.id]=e?.[i.id]??0}),n},Q_={name:"",surname:"",email:"",countryCode:"+27",cellphone:"",address:"",deliveryOption:cf[0].id,otherDelivery:"",sendDate:"",notes:""},Kh="bg-brandBeige shadow-lg rounded-2xl border border-brandGreen/10",va="w-full rounded-lg border border-brandGreen/20 bg-white/70 px-4 py-3 text-brandGreen placeholder:text-brandGreen/50 focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30",L3=[{label:"South Africa",code:"+27"},{label:"Namibia",code:"+264"},{label:"Botswana",code:"+267"},{label:"Zimbabwe",code:"+263"},{label:"Zambia",code:"+260"},{label:"Mozambique",code:"+258"},{label:"Lesotho",code:"+266"},{label:"Eswatini (Swaziland)",code:"+268"},{label:"Angola",code:"+244"},{label:"Malawi",code:"+265"}];function sN({variant:s="eggs"}){const e=s==="livestock",n=e?"Livestock Order Form":"Fertile Egg Order Form",i=e?"Livestock type & quantities":"Egg types & quantities",o=e?"livestock type":"egg type",c=e?"Preferred delivery/need-by date*":"Send date*",h=e?"Tell us when you need the livestock (e.g., next week Wednesday).":"",[g,y]=R.useState(Qh),[v,E]=R.useState([]),[S,I]=R.useState(Q_),[q,W]=R.useState(cf),[te,Y]=R.useState(()=>ug(Qh)),[ue,fe]=R.useState(!1),[oe,_e]=R.useState(""),[ke,Me]=R.useState(""),[O,D]=R.useState(!1),[k,z]=R.useState(null);R.useEffect(()=>{const le=Jn(yt(Ae,e?"livestockTypes":"eggTypes"),gr("order","asc")),he=Zn(le,ve=>{const ye=ve.docs.map(Ie=>{const Be=Ie.data(),At=Be.categoryName??Be.category??"";return{id:Ie.id,label:Be.label??"Unnamed",price:Number(Be.price??0),specialPrice:Be.specialPrice===void 0?null:Number(Be.specialPrice),order:Be.order??0,categoryId:Be.categoryId??"",categoryName:At}}),Se=e?[]:Qh,Le=ye.length>0?ye:Se;y(Le),Y(Ie=>ug(Le,Ie))},ve=>{console.error("type load error",ve);const ye=e?[]:Qh;y(ye),Y(Se=>ug(ye,Se))});return()=>he()},[e]),R.useEffect(()=>{if(!e){E([]);return}const B=Jn(yt(Ae,"livestockCategories"),gr("name","asc")),le=Zn(B,he=>{const ve=he.docs.map(ye=>{const Se=ye.data();return{id:ye.id,name:Se.name??"",description:Se.description??""}});E(ve)},he=>{console.error("livestockCategories load error",he),E([])});return()=>le()},[e]),R.useEffect(()=>{const le=Jn(yt(Ae,e?"livestockDeliveryOptions":"deliveryOptions"),gr("order","asc")),he=Zn(le,ve=>{const ye=ve.docs.map(Le=>{const Ie=Le.data();return{id:Le.id,label:Ie.label??"Delivery",cost:Number(Ie.cost??0),order:Ie.order??0}}),Se=ye.length>0?ye:cf;W(Se),Se.find(Le=>Le.id===S.deliveryOption)||I(Le=>({...Le,deliveryOption:Se[0].id}))},ve=>{console.error("deliveryOptions load error",ve),W(cf)});return()=>he()},[S.deliveryOption,e]);const P=R.useMemo(()=>g.filter(B=>te[B.id]>0),[g,te]),F=R.useMemo(()=>P.reduce((B,le)=>{const he=le.specialPrice??void 0,ve=he==null||he===0?le.price??0:he,ye=te[le.id]??0;return B+ve*ye},0),[P,te]),G=R.useMemo(()=>P.map(B=>{const le=B.specialPrice??void 0,he=le==null||le===0?B.price??0:le,ve=te[B.id]??0;return{id:B.id,label:B.label,qty:ve,unitPrice:he,lineTotal:he*ve}}),[P,te]),Fe=R.useMemo(()=>{const B=q.find(le=>le.id===S.deliveryOption);return B?B.cost:0},[q,S.deliveryOption]),Mt=F+Fe,ee=(B,le)=>{I(he=>({...he,[B]:le}))},ge=()=>{const B=S.countryCode.replace(/[^\d]/g,""),le=B?`+${B}`:"",he=S.cellphone.trim();return`${le} ${he}`.trim()},Ne=(B,le)=>{Y(he=>({...he,[B]:Math.max(0,le)}))},Xe=()=>!S.name.trim()||!S.surname.trim()||!S.email.trim()||!S.countryCode.trim()||!S.cellphone.trim()||!S.address.trim()||!S.deliveryOption||!S.sendDate?"Please fill in all required fields.":S.deliveryOption==="other"&&!S.otherDelivery.trim()?"Please specify your other delivery option.":P.length>0?"":`Please order at least one ${o} (quantities above 0).`,at="https://wa.me/27828910761?text=Hi%2C%20I%20would%20like%20assistance",U=async B=>{B.preventDefault(),_e(""),Me(""),z(null);const le=Xe();if(le){_e(le);return}fe(!0);try{const he=q.find(Be=>Be.id===S.deliveryOption)?.label??"",ve=q.find(Be=>Be.id===S.deliveryOption)?.cost??0,ye={name:S.name.trim(),surname:S.surname.trim(),email:S.email.trim(),cellphone:ge(),address:S.address.trim(),deliveryOptionId:S.deliveryOption,deliveryOption:S.deliveryOption==="other"?`Other: ${S.otherDelivery.trim()}`:he,deliveryCost:ve,otherDelivery:S.deliveryOption==="other"?S.otherDelivery.trim():"",sendDate:S.sendDate,eggs:P.map(Be=>({id:Be.id,label:Be.label,quantity:te[Be.id],price:Be.price,specialPrice:Be.specialPrice??null})),formType:s,orderStatus:"pending",fulfilledEggs:[],trackingLink:"",notes:S.notes.trim(),paid:!1,createdAt:Oi()},Se=e?"livestockOrders":"eggOrders",Le=await Fr(yt(Ae,Se),ye);let Ie=null;for(let Be=0;Be<5;Be++){const Yr=(await ZD(Ot(Ae,Se,Le.id))).data()?.orderNumber;if(Yr){Ie=Yr;break}await new Promise(yr=>setTimeout(yr,250))}z(Ie),Me(Ie?`Order submitted! Your order number is ${Ie}. Please use it as your payment reference.`:"Order submitted successfully! Thank you for your support."),D(!0),I(Q_),Y(g.reduce((Be,At)=>(Be[At.id]=0,Be),{}))}catch(he){he instanceof Wt&&he.code==="permission-denied"?_e(`Submission blocked by Firestore rules. Please allow creates to the ${yt} collection.`):he instanceof Wt?_e(`Firebase error: ${he.message}`):_e("Something went wrong while submitting. Please try again."),console.error("Order submit error:",he)}finally{fe(!1)}};return u.jsxs("div",{className:"mx-auto max-w-5xl space-y-6",children:[u.jsx("div",{className:`${Kh} p-6 md:p-8`,children:u.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[u.jsx("img",{src:V3,alt:"The Crooked Fence logo",className:"h-32 w-auto object-contain"}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.25em] text-brandGreen/70",children:"The Crooked Fence"}),u.jsx("h1",{className:"text-3xl font-bold text-brandGreen",children:n}),u.jsx("p",{className:"text-brandGreen/80",children:"Please help us keep track of our egg orders by filling in the following. Thank you so much for your support."})]}),u.jsxs("div",{className:"w-full space-y-2 rounded-xl bg-white/70 p-4 text-left text-sm text-brandGreen shadow-inner",children:[u.jsx("p",{className:"text-red-700 font-semibold",children:"This form is not monitored. If you place an order here, please WhatsApp 082 891 07612 to confirm payment."}),u.jsxs("p",{className:"text-brandGreen/80",children:["Support email:"," ",u.jsx("a",{href:"mailto:stolschristopher60@gmail.com",className:"font-semibold underline",children:"stolschristopher60@gmail.com"})]}),e&&u.jsx("p",{className:"text-brandGreen/80",children:"Delivery prices are shown per option; livestock delivery differs from eggs."})]})]})}),u.jsxs("form",{onSubmit:U,className:`${Kh} p-6 md:p-8 space-y-6`,children:[u.jsxs("div",{className:`${Kh} p-4 md:p-5 space-y-4`,children:[u.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-bold text-brandGreen",children:i}),!e&&u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"text-sm text-brandGreen/70",children:"Limited Quantities of Chicken Breed. Orders can only be made up to 20 at a time per breed."}),u.jsx("p",{className:"text-sm text-brandGreen/70",children:"Bulk quantities available for Indian Runner Ducks and Quail."})]})]}),u.jsxs("div",{className:"space-y-1 text-sm text-brandGreen/80",children:[u.jsx("p",{children:u.jsx("span",{className:"font-semibold text-brandGreen",children:c})}),u.jsx("input",{type:"date",className:`${va} md:w-56`,value:S.sendDate,onChange:B=>ee("sendDate",B.target.value),required:!0}),h&&u.jsx("p",{className:"text-xs text-brandGreen/70",children:h})]})]}),e?u.jsx("div",{className:"space-y-4",children:(()=>{const B=new Map,le=v.map(ye=>ye.id),he=new Map(v.map(ye=>[ye.name.trim().toLowerCase(),ye.description??""]));g.forEach(ye=>{const Se=ye.categoryName&&ye.categoryName.trim().length>0?ye.categoryName:"Category",Le=ye.categoryId||`name:${Se}`,Ie=v.find(Yr=>Yr.id===ye.categoryId),Be=Ie?.name??Se,At=Ie?.description??he.get(Se.trim().toLowerCase())??"";B.has(Le)||B.set(Le,{label:Be,items:[],categoryDescription:At}),B.get(Le)?.items.push(ye)});const ve=[...le.filter(ye=>B.has(ye)),...Array.from(B.keys()).filter(ye=>!le.includes(ye))];return ve.length===0?u.jsx("div",{className:"rounded-xl border border-dashed border-brandGreen/30 bg-white/70 px-4 py-6 text-sm text-brandGreen/70",children:"No livestock types found. Add some on the admin dashboard."}):ve.map(ye=>{const Se=B.get(ye),Le=Se?.items??[],Ie=Se?.label??"Category";return u.jsxs("div",{className:"space-y-2 rounded-xl border border-brandGreen/15 bg-white/70 p-4 shadow-sm",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("p",{className:"font-semibold text-brandGreen",children:Ie}),Se?.categoryDescription&&u.jsx("p",{className:"text-sm text-brandGreen/80",children:Se.categoryDescription})]}),u.jsx("div",{className:"flex flex-col items-end",children:u.jsxs("span",{className:"text-xs text-brandGreen/60",children:[Le.length," item",Le.length===1?"":"s"]})})]}),u.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:Le.map(Be=>u.jsx("div",{className:"rounded-lg border border-brandGreen/15 bg-brandBeige/40 p-3 shadow-sm",children:u.jsxs("div",{className:"flex justify-between gap-3",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-brandGreen",children:Be.label}),u.jsxs("p",{className:"text-sm text-brandGreen/70",children:["Normal: R",Be.price.toFixed(2),Be.specialPrice?`  Special: R${Be.specialPrice.toFixed(2)}`:""]})]}),u.jsx("input",{type:"number",min:0,className:"w-24 rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-right font-semibold text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30",value:te[Be.id],onChange:At=>Ne(Be.id,Number(At.target.value))})]})},Be.id))})]},ye)})})()}):u.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:g.map(B=>u.jsx("div",{className:"rounded-lg border border-brandGreen/15 bg-white/70 p-3 shadow-sm",children:u.jsxs("div",{className:"flex justify-between gap-3",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-brandGreen",children:B.label}),u.jsxs("p",{className:"text-sm text-brandGreen/70",children:["Normal: R",B.price.toFixed(2),B.specialPrice?`  Special: R${B.specialPrice.toFixed(2)}`:""]})]}),u.jsx("input",{type:"number",min:0,className:"w-24 rounded-lg border border-brandGreen/30 bg-brandCream px-3 py-2 text-right font-semibold text-brandGreen focus:border-brandGreen focus:outline-none focus:ring-2 focus:ring-brandGreen/30",value:te[B.id],onChange:le=>Ne(B.id,Number(le.target.value))})]})},B.id))}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"block text-sm font-semibold text-brandGreen",children:"Notes / comments (optional)"}),u.jsx("textarea",{className:`${va} min-h-28`,value:S.notes,onChange:B=>ee("notes",B.target.value),placeholder:"Add any special requests or notes for the farm..."})]})]}),u.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"block text-sm font-semibold text-brandGreen",children:"Name*"}),u.jsx("input",{type:"text",className:va,value:S.name,onChange:B=>ee("name",B.target.value),required:!0})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"block text-sm font-semibold text-brandGreen",children:"Surname*"}),u.jsx("input",{type:"text",className:va,value:S.surname,onChange:B=>ee("surname",B.target.value),required:!0})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"block text-sm font-semibold text-brandGreen",children:"Email*"}),u.jsx("input",{type:"email",className:va,value:S.email,onChange:B=>ee("email",B.target.value),required:!0})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"block text-sm font-semibold text-brandGreen",children:"Cellphone number*"}),u.jsxs("div",{className:"grid grid-cols-[200px_1fr] gap-2",children:[u.jsx("select",{className:va,value:S.countryCode,onChange:B=>ee("countryCode",B.target.value),children:L3.map(B=>u.jsxs("option",{value:B.code,children:[B.label," (",B.code,")"]},B.code))}),u.jsx("input",{type:"tel",className:va,value:S.cellphone,onChange:B=>ee("cellphone",B.target.value),placeholder:"e.g. 82 123 4567",required:!0})]})]}),u.jsxs("div",{className:"space-y-2 md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-semibold text-brandGreen",children:"Delivery address*"}),u.jsx("textarea",{className:`${va} min-h-28`,value:S.address,onChange:B=>ee("address",B.target.value),placeholder:"Street name and number, Suburb, Town, Postal code. For PUDO please add the locker name. (PUDO IS FOR EGGS ONLY)",required:!0}),u.jsx("p",{className:"text-xs text-brandGreen/70",children:"Street name and number, Suburb, Town, Postal code. For PUDO please add the locker name. (PUDO IS FOR EGGS ONLY)"})]})]}),u.jsxs("div",{className:`${Kh} p-4 md:p-5`,children:[u.jsx("h2",{className:"text-lg font-bold text-brandGreen",children:"Delivery options*"}),u.jsx("div",{className:"mt-3 grid gap-3 md:grid-cols-2",children:q.map(B=>u.jsxs("label",{className:"flex cursor-pointer gap-3 rounded-lg border border-brandGreen/20 bg-white/70 p-3 transition hover:border-brandGreen",children:[u.jsx("input",{type:"radio",name:"deliveryOption",value:B.id,checked:S.deliveryOption===B.id,onChange:le=>ee("deliveryOption",le.target.value),className:"mt-1 accent-brandGreen"}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-brandGreen",children:B.label}),u.jsxs("span",{className:"text-xs text-brandGreen/70",children:["Cost: R",Number(B.cost??0).toFixed(2)]})]})]},B.id))}),S.deliveryOption==="other"&&u.jsxs("div",{className:"mt-3",children:[u.jsx("label",{className:"block text-sm font-semibold text-brandGreen",children:"Please describe your delivery preference"}),u.jsx("input",{type:"text",className:va,value:S.otherDelivery,onChange:B=>ee("otherDelivery",B.target.value),placeholder:"e.g. Meet at local pickup point"})]})]}),u.jsxs("div",{className:"rounded-xl border border-brandGreen/15 bg-white/80 px-4 py-3 shadow-sm text-sm text-brandGreen",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brandGreen/60",children:"Order total (estimate)"}),k&&u.jsxs("p",{className:"text-xs font-mono text-brandGreen/80",children:["Order number: ",k]}),u.jsxs("div",{className:"mt-2 space-y-1",children:[G.map(B=>u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsxs("span",{children:[B.label,"  ",B.qty,"  R",B.unitPrice.toFixed(2)]}),u.jsxs("span",{className:"font-semibold",children:["R",B.lineTotal.toFixed(2)]})]},B.id)),u.jsxs("div",{className:"flex items-center justify-between border-t border-brandGreen/10 pt-1 text-sm",children:[u.jsx("span",{children:"Subtotal"}),u.jsxs("span",{className:"font-semibold",children:["R",F.toFixed(2)]})]}),u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{children:"Delivery"}),u.jsxs("span",{className:"font-semibold",children:["R",Fe.toFixed(2)]})]}),u.jsxs("div",{className:"flex items-center justify-between text-base font-bold text-brandGreen",children:[u.jsx("span",{children:"Total"}),u.jsxs("span",{children:["R",Mt.toFixed(2)]})]})]})]}),oe&&u.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:oe}),ke&&u.jsx("div",{className:"rounded-xl border border-brandGreen/20 bg-white px-4 py-3 text-sm text-brandGreen",children:ke}),u.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[u.jsx("span",{className:"text-sm text-brandGreen/70",children:"You can update your order later by reaching out on WhatsApp."}),u.jsx("button",{type:"submit",disabled:ue,className:"inline-flex items-center justify-center rounded-full bg-brandGreen px-6 py-3 text-white font-semibold shadow-md transition hover:scale-[1.01] hover:shadow-lg disabled:cursor-not-allowed disabled:opacity-70",children:ue?"Submitting...":"Submit order"})]})]}),O&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 px-4",role:"dialog","aria-modal":"true","aria-label":"Order submitted",onClick:()=>D(!1),children:u.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white p-6 text-brandGreen shadow-2xl",onClick:B=>B.stopPropagation(),children:[u.jsx("h3",{className:"text-xl font-bold",children:"Order received"}),u.jsx("p",{className:"mt-2 text-sm text-brandGreen/80",children:"Thank you! Your order has been submitted. You'll receive an email confirmation and updates as we process and update the status of your order."}),k&&u.jsxs("p",{className:"mt-2 text-sm font-semibold text-brandGreen",children:["Your order number: ",k]}),u.jsx("button",{type:"button",onClick:()=>D(!1),className:"mt-4 w-full rounded-full bg-brandGreen px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:shadow-md",children:"Got it"})]})}),u.jsxs("a",{href:at,target:"_blank",rel:"noreferrer noopener",className:"fixed bottom-4 right-4 z-50 flex items-center justify-center gap-2 rounded-full bg-brandCream px-5 py-3 text-sm font-semibold text-brandGreen shadow-xl transition hover:bg-brandCream/90 md:gap-3 md:px-4 md:py-2 md:text-xs","aria-label":"Chat with us on WhatsApp",children:[u.jsx("img",{src:U3,alt:"WhatsApp",className:"h-6 w-6 rounded-full bg-white/20 object-contain"}),u.jsx("span",{className:"hidden md:inline",children:"Send a WhatsApp"})]})]})}function B3(){return u.jsx(sN,{variant:"livestock"})}function z3(){const[s,e]=R.useState(null);return R.useEffect(()=>{const n=Hw(lf,i=>{e(i)});return()=>n()},[]),u.jsxs("div",{className:"min-h-screen bg-brandCream text-brandGreen",children:[u.jsx("nav",{className:"bg-brandGreen text-white",children:u.jsxs("div",{className:"mx-auto flex max-w-6xl items-center justify-between px-4 py-3 md:px-8",children:[u.jsx(yc,{to:"/",className:"text-lg font-semibold tracking-tight",children:"The Crooked Fence"}),u.jsxs("div",{className:"flex items-center gap-3 text-sm font-medium",children:[u.jsx(yc,{to:"/eggs",className:"rounded-full bg-white/10 px-3 py-1 transition hover:bg-white/20",children:"Egg Order Form"}),u.jsx(yc,{to:"/livestock",className:"rounded-full bg-white/10 px-3 py-1 transition hover:bg-white/20",children:"Livestock Form"}),u.jsx(yc,{to:"/admin",className:"rounded-full bg-white/10 px-3 py-1 transition hover:bg-white/20",children:s?"Dashboard":"Login"})]})]})}),u.jsx("main",{className:"px-4 py-8 md:px-8",children:u.jsxs(bA,{children:[u.jsx(Vu,{path:"/",element:u.jsx(gA,{to:"/eggs",replace:!0})}),u.jsx(Vu,{path:"/eggs",element:u.jsx(sN,{})}),u.jsx(Vu,{path:"/livestock",element:u.jsx(B3,{})}),u.jsx(Vu,{path:"/admin",element:u.jsx(P3,{})})]})})]})}function q3(){return u.jsx(BA,{children:u.jsx(z3,{})})}SS.createRoot(document.getElementById("root")).render(u.jsx(R.StrictMode,{children:u.jsx(q3,{})}));
